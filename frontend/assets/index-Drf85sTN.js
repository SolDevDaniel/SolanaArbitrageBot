var ha=Object.defineProperty;var da=(r,t,e)=>t in r?ha(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var ne=(r,t,e)=>da(r,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();function Sr(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Ui(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var t=r.default;if(typeof t=="function"){var e=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var s=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(e,n,s.get?s:{enumerable:!0,get:function(){return r[n]}})}),e}var ti={},Mn={},fs;function pa(){if(fs)return Mn;fs=1,Mn.byteLength=u,Mn.toByteArray=v,Mn.fromByteArray=q;for(var r=[],t=[],e=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,i=n.length;s<i;++s)r[s]=n[s],t[n.charCodeAt(s)]=s;t[45]=62,t[95]=63;function o(A){var F=A.length;if(F%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var R=A.indexOf("=");R===-1&&(R=F);var k=R===F?0:4-R%4;return[R,k]}function u(A){var F=o(A),R=F[0],k=F[1];return(R+k)*3/4-k}function p(A,F,R){return(F+R)*3/4-R}function v(A){var F,R=o(A),k=R[0],W=R[1],G=new e(p(A,k,W)),j=0,tt=W>0?k-4:k,$;for($=0;$<tt;$+=4)F=t[A.charCodeAt($)]<<18|t[A.charCodeAt($+1)]<<12|t[A.charCodeAt($+2)]<<6|t[A.charCodeAt($+3)],G[j++]=F>>16&255,G[j++]=F>>8&255,G[j++]=F&255;return W===2&&(F=t[A.charCodeAt($)]<<2|t[A.charCodeAt($+1)]>>4,G[j++]=F&255),W===1&&(F=t[A.charCodeAt($)]<<10|t[A.charCodeAt($+1)]<<4|t[A.charCodeAt($+2)]>>2,G[j++]=F>>8&255,G[j++]=F&255),G}function S(A){return r[A>>18&63]+r[A>>12&63]+r[A>>6&63]+r[A&63]}function I(A,F,R){for(var k,W=[],G=F;G<R;G+=3)k=(A[G]<<16&16711680)+(A[G+1]<<8&65280)+(A[G+2]&255),W.push(S(k));return W.join("")}function q(A){for(var F,R=A.length,k=R%3,W=[],G=16383,j=0,tt=R-k;j<tt;j+=G)W.push(I(A,j,j+G>tt?tt:j+G));return k===1?(F=A[R-1],W.push(r[F>>2]+r[F<<4&63]+"==")):k===2&&(F=(A[R-2]<<8)+A[R-1],W.push(r[F>>10]+r[F>>4&63]+r[F<<2&63]+"=")),W.join("")}return Mn}var Zn={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var ls;function ga(){return ls||(ls=1,Zn.read=function(r,t,e,n,s){var i,o,u=s*8-n-1,p=(1<<u)-1,v=p>>1,S=-7,I=e?s-1:0,q=e?-1:1,A=r[t+I];for(I+=q,i=A&(1<<-S)-1,A>>=-S,S+=u;S>0;i=i*256+r[t+I],I+=q,S-=8);for(o=i&(1<<-S)-1,i>>=-S,S+=n;S>0;o=o*256+r[t+I],I+=q,S-=8);if(i===0)i=1-v;else{if(i===p)return o?NaN:(A?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-v}return(A?-1:1)*o*Math.pow(2,i-n)},Zn.write=function(r,t,e,n,s,i){var o,u,p,v=i*8-s-1,S=(1<<v)-1,I=S>>1,q=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,A=n?0:i-1,F=n?1:-1,R=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,o=S):(o=Math.floor(Math.log(t)/Math.LN2),t*(p=Math.pow(2,-o))<1&&(o--,p*=2),o+I>=1?t+=q/p:t+=q*Math.pow(2,1-I),t*p>=2&&(o++,p/=2),o+I>=S?(u=0,o=S):o+I>=1?(u=(t*p-1)*Math.pow(2,s),o=o+I):(u=t*Math.pow(2,I-1)*Math.pow(2,s),o=0));s>=8;r[e+A]=u&255,A+=F,u/=256,s-=8);for(o=o<<s|u,v+=s;v>0;r[e+A]=o&255,A+=F,o/=256,v-=8);r[e+A-F]|=R*128}),Zn}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var hs;function Fi(){return hs||(hs=1,function(r){const t=pa(),e=ga(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=u,r.SlowBuffer=G,r.INSPECT_MAX_BYTES=50;const s=2147483647;r.kMaxLength=s,u.TYPED_ARRAY_SUPPORT=i(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const y=new Uint8Array(1),l={foo:function(){return 42}};return Object.setPrototypeOf(l,Uint8Array.prototype),Object.setPrototypeOf(y,l),y.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function o(y){if(y>s)throw new RangeError('The value "'+y+'" is invalid for option "size"');const l=new Uint8Array(y);return Object.setPrototypeOf(l,u.prototype),l}function u(y,l,h){if(typeof y=="number"){if(typeof l=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return I(y)}return p(y,l,h)}u.poolSize=8192;function p(y,l,h){if(typeof y=="string")return q(y,l);if(ArrayBuffer.isView(y))return F(y);if(y==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof y);if(we(y,ArrayBuffer)||y&&we(y.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(we(y,SharedArrayBuffer)||y&&we(y.buffer,SharedArrayBuffer)))return R(y,l,h);if(typeof y=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const E=y.valueOf&&y.valueOf();if(E!=null&&E!==y)return u.from(E,l,h);const N=k(y);if(N)return N;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof y[Symbol.toPrimitive]=="function")return u.from(y[Symbol.toPrimitive]("string"),l,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof y)}u.from=function(y,l,h){return p(y,l,h)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function v(y){if(typeof y!="number")throw new TypeError('"size" argument must be of type number');if(y<0)throw new RangeError('The value "'+y+'" is invalid for option "size"')}function S(y,l,h){return v(y),y<=0?o(y):l!==void 0?typeof h=="string"?o(y).fill(l,h):o(y).fill(l):o(y)}u.alloc=function(y,l,h){return S(y,l,h)};function I(y){return v(y),o(y<0?0:W(y)|0)}u.allocUnsafe=function(y){return I(y)},u.allocUnsafeSlow=function(y){return I(y)};function q(y,l){if((typeof l!="string"||l==="")&&(l="utf8"),!u.isEncoding(l))throw new TypeError("Unknown encoding: "+l);const h=j(y,l)|0;let E=o(h);const N=E.write(y,l);return N!==h&&(E=E.slice(0,N)),E}function A(y){const l=y.length<0?0:W(y.length)|0,h=o(l);for(let E=0;E<l;E+=1)h[E]=y[E]&255;return h}function F(y){if(we(y,Uint8Array)){const l=new Uint8Array(y);return R(l.buffer,l.byteOffset,l.byteLength)}return A(y)}function R(y,l,h){if(l<0||y.byteLength<l)throw new RangeError('"offset" is outside of buffer bounds');if(y.byteLength<l+(h||0))throw new RangeError('"length" is outside of buffer bounds');let E;return l===void 0&&h===void 0?E=new Uint8Array(y):h===void 0?E=new Uint8Array(y,l):E=new Uint8Array(y,l,h),Object.setPrototypeOf(E,u.prototype),E}function k(y){if(u.isBuffer(y)){const l=W(y.length)|0,h=o(l);return h.length===0||y.copy(h,0,0,l),h}if(y.length!==void 0)return typeof y.length!="number"||At(y.length)?o(0):A(y);if(y.type==="Buffer"&&Array.isArray(y.data))return A(y.data)}function W(y){if(y>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return y|0}function G(y){return+y!=y&&(y=0),u.alloc(+y)}u.isBuffer=function(l){return l!=null&&l._isBuffer===!0&&l!==u.prototype},u.compare=function(l,h){if(we(l,Uint8Array)&&(l=u.from(l,l.offset,l.byteLength)),we(h,Uint8Array)&&(h=u.from(h,h.offset,h.byteLength)),!u.isBuffer(l)||!u.isBuffer(h))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(l===h)return 0;let E=l.length,N=h.length;for(let z=0,V=Math.min(E,N);z<V;++z)if(l[z]!==h[z]){E=l[z],N=h[z];break}return E<N?-1:N<E?1:0},u.isEncoding=function(l){switch(String(l).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(l,h){if(!Array.isArray(l))throw new TypeError('"list" argument must be an Array of Buffers');if(l.length===0)return u.alloc(0);let E;if(h===void 0)for(h=0,E=0;E<l.length;++E)h+=l[E].length;const N=u.allocUnsafe(h);let z=0;for(E=0;E<l.length;++E){let V=l[E];if(we(V,Uint8Array))z+V.length>N.length?(u.isBuffer(V)||(V=u.from(V)),V.copy(N,z)):Uint8Array.prototype.set.call(N,V,z);else if(u.isBuffer(V))V.copy(N,z);else throw new TypeError('"list" argument must be an Array of Buffers');z+=V.length}return N};function j(y,l){if(u.isBuffer(y))return y.length;if(ArrayBuffer.isView(y)||we(y,ArrayBuffer))return y.byteLength;if(typeof y!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof y);const h=y.length,E=arguments.length>2&&arguments[2]===!0;if(!E&&h===0)return 0;let N=!1;for(;;)switch(l){case"ascii":case"latin1":case"binary":return h;case"utf8":case"utf-8":return _t(y).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h*2;case"hex":return h>>>1;case"base64":return kt(y).length;default:if(N)return E?-1:_t(y).length;l=(""+l).toLowerCase(),N=!0}}u.byteLength=j;function tt(y,l,h){let E=!1;if((l===void 0||l<0)&&(l=0),l>this.length||((h===void 0||h>this.length)&&(h=this.length),h<=0)||(h>>>=0,l>>>=0,h<=l))return"";for(y||(y="utf8");;)switch(y){case"hex":return U(this,l,h);case"utf8":case"utf-8":return a(this,l,h);case"ascii":return x(this,l,h);case"latin1":case"binary":return B(this,l,h);case"base64":return m(this,l,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,l,h);default:if(E)throw new TypeError("Unknown encoding: "+y);y=(y+"").toLowerCase(),E=!0}}u.prototype._isBuffer=!0;function $(y,l,h){const E=y[l];y[l]=y[h],y[h]=E}u.prototype.swap16=function(){const l=this.length;if(l%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let h=0;h<l;h+=2)$(this,h,h+1);return this},u.prototype.swap32=function(){const l=this.length;if(l%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let h=0;h<l;h+=4)$(this,h,h+3),$(this,h+1,h+2);return this},u.prototype.swap64=function(){const l=this.length;if(l%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let h=0;h<l;h+=8)$(this,h,h+7),$(this,h+1,h+6),$(this,h+2,h+5),$(this,h+3,h+4);return this},u.prototype.toString=function(){const l=this.length;return l===0?"":arguments.length===0?a(this,0,l):tt.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(l){if(!u.isBuffer(l))throw new TypeError("Argument must be a Buffer");return this===l?!0:u.compare(this,l)===0},u.prototype.inspect=function(){let l="";const h=r.INSPECT_MAX_BYTES;return l=this.toString("hex",0,h).replace(/(.{2})/g,"$1 ").trim(),this.length>h&&(l+=" ... "),"<Buffer "+l+">"},n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=function(l,h,E,N,z){if(we(l,Uint8Array)&&(l=u.from(l,l.offset,l.byteLength)),!u.isBuffer(l))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof l);if(h===void 0&&(h=0),E===void 0&&(E=l?l.length:0),N===void 0&&(N=0),z===void 0&&(z=this.length),h<0||E>l.length||N<0||z>this.length)throw new RangeError("out of range index");if(N>=z&&h>=E)return 0;if(N>=z)return-1;if(h>=E)return 1;if(h>>>=0,E>>>=0,N>>>=0,z>>>=0,this===l)return 0;let V=z-N,pt=E-h;const dt=Math.min(V,pt),ht=this.slice(N,z),Bt=l.slice(h,E);for(let ft=0;ft<dt;++ft)if(ht[ft]!==Bt[ft]){V=ht[ft],pt=Bt[ft];break}return V<pt?-1:pt<V?1:0};function X(y,l,h,E,N){if(y.length===0)return-1;if(typeof h=="string"?(E=h,h=0):h>2147483647?h=2147483647:h<-2147483648&&(h=-2147483648),h=+h,At(h)&&(h=N?0:y.length-1),h<0&&(h=y.length+h),h>=y.length){if(N)return-1;h=y.length-1}else if(h<0)if(N)h=0;else return-1;if(typeof l=="string"&&(l=u.from(l,E)),u.isBuffer(l))return l.length===0?-1:st(y,l,h,E,N);if(typeof l=="number")return l=l&255,typeof Uint8Array.prototype.indexOf=="function"?N?Uint8Array.prototype.indexOf.call(y,l,h):Uint8Array.prototype.lastIndexOf.call(y,l,h):st(y,[l],h,E,N);throw new TypeError("val must be string, number or Buffer")}function st(y,l,h,E,N){let z=1,V=y.length,pt=l.length;if(E!==void 0&&(E=String(E).toLowerCase(),E==="ucs2"||E==="ucs-2"||E==="utf16le"||E==="utf-16le")){if(y.length<2||l.length<2)return-1;z=2,V/=2,pt/=2,h/=2}function dt(Bt,ft){return z===1?Bt[ft]:Bt.readUInt16BE(ft*z)}let ht;if(N){let Bt=-1;for(ht=h;ht<V;ht++)if(dt(y,ht)===dt(l,Bt===-1?0:ht-Bt)){if(Bt===-1&&(Bt=ht),ht-Bt+1===pt)return Bt*z}else Bt!==-1&&(ht-=ht-Bt),Bt=-1}else for(h+pt>V&&(h=V-pt),ht=h;ht>=0;ht--){let Bt=!0;for(let ft=0;ft<pt;ft++)if(dt(y,ht+ft)!==dt(l,ft)){Bt=!1;break}if(Bt)return ht}return-1}u.prototype.includes=function(l,h,E){return this.indexOf(l,h,E)!==-1},u.prototype.indexOf=function(l,h,E){return X(this,l,h,E,!0)},u.prototype.lastIndexOf=function(l,h,E){return X(this,l,h,E,!1)};function et(y,l,h,E){h=Number(h)||0;const N=y.length-h;E?(E=Number(E),E>N&&(E=N)):E=N;const z=l.length;E>z/2&&(E=z/2);let V;for(V=0;V<E;++V){const pt=parseInt(l.substr(V*2,2),16);if(At(pt))return V;y[h+V]=pt}return V}function C(y,l,h,E){return Et(_t(l,y.length-h),y,h,E)}function T(y,l,h,E){return Et(Lt(l),y,h,E)}function L(y,l,h,E){return Et(kt(l),y,h,E)}function O(y,l,h,E){return Et(jn(l,y.length-h),y,h,E)}u.prototype.write=function(l,h,E,N){if(h===void 0)N="utf8",E=this.length,h=0;else if(E===void 0&&typeof h=="string")N=h,E=this.length,h=0;else if(isFinite(h))h=h>>>0,isFinite(E)?(E=E>>>0,N===void 0&&(N="utf8")):(N=E,E=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const z=this.length-h;if((E===void 0||E>z)&&(E=z),l.length>0&&(E<0||h<0)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");N||(N="utf8");let V=!1;for(;;)switch(N){case"hex":return et(this,l,h,E);case"utf8":case"utf-8":return C(this,l,h,E);case"ascii":case"latin1":case"binary":return T(this,l,h,E);case"base64":return L(this,l,h,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,l,h,E);default:if(V)throw new TypeError("Unknown encoding: "+N);N=(""+N).toLowerCase(),V=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function m(y,l,h){return l===0&&h===y.length?t.fromByteArray(y):t.fromByteArray(y.slice(l,h))}function a(y,l,h){h=Math.min(y.length,h);const E=[];let N=l;for(;N<h;){const z=y[N];let V=null,pt=z>239?4:z>223?3:z>191?2:1;if(N+pt<=h){let dt,ht,Bt,ft;switch(pt){case 1:z<128&&(V=z);break;case 2:dt=y[N+1],(dt&192)===128&&(ft=(z&31)<<6|dt&63,ft>127&&(V=ft));break;case 3:dt=y[N+1],ht=y[N+2],(dt&192)===128&&(ht&192)===128&&(ft=(z&15)<<12|(dt&63)<<6|ht&63,ft>2047&&(ft<55296||ft>57343)&&(V=ft));break;case 4:dt=y[N+1],ht=y[N+2],Bt=y[N+3],(dt&192)===128&&(ht&192)===128&&(Bt&192)===128&&(ft=(z&15)<<18|(dt&63)<<12|(ht&63)<<6|Bt&63,ft>65535&&ft<1114112&&(V=ft))}}V===null?(V=65533,pt=1):V>65535&&(V-=65536,E.push(V>>>10&1023|55296),V=56320|V&1023),E.push(V),N+=pt}return g(E)}const d=4096;function g(y){const l=y.length;if(l<=d)return String.fromCharCode.apply(String,y);let h="",E=0;for(;E<l;)h+=String.fromCharCode.apply(String,y.slice(E,E+=d));return h}function x(y,l,h){let E="";h=Math.min(y.length,h);for(let N=l;N<h;++N)E+=String.fromCharCode(y[N]&127);return E}function B(y,l,h){let E="";h=Math.min(y.length,h);for(let N=l;N<h;++N)E+=String.fromCharCode(y[N]);return E}function U(y,l,h){const E=y.length;(!l||l<0)&&(l=0),(!h||h<0||h>E)&&(h=E);let N="";for(let z=l;z<h;++z)N+=Ct[y[z]];return N}function P(y,l,h){const E=y.slice(l,h);let N="";for(let z=0;z<E.length-1;z+=2)N+=String.fromCharCode(E[z]+E[z+1]*256);return N}u.prototype.slice=function(l,h){const E=this.length;l=~~l,h=h===void 0?E:~~h,l<0?(l+=E,l<0&&(l=0)):l>E&&(l=E),h<0?(h+=E,h<0&&(h=0)):h>E&&(h=E),h<l&&(h=l);const N=this.subarray(l,h);return Object.setPrototypeOf(N,u.prototype),N};function b(y,l,h){if(y%1!==0||y<0)throw new RangeError("offset is not uint");if(y+l>h)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(l,h,E){l=l>>>0,h=h>>>0,E||b(l,h,this.length);let N=this[l],z=1,V=0;for(;++V<h&&(z*=256);)N+=this[l+V]*z;return N},u.prototype.readUintBE=u.prototype.readUIntBE=function(l,h,E){l=l>>>0,h=h>>>0,E||b(l,h,this.length);let N=this[l+--h],z=1;for(;h>0&&(z*=256);)N+=this[l+--h]*z;return N},u.prototype.readUint8=u.prototype.readUInt8=function(l,h){return l=l>>>0,h||b(l,1,this.length),this[l]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(l,h){return l=l>>>0,h||b(l,2,this.length),this[l]|this[l+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(l,h){return l=l>>>0,h||b(l,2,this.length),this[l]<<8|this[l+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(l,h){return l=l>>>0,h||b(l,4,this.length),(this[l]|this[l+1]<<8|this[l+2]<<16)+this[l+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(l,h){return l=l>>>0,h||b(l,4,this.length),this[l]*16777216+(this[l+1]<<16|this[l+2]<<8|this[l+3])},u.prototype.readBigUInt64LE=Be(function(l){l=l>>>0,Ce(l,"offset");const h=this[l],E=this[l+7];(h===void 0||E===void 0)&&vt(l,this.length-8);const N=h+this[++l]*2**8+this[++l]*2**16+this[++l]*2**24,z=this[++l]+this[++l]*2**8+this[++l]*2**16+E*2**24;return BigInt(N)+(BigInt(z)<<BigInt(32))}),u.prototype.readBigUInt64BE=Be(function(l){l=l>>>0,Ce(l,"offset");const h=this[l],E=this[l+7];(h===void 0||E===void 0)&&vt(l,this.length-8);const N=h*2**24+this[++l]*2**16+this[++l]*2**8+this[++l],z=this[++l]*2**24+this[++l]*2**16+this[++l]*2**8+E;return(BigInt(N)<<BigInt(32))+BigInt(z)}),u.prototype.readIntLE=function(l,h,E){l=l>>>0,h=h>>>0,E||b(l,h,this.length);let N=this[l],z=1,V=0;for(;++V<h&&(z*=256);)N+=this[l+V]*z;return z*=128,N>=z&&(N-=Math.pow(2,8*h)),N},u.prototype.readIntBE=function(l,h,E){l=l>>>0,h=h>>>0,E||b(l,h,this.length);let N=h,z=1,V=this[l+--N];for(;N>0&&(z*=256);)V+=this[l+--N]*z;return z*=128,V>=z&&(V-=Math.pow(2,8*h)),V},u.prototype.readInt8=function(l,h){return l=l>>>0,h||b(l,1,this.length),this[l]&128?(255-this[l]+1)*-1:this[l]},u.prototype.readInt16LE=function(l,h){l=l>>>0,h||b(l,2,this.length);const E=this[l]|this[l+1]<<8;return E&32768?E|4294901760:E},u.prototype.readInt16BE=function(l,h){l=l>>>0,h||b(l,2,this.length);const E=this[l+1]|this[l]<<8;return E&32768?E|4294901760:E},u.prototype.readInt32LE=function(l,h){return l=l>>>0,h||b(l,4,this.length),this[l]|this[l+1]<<8|this[l+2]<<16|this[l+3]<<24},u.prototype.readInt32BE=function(l,h){return l=l>>>0,h||b(l,4,this.length),this[l]<<24|this[l+1]<<16|this[l+2]<<8|this[l+3]},u.prototype.readBigInt64LE=Be(function(l){l=l>>>0,Ce(l,"offset");const h=this[l],E=this[l+7];(h===void 0||E===void 0)&&vt(l,this.length-8);const N=this[l+4]+this[l+5]*2**8+this[l+6]*2**16+(E<<24);return(BigInt(N)<<BigInt(32))+BigInt(h+this[++l]*2**8+this[++l]*2**16+this[++l]*2**24)}),u.prototype.readBigInt64BE=Be(function(l){l=l>>>0,Ce(l,"offset");const h=this[l],E=this[l+7];(h===void 0||E===void 0)&&vt(l,this.length-8);const N=(h<<24)+this[++l]*2**16+this[++l]*2**8+this[++l];return(BigInt(N)<<BigInt(32))+BigInt(this[++l]*2**24+this[++l]*2**16+this[++l]*2**8+E)}),u.prototype.readFloatLE=function(l,h){return l=l>>>0,h||b(l,4,this.length),e.read(this,l,!0,23,4)},u.prototype.readFloatBE=function(l,h){return l=l>>>0,h||b(l,4,this.length),e.read(this,l,!1,23,4)},u.prototype.readDoubleLE=function(l,h){return l=l>>>0,h||b(l,8,this.length),e.read(this,l,!0,52,8)},u.prototype.readDoubleBE=function(l,h){return l=l>>>0,h||b(l,8,this.length),e.read(this,l,!1,52,8)};function c(y,l,h,E,N,z){if(!u.isBuffer(y))throw new TypeError('"buffer" argument must be a Buffer instance');if(l>N||l<z)throw new RangeError('"value" argument is out of bounds');if(h+E>y.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(l,h,E,N){if(l=+l,h=h>>>0,E=E>>>0,!N){const pt=Math.pow(2,8*E)-1;c(this,l,h,E,pt,0)}let z=1,V=0;for(this[h]=l&255;++V<E&&(z*=256);)this[h+V]=l/z&255;return h+E},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(l,h,E,N){if(l=+l,h=h>>>0,E=E>>>0,!N){const pt=Math.pow(2,8*E)-1;c(this,l,h,E,pt,0)}let z=E-1,V=1;for(this[h+z]=l&255;--z>=0&&(V*=256);)this[h+z]=l/V&255;return h+E},u.prototype.writeUint8=u.prototype.writeUInt8=function(l,h,E){return l=+l,h=h>>>0,E||c(this,l,h,1,255,0),this[h]=l&255,h+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(l,h,E){return l=+l,h=h>>>0,E||c(this,l,h,2,65535,0),this[h]=l&255,this[h+1]=l>>>8,h+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(l,h,E){return l=+l,h=h>>>0,E||c(this,l,h,2,65535,0),this[h]=l>>>8,this[h+1]=l&255,h+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(l,h,E){return l=+l,h=h>>>0,E||c(this,l,h,4,4294967295,0),this[h+3]=l>>>24,this[h+2]=l>>>16,this[h+1]=l>>>8,this[h]=l&255,h+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(l,h,E){return l=+l,h=h>>>0,E||c(this,l,h,4,4294967295,0),this[h]=l>>>24,this[h+1]=l>>>16,this[h+2]=l>>>8,this[h+3]=l&255,h+4};function f(y,l,h,E,N){It(l,E,N,y,h,7);let z=Number(l&BigInt(4294967295));y[h++]=z,z=z>>8,y[h++]=z,z=z>>8,y[h++]=z,z=z>>8,y[h++]=z;let V=Number(l>>BigInt(32)&BigInt(4294967295));return y[h++]=V,V=V>>8,y[h++]=V,V=V>>8,y[h++]=V,V=V>>8,y[h++]=V,h}function w(y,l,h,E,N){It(l,E,N,y,h,7);let z=Number(l&BigInt(4294967295));y[h+7]=z,z=z>>8,y[h+6]=z,z=z>>8,y[h+5]=z,z=z>>8,y[h+4]=z;let V=Number(l>>BigInt(32)&BigInt(4294967295));return y[h+3]=V,V=V>>8,y[h+2]=V,V=V>>8,y[h+1]=V,V=V>>8,y[h]=V,h+8}u.prototype.writeBigUInt64LE=Be(function(l,h=0){return f(this,l,h,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Be(function(l,h=0){return w(this,l,h,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(l,h,E,N){if(l=+l,h=h>>>0,!N){const dt=Math.pow(2,8*E-1);c(this,l,h,E,dt-1,-dt)}let z=0,V=1,pt=0;for(this[h]=l&255;++z<E&&(V*=256);)l<0&&pt===0&&this[h+z-1]!==0&&(pt=1),this[h+z]=(l/V>>0)-pt&255;return h+E},u.prototype.writeIntBE=function(l,h,E,N){if(l=+l,h=h>>>0,!N){const dt=Math.pow(2,8*E-1);c(this,l,h,E,dt-1,-dt)}let z=E-1,V=1,pt=0;for(this[h+z]=l&255;--z>=0&&(V*=256);)l<0&&pt===0&&this[h+z+1]!==0&&(pt=1),this[h+z]=(l/V>>0)-pt&255;return h+E},u.prototype.writeInt8=function(l,h,E){return l=+l,h=h>>>0,E||c(this,l,h,1,127,-128),l<0&&(l=255+l+1),this[h]=l&255,h+1},u.prototype.writeInt16LE=function(l,h,E){return l=+l,h=h>>>0,E||c(this,l,h,2,32767,-32768),this[h]=l&255,this[h+1]=l>>>8,h+2},u.prototype.writeInt16BE=function(l,h,E){return l=+l,h=h>>>0,E||c(this,l,h,2,32767,-32768),this[h]=l>>>8,this[h+1]=l&255,h+2},u.prototype.writeInt32LE=function(l,h,E){return l=+l,h=h>>>0,E||c(this,l,h,4,2147483647,-2147483648),this[h]=l&255,this[h+1]=l>>>8,this[h+2]=l>>>16,this[h+3]=l>>>24,h+4},u.prototype.writeInt32BE=function(l,h,E){return l=+l,h=h>>>0,E||c(this,l,h,4,2147483647,-2147483648),l<0&&(l=4294967295+l+1),this[h]=l>>>24,this[h+1]=l>>>16,this[h+2]=l>>>8,this[h+3]=l&255,h+4},u.prototype.writeBigInt64LE=Be(function(l,h=0){return f(this,l,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Be(function(l,h=0){return w(this,l,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function _(y,l,h,E,N,z){if(h+E>y.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("Index out of range")}function D(y,l,h,E,N){return l=+l,h=h>>>0,N||_(y,l,h,4),e.write(y,l,h,E,23,4),h+4}u.prototype.writeFloatLE=function(l,h,E){return D(this,l,h,!0,E)},u.prototype.writeFloatBE=function(l,h,E){return D(this,l,h,!1,E)};function Z(y,l,h,E,N){return l=+l,h=h>>>0,N||_(y,l,h,8),e.write(y,l,h,E,52,8),h+8}u.prototype.writeDoubleLE=function(l,h,E){return Z(this,l,h,!0,E)},u.prototype.writeDoubleBE=function(l,h,E){return Z(this,l,h,!1,E)},u.prototype.copy=function(l,h,E,N){if(!u.isBuffer(l))throw new TypeError("argument should be a Buffer");if(E||(E=0),!N&&N!==0&&(N=this.length),h>=l.length&&(h=l.length),h||(h=0),N>0&&N<E&&(N=E),N===E||l.length===0||this.length===0)return 0;if(h<0)throw new RangeError("targetStart out of bounds");if(E<0||E>=this.length)throw new RangeError("Index out of range");if(N<0)throw new RangeError("sourceEnd out of bounds");N>this.length&&(N=this.length),l.length-h<N-E&&(N=l.length-h+E);const z=N-E;return this===l&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(h,E,N):Uint8Array.prototype.set.call(l,this.subarray(E,N),h),z},u.prototype.fill=function(l,h,E,N){if(typeof l=="string"){if(typeof h=="string"?(N=h,h=0,E=this.length):typeof E=="string"&&(N=E,E=this.length),N!==void 0&&typeof N!="string")throw new TypeError("encoding must be a string");if(typeof N=="string"&&!u.isEncoding(N))throw new TypeError("Unknown encoding: "+N);if(l.length===1){const V=l.charCodeAt(0);(N==="utf8"&&V<128||N==="latin1")&&(l=V)}}else typeof l=="number"?l=l&255:typeof l=="boolean"&&(l=Number(l));if(h<0||this.length<h||this.length<E)throw new RangeError("Out of range index");if(E<=h)return this;h=h>>>0,E=E===void 0?this.length:E>>>0,l||(l=0);let z;if(typeof l=="number")for(z=h;z<E;++z)this[z]=l;else{const V=u.isBuffer(l)?l:u.from(l,N),pt=V.length;if(pt===0)throw new TypeError('The value "'+l+'" is invalid for argument "value"');for(z=0;z<E-h;++z)this[z+h]=V[z%pt]}return this};const it={};function ct(y,l,h){it[y]=class extends h{constructor(){super(),Object.defineProperty(this,"message",{value:l.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${y}]`,this.stack,delete this.name}get code(){return y}set code(N){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:N,writable:!0})}toString(){return`${this.name} [${y}]: ${this.message}`}}}ct("ERR_BUFFER_OUT_OF_BOUNDS",function(y){return y?`${y} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ct("ERR_INVALID_ARG_TYPE",function(y,l){return`The "${y}" argument must be of type number. Received type ${typeof l}`},TypeError),ct("ERR_OUT_OF_RANGE",function(y,l,h){let E=`The value of "${y}" is out of range.`,N=h;return Number.isInteger(h)&&Math.abs(h)>2**32?N=re(String(h)):typeof h=="bigint"&&(N=String(h),(h>BigInt(2)**BigInt(32)||h<-(BigInt(2)**BigInt(32)))&&(N=re(N)),N+="n"),E+=` It must be ${l}. Received ${N}`,E},RangeError);function re(y){let l="",h=y.length;const E=y[0]==="-"?1:0;for(;h>=E+4;h-=3)l=`_${y.slice(h-3,h)}${l}`;return`${y.slice(0,h)}${l}`}function mt(y,l,h){Ce(l,"offset"),(y[l]===void 0||y[l+h]===void 0)&&vt(l,y.length-(h+1))}function It(y,l,h,E,N,z){if(y>h||y<l){const V=typeof l=="bigint"?"n":"";let pt;throw l===0||l===BigInt(0)?pt=`>= 0${V} and < 2${V} ** ${(z+1)*8}${V}`:pt=`>= -(2${V} ** ${(z+1)*8-1}${V}) and < 2 ** ${(z+1)*8-1}${V}`,new it.ERR_OUT_OF_RANGE("value",pt,y)}mt(E,N,z)}function Ce(y,l){if(typeof y!="number")throw new it.ERR_INVALID_ARG_TYPE(l,"number",y)}function vt(y,l,h){throw Math.floor(y)!==y?(Ce(y,h),new it.ERR_OUT_OF_RANGE("offset","an integer",y)):l<0?new it.ERR_BUFFER_OUT_OF_BOUNDS:new it.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${l}`,y)}const Tt=/[^+/0-9A-Za-z-_]/g;function Gn(y){if(y=y.split("=")[0],y=y.trim().replace(Tt,""),y.length<2)return"";for(;y.length%4!==0;)y=y+"=";return y}function _t(y,l){l=l||1/0;let h;const E=y.length;let N=null;const z=[];for(let V=0;V<E;++V){if(h=y.charCodeAt(V),h>55295&&h<57344){if(!N){if(h>56319){(l-=3)>-1&&z.push(239,191,189);continue}else if(V+1===E){(l-=3)>-1&&z.push(239,191,189);continue}N=h;continue}if(h<56320){(l-=3)>-1&&z.push(239,191,189),N=h;continue}h=(N-55296<<10|h-56320)+65536}else N&&(l-=3)>-1&&z.push(239,191,189);if(N=null,h<128){if((l-=1)<0)break;z.push(h)}else if(h<2048){if((l-=2)<0)break;z.push(h>>6|192,h&63|128)}else if(h<65536){if((l-=3)<0)break;z.push(h>>12|224,h>>6&63|128,h&63|128)}else if(h<1114112){if((l-=4)<0)break;z.push(h>>18|240,h>>12&63|128,h>>6&63|128,h&63|128)}else throw new Error("Invalid code point")}return z}function Lt(y){const l=[];for(let h=0;h<y.length;++h)l.push(y.charCodeAt(h)&255);return l}function jn(y,l){let h,E,N;const z=[];for(let V=0;V<y.length&&!((l-=2)<0);++V)h=y.charCodeAt(V),E=h>>8,N=h%256,z.push(N),z.push(E);return z}function kt(y){return t.toByteArray(Gn(y))}function Et(y,l,h,E){let N;for(N=0;N<E&&!(N+h>=l.length||N>=y.length);++N)l[N+h]=y[N];return N}function we(y,l){return y instanceof l||y!=null&&y.constructor!=null&&y.constructor.name!=null&&y.constructor.name===l.name}function At(y){return y!==y}const Ct=function(){const y="0123456789abcdef",l=new Array(256);for(let h=0;h<16;++h){const E=h*16;for(let N=0;N<16;++N)l[E+N]=y[h]+y[N]}return l}();function Be(y){return typeof BigInt>"u"?Ut:y}function Ut(){throw new Error("BigInt not supported")}}(ti)),ti}var lt=Fi();const un=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ni(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function Ii(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function Me(r,...t){if(!Ni(r))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(r.length))throw new Error("Uint8Array expected of length "+t+", got length="+r.length)}function ya(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Ii(r.outputLen),Ii(r.blockLen)}function ar(r,t=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(t&&r.finished)throw new Error("Hash#digest() has already been called")}function ma(r,t){Me(r);const e=t.outputLen;if(r.length<e)throw new Error("digestInto() expects output buffer of length at least "+e)}function wn(...r){for(let t=0;t<r.length;t++)r[t].fill(0)}function ei(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function Ie(r,t){return r<<32-t|r>>>t}const no=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",wa=Array.from({length:256},(r,t)=>t.toString(16).padStart(2,"0"));function bn(r){if(Me(r),no)return r.toHex();let t="";for(let e=0;e<r.length;e++)t+=wa[r[e]];return t}const Ue={_0:48,_9:57,A:65,F:70,a:97,f:102};function ds(r){if(r>=Ue._0&&r<=Ue._9)return r-Ue._0;if(r>=Ue.A&&r<=Ue.F)return r-(Ue.A-10);if(r>=Ue.a&&r<=Ue.f)return r-(Ue.a-10)}function Pi(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);if(no)return Uint8Array.fromHex(r);const t=r.length,e=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(e);for(let s=0,i=0;s<e;s++,i+=2){const o=ds(r.charCodeAt(i)),u=ds(r.charCodeAt(i+1));if(o===void 0||u===void 0){const p=r[i]+r[i+1];throw new Error('hex string expected, got non-hex character "'+p+'" at index '+i)}n[s]=o*16+u}return n}function ba(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function Oi(r){return typeof r=="string"&&(r=ba(r)),Me(r),r}function De(...r){let t=0;for(let n=0;n<r.length;n++){const s=r[n];Me(s),t+=s.length}const e=new Uint8Array(t);for(let n=0,s=0;n<r.length;n++){const i=r[n];e.set(i,s),s+=i.length}return e}class ro{}function io(r){const t=n=>r().update(Oi(n)).digest(),e=r();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>r(),t}function so(r=32){if(un&&typeof un.getRandomValues=="function")return un.getRandomValues(new Uint8Array(r));if(un&&typeof un.randomBytes=="function")return Uint8Array.from(un.randomBytes(r));throw new Error("crypto.getRandomValues must be defined")}function va(r,t,e,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(t,e,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(e>>s&i),u=Number(e&i),p=n?4:0,v=n?0:4;r.setUint32(t+p,o,n),r.setUint32(t+v,u,n)}function xa(r,t,e){return r&t^~r&e}function Sa(r,t,e){return r&t^r&e^t&e}class oo extends ro{constructor(t,e,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(t),this.view=ei(this.buffer)}update(t){ar(this),t=Oi(t),Me(t);const{view:e,buffer:n,blockLen:s}=this,i=t.length;for(let o=0;o<i;){const u=Math.min(s-this.pos,i-o);if(u===s){const p=ei(t);for(;s<=i-o;o+=s)this.process(p,o);continue}n.set(t.subarray(o,o+u),this.pos),this.pos+=u,o+=u,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){ar(this),ma(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;e[o++]=128,wn(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(n,0),o=0);for(let I=o;I<s;I++)e[I]=0;va(n,s-8,BigInt(this.length*8),i),this.process(n,0);const u=ei(t),p=this.outputLen;if(p%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const v=p/4,S=this.get();if(v>S.length)throw new Error("_sha2: outputLen bigger than state");for(let I=0;I<v;I++)u.setUint32(4*I,S[I],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:s,finished:i,destroyed:o,pos:u}=this;return t.destroyed=o,t.finished=i,t.length=s,t.pos=u,s%e&&t.buffer.set(n),t}clone(){return this._cloneInto()}}const Ke=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ce=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Yn=BigInt(2**32-1),ps=BigInt(32);function Ea(r,t=!1){return t?{h:Number(r&Yn),l:Number(r>>ps&Yn)}:{h:Number(r>>ps&Yn)|0,l:Number(r&Yn)|0}}function Ba(r,t=!1){const e=r.length;let n=new Uint32Array(e),s=new Uint32Array(e);for(let i=0;i<e;i++){const{h:o,l:u}=Ea(r[i],t);[n[i],s[i]]=[o,u]}return[n,s]}const gs=(r,t,e)=>r>>>e,ys=(r,t,e)=>r<<32-e|t>>>e,fn=(r,t,e)=>r>>>e|t<<32-e,ln=(r,t,e)=>r<<32-e|t>>>e,Xn=(r,t,e)=>r<<64-e|t>>>e-32,Jn=(r,t,e)=>r>>>e-32|t<<64-e;function Fe(r,t,e,n){const s=(t>>>0)+(n>>>0);return{h:r+e+(s/2**32|0)|0,l:s|0}}const _a=(r,t,e)=>(r>>>0)+(t>>>0)+(e>>>0),Aa=(r,t,e,n)=>t+e+n+(r/2**32|0)|0,Ia=(r,t,e,n)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0),ka=(r,t,e,n,s)=>t+e+n+s+(r/2**32|0)|0,Ma=(r,t,e,n,s)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0),Ra=(r,t,e,n,s,i)=>t+e+n+s+i+(r/2**32|0)|0,Ta=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),He=new Uint32Array(64);class La extends oo{constructor(t=32){super(64,t,8,!1),this.A=Ke[0]|0,this.B=Ke[1]|0,this.C=Ke[2]|0,this.D=Ke[3]|0,this.E=Ke[4]|0,this.F=Ke[5]|0,this.G=Ke[6]|0,this.H=Ke[7]|0}get(){const{A:t,B:e,C:n,D:s,E:i,F:o,G:u,H:p}=this;return[t,e,n,s,i,o,u,p]}set(t,e,n,s,i,o,u,p){this.A=t|0,this.B=e|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=u|0,this.H=p|0}process(t,e){for(let I=0;I<16;I++,e+=4)He[I]=t.getUint32(e,!1);for(let I=16;I<64;I++){const q=He[I-15],A=He[I-2],F=Ie(q,7)^Ie(q,18)^q>>>3,R=Ie(A,17)^Ie(A,19)^A>>>10;He[I]=R+He[I-7]+F+He[I-16]|0}let{A:n,B:s,C:i,D:o,E:u,F:p,G:v,H:S}=this;for(let I=0;I<64;I++){const q=Ie(u,6)^Ie(u,11)^Ie(u,25),A=S+q+xa(u,p,v)+Ta[I]+He[I]|0,R=(Ie(n,2)^Ie(n,13)^Ie(n,22))+Sa(n,s,i)|0;S=v,v=p,p=u,u=o+A|0,o=i,i=s,s=n,n=A+R|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,u=u+this.E|0,p=p+this.F|0,v=v+this.G|0,S=S+this.H|0,this.set(n,s,i,o,u,p,v,S)}roundClean(){wn(He)}destroy(){this.set(0,0,0,0,0,0,0,0),wn(this.buffer)}}const ao=Ba(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),Ca=ao[0],Ua=ao[1],We=new Uint32Array(80),$e=new Uint32Array(80);class Fa extends oo{constructor(t=64){super(128,t,16,!1),this.Ah=ce[0]|0,this.Al=ce[1]|0,this.Bh=ce[2]|0,this.Bl=ce[3]|0,this.Ch=ce[4]|0,this.Cl=ce[5]|0,this.Dh=ce[6]|0,this.Dl=ce[7]|0,this.Eh=ce[8]|0,this.El=ce[9]|0,this.Fh=ce[10]|0,this.Fl=ce[11]|0,this.Gh=ce[12]|0,this.Gl=ce[13]|0,this.Hh=ce[14]|0,this.Hl=ce[15]|0}get(){const{Ah:t,Al:e,Bh:n,Bl:s,Ch:i,Cl:o,Dh:u,Dl:p,Eh:v,El:S,Fh:I,Fl:q,Gh:A,Gl:F,Hh:R,Hl:k}=this;return[t,e,n,s,i,o,u,p,v,S,I,q,A,F,R,k]}set(t,e,n,s,i,o,u,p,v,S,I,q,A,F,R,k){this.Ah=t|0,this.Al=e|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=u|0,this.Dl=p|0,this.Eh=v|0,this.El=S|0,this.Fh=I|0,this.Fl=q|0,this.Gh=A|0,this.Gl=F|0,this.Hh=R|0,this.Hl=k|0}process(t,e){for(let j=0;j<16;j++,e+=4)We[j]=t.getUint32(e),$e[j]=t.getUint32(e+=4);for(let j=16;j<80;j++){const tt=We[j-15]|0,$=$e[j-15]|0,X=fn(tt,$,1)^fn(tt,$,8)^gs(tt,$,7),st=ln(tt,$,1)^ln(tt,$,8)^ys(tt,$,7),et=We[j-2]|0,C=$e[j-2]|0,T=fn(et,C,19)^Xn(et,C,61)^gs(et,C,6),L=ln(et,C,19)^Jn(et,C,61)^ys(et,C,6),O=Ia(st,L,$e[j-7],$e[j-16]),m=ka(O,X,T,We[j-7],We[j-16]);We[j]=m|0,$e[j]=O|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:u,Cl:p,Dh:v,Dl:S,Eh:I,El:q,Fh:A,Fl:F,Gh:R,Gl:k,Hh:W,Hl:G}=this;for(let j=0;j<80;j++){const tt=fn(I,q,14)^fn(I,q,18)^Xn(I,q,41),$=ln(I,q,14)^ln(I,q,18)^Jn(I,q,41),X=I&A^~I&R,st=q&F^~q&k,et=Ma(G,$,st,Ua[j],$e[j]),C=Ra(et,W,tt,X,Ca[j],We[j]),T=et|0,L=fn(n,s,28)^Xn(n,s,34)^Xn(n,s,39),O=ln(n,s,28)^Jn(n,s,34)^Jn(n,s,39),m=n&i^n&u^i&u,a=s&o^s&p^o&p;W=R|0,G=k|0,R=A|0,k=F|0,A=I|0,F=q|0,{h:I,l:q}=Fe(v|0,S|0,C|0,T|0),v=u|0,S=p|0,u=i|0,p=o|0,i=n|0,o=s|0;const d=_a(T,O,a);n=Aa(d,C,L,m),s=d|0}({h:n,l:s}=Fe(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=Fe(this.Bh|0,this.Bl|0,i|0,o|0),{h:u,l:p}=Fe(this.Ch|0,this.Cl|0,u|0,p|0),{h:v,l:S}=Fe(this.Dh|0,this.Dl|0,v|0,S|0),{h:I,l:q}=Fe(this.Eh|0,this.El|0,I|0,q|0),{h:A,l:F}=Fe(this.Fh|0,this.Fl|0,A|0,F|0),{h:R,l:k}=Fe(this.Gh|0,this.Gl|0,R|0,k|0),{h:W,l:G}=Fe(this.Hh|0,this.Hl|0,W|0,G|0),this.set(n,s,i,o,u,p,v,S,I,q,A,F,R,k,W,G)}roundClean(){wn(We,$e)}destroy(){wn(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const co=io(()=>new La),Na=io(()=>new Fa);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qi=BigInt(0),ki=BigInt(1);function rn(r,t){if(typeof t!="boolean")throw new Error(r+" boolean expected, got "+t)}function Qn(r){const t=r.toString(16);return t.length&1?"0"+t:t}function uo(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?qi:BigInt("0x"+r)}function Er(r){return uo(bn(r))}function Pn(r){return Me(r),uo(bn(Uint8Array.from(r).reverse()))}function Di(r,t){return Pi(r.toString(16).padStart(t*2,"0"))}function Br(r,t){return Di(r,t).reverse()}function Pt(r,t,e){let n;if(typeof t=="string")try{n=Pi(t)}catch(i){throw new Error(r+" must be hex string or Uint8Array, cause: "+i)}else if(Ni(t))n=Uint8Array.from(t);else throw new Error(r+" must be hex string or Uint8Array");const s=n.length;if(typeof e=="number"&&s!==e)throw new Error(r+" of length "+e+" expected, got "+s);return n}const ni=r=>typeof r=="bigint"&&qi<=r;function Pa(r,t,e){return ni(r)&&ni(t)&&ni(e)&&t<=r&&r<e}function pn(r,t,e,n){if(!Pa(t,e,n))throw new Error("expected valid "+r+": "+e+" <= n < "+n+", got "+t)}function Oa(r){let t;for(t=0;r>qi;r>>=ki,t+=1);return t}const _r=r=>(ki<<BigInt(r))-ki;function qa(r,t,e){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");const n=A=>new Uint8Array(A),s=A=>Uint8Array.of(A);let i=n(r),o=n(r),u=0;const p=()=>{i.fill(1),o.fill(0),u=0},v=(...A)=>e(o,i,...A),S=(A=n(0))=>{o=v(s(0),A),i=v(),A.length!==0&&(o=v(s(1),A),i=v())},I=()=>{if(u++>=1e3)throw new Error("drbg: tried 1000 values");let A=0;const F=[];for(;A<t;){i=v();const R=i.slice();F.push(R),A+=i.length}return De(...F)};return(A,F)=>{p(),S(A);let R;for(;!(R=F(I()));)S();return p(),R}}function Kn(r,t,e={}){if(!r||typeof r!="object")throw new Error("expected valid options object");function n(s,i,o){const u=r[s];if(o&&u===void 0)return;const p=typeof u;if(p!==i||u===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${p}`)}Object.entries(t).forEach(([s,i])=>n(s,i,!1)),Object.entries(e).forEach(([s,i])=>n(s,i,!0))}function cr(r){const t=new WeakMap;return(e,...n)=>{const s=t.get(e);if(s!==void 0)return s;const i=r(e,...n);return t.set(e,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const me=BigInt(0),ae=BigInt(1),Qe=BigInt(2),Da=BigInt(3),fo=BigInt(4),lo=BigInt(5),ho=BigInt(8);function Ot(r,t){const e=r%t;return e>=me?e:t+e}function Ft(r,t,e){let n=r;for(;t-- >me;)n*=n,n%=e;return n}function ms(r,t){if(r===me)throw new Error("invert: expected non-zero number");if(t<=me)throw new Error("invert: expected positive modulus, got "+t);let e=Ot(r,t),n=t,s=me,i=ae;for(;e!==me;){const u=n/e,p=n%e,v=s-i*u;n=e,e=p,s=i,i=v}if(n!==ae)throw new Error("invert: does not exist");return Ot(s,t)}function po(r,t){const e=(r.ORDER+ae)/fo,n=r.pow(t,e);if(!r.eql(r.sqr(n),t))throw new Error("Cannot find square root");return n}function za(r,t){const e=(r.ORDER-lo)/ho,n=r.mul(t,Qe),s=r.pow(n,e),i=r.mul(t,s),o=r.mul(r.mul(i,Qe),s),u=r.mul(i,r.sub(o,r.ONE));if(!r.eql(r.sqr(u),t))throw new Error("Cannot find square root");return u}function Ka(r){if(r<BigInt(3))throw new Error("sqrt is not defined for small field");let t=r-ae,e=0;for(;t%Qe===me;)t/=Qe,e++;let n=Qe;const s=An(r);for(;ws(s,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(e===1)return po;let i=s.pow(n,t);const o=(t+ae)/Qe;return function(p,v){if(p.is0(v))return v;if(ws(p,v)!==1)throw new Error("Cannot find square root");let S=e,I=p.mul(p.ONE,i),q=p.pow(v,t),A=p.pow(v,o);for(;!p.eql(q,p.ONE);){if(p.is0(q))return p.ZERO;let F=1,R=p.sqr(q);for(;!p.eql(R,p.ONE);)if(F++,R=p.sqr(R),F===S)throw new Error("Cannot find square root");const k=ae<<BigInt(S-F-1),W=p.pow(I,k);S=F,I=p.sqr(W),q=p.mul(q,I),A=p.mul(A,W)}return A}}function Ha(r){return r%fo===Da?po:r%ho===lo?za:Ka(r)}const Wa=(r,t)=>(Ot(r,t)&ae)===ae,$a=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Va(r){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},e=$a.reduce((n,s)=>(n[s]="function",n),t);return Kn(r,e),r}function Ga(r,t,e){if(e<me)throw new Error("invalid exponent, negatives unsupported");if(e===me)return r.ONE;if(e===ae)return t;let n=r.ONE,s=t;for(;e>me;)e&ae&&(n=r.mul(n,s)),s=r.sqr(s),e>>=ae;return n}function go(r,t,e=!1){const n=new Array(t.length).fill(e?r.ZERO:void 0),s=t.reduce((o,u,p)=>r.is0(u)?o:(n[p]=o,r.mul(o,u)),r.ONE),i=r.inv(s);return t.reduceRight((o,u,p)=>r.is0(u)?o:(n[p]=r.mul(o,n[p]),r.mul(o,u)),i),n}function ws(r,t){const e=(r.ORDER-ae)/Qe,n=r.pow(t,e),s=r.eql(n,r.ONE),i=r.eql(n,r.ZERO),o=r.eql(n,r.neg(r.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function ja(r,t){t!==void 0&&Ii(t);const e=t!==void 0?t:r.toString(2).length,n=Math.ceil(e/8);return{nBitLength:e,nByteLength:n}}function An(r,t,e=!1,n={}){if(r<=me)throw new Error("invalid field: expected ORDER > 0, got "+r);let s,i;if(typeof t=="object"&&t!=null){if(n.sqrt||e)throw new Error("cannot specify opts in two arguments");const S=t;S.BITS&&(s=S.BITS),S.sqrt&&(i=S.sqrt),typeof S.isLE=="boolean"&&(e=S.isLE)}else typeof t=="number"&&(s=t),n.sqrt&&(i=n.sqrt);const{nBitLength:o,nByteLength:u}=ja(r,s);if(u>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let p;const v=Object.freeze({ORDER:r,isLE:e,BITS:o,BYTES:u,MASK:_r(o),ZERO:me,ONE:ae,create:S=>Ot(S,r),isValid:S=>{if(typeof S!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof S);return me<=S&&S<r},is0:S=>S===me,isValidNot0:S=>!v.is0(S)&&v.isValid(S),isOdd:S=>(S&ae)===ae,neg:S=>Ot(-S,r),eql:(S,I)=>S===I,sqr:S=>Ot(S*S,r),add:(S,I)=>Ot(S+I,r),sub:(S,I)=>Ot(S-I,r),mul:(S,I)=>Ot(S*I,r),pow:(S,I)=>Ga(v,S,I),div:(S,I)=>Ot(S*ms(I,r),r),sqrN:S=>S*S,addN:(S,I)=>S+I,subN:(S,I)=>S-I,mulN:(S,I)=>S*I,inv:S=>ms(S,r),sqrt:i||(S=>(p||(p=Ha(r)),p(v,S))),toBytes:S=>e?Br(S,u):Di(S,u),fromBytes:S=>{if(S.length!==u)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+S.length);return e?Pn(S):Er(S)},invertBatch:S=>go(v,S),cmov:(S,I,q)=>q?I:S});return Object.freeze(v)}function yo(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const t=r.toString(2).length;return Math.ceil(t/8)}function mo(r){const t=yo(r);return t+Math.ceil(t/2)}function Za(r,t,e=!1){const n=r.length,s=yo(t),i=mo(t);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const o=e?Pn(r):Er(r),u=Ot(o,t-ae)+ae;return e?Br(u,s):Di(u,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vn=BigInt(0),tn=BigInt(1);function Cn(r,t){const e=t.negate();return r?e:t}function wo(r,t,e){const n=t==="pz"?o=>o.pz:o=>o.ez,s=go(r.Fp,e.map(n));return e.map((o,u)=>o.toAffine(s[u])).map(r.fromAffine)}function bo(r,t){if(!Number.isSafeInteger(r)||r<=0||r>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+r)}function ri(r,t){bo(r,t);const e=Math.ceil(t/r)+1,n=2**(r-1),s=2**r,i=_r(r),o=BigInt(r);return{windows:e,windowSize:n,mask:i,maxNumber:s,shiftBy:o}}function bs(r,t,e){const{windowSize:n,mask:s,maxNumber:i,shiftBy:o}=e;let u=Number(r&s),p=r>>o;u>n&&(u-=i,p+=tn);const v=t*n,S=v+Math.abs(u)-1,I=u===0,q=u<0,A=t%2!==0;return{nextN:p,offset:S,isZero:I,isNeg:q,isNegF:A,offsetF:v}}function Ya(r,t){if(!Array.isArray(r))throw new Error("array expected");r.forEach((e,n)=>{if(!(e instanceof t))throw new Error("invalid point at index "+n)})}function Xa(r,t){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((e,n)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+n)})}const ii=new WeakMap,vo=new WeakMap;function si(r){return vo.get(r)||1}function vs(r){if(r!==vn)throw new Error("invalid wNAF")}function xo(r,t){return{constTimeNegate:Cn,hasPrecomputes(e){return si(e)!==1},unsafeLadder(e,n,s=r.ZERO){let i=e;for(;n>vn;)n&tn&&(s=s.add(i)),i=i.double(),n>>=tn;return s},precomputeWindow(e,n){const{windows:s,windowSize:i}=ri(n,t),o=[];let u=e,p=u;for(let v=0;v<s;v++){p=u,o.push(p);for(let S=1;S<i;S++)p=p.add(u),o.push(p);u=p.double()}return o},wNAF(e,n,s){let i=r.ZERO,o=r.BASE;const u=ri(e,t);for(let p=0;p<u.windows;p++){const{nextN:v,offset:S,isZero:I,isNeg:q,isNegF:A,offsetF:F}=bs(s,p,u);s=v,I?o=o.add(Cn(A,n[F])):i=i.add(Cn(q,n[S]))}return vs(s),{p:i,f:o}},wNAFUnsafe(e,n,s,i=r.ZERO){const o=ri(e,t);for(let u=0;u<o.windows&&s!==vn;u++){const{nextN:p,offset:v,isZero:S,isNeg:I}=bs(s,u,o);if(s=p,!S){const q=n[v];i=i.add(I?q.negate():q)}}return vs(s),i},getPrecomputes(e,n,s){let i=ii.get(n);return i||(i=this.precomputeWindow(n,e),e!==1&&(typeof s=="function"&&(i=s(i)),ii.set(n,i))),i},wNAFCached(e,n,s){const i=si(e);return this.wNAF(i,this.getPrecomputes(i,e,s),n)},wNAFCachedUnsafe(e,n,s,i){const o=si(e);return o===1?this.unsafeLadder(e,n,i):this.wNAFUnsafe(o,this.getPrecomputes(o,e,s),n,i)},setWindowSize(e,n){bo(n,t),vo.set(e,n),ii.delete(e)}}}function Ja(r,t,e,n){let s=t,i=r.ZERO,o=r.ZERO;for(;e>vn||n>vn;)e&tn&&(i=i.add(s)),n&tn&&(o=o.add(s)),s=s.double(),e>>=tn,n>>=tn;return{p1:i,p2:o}}function So(r,t,e,n){Ya(e,r),Xa(n,t);const s=e.length,i=n.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=r.ZERO,u=Oa(BigInt(s));let p=1;u>12?p=u-3:u>4?p=u-2:u>0&&(p=2);const v=_r(p),S=new Array(Number(v)+1).fill(o),I=Math.floor((t.BITS-1)/p)*p;let q=o;for(let A=I;A>=0;A-=p){S.fill(o);for(let R=0;R<i;R++){const k=n[R],W=Number(k>>BigInt(A)&v);S[W]=S[W].add(e[R])}let F=o;for(let R=S.length-1,k=o;R>0;R--)k=k.add(S[R]),F=F.add(k);if(q=q.add(F),A!==0)for(let R=0;R<p;R++)q=q.double()}return q}function xs(r,t){if(t){if(t.ORDER!==r)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Va(t),t}else return An(r)}function Eo(r,t,e={}){if(!t||typeof t!="object")throw new Error(`expected valid ${r} CURVE object`);for(const u of["p","n","h"]){const p=t[u];if(!(typeof p=="bigint"&&p>vn))throw new Error(`CURVE.${u} must be positive bigint`)}const n=xs(t.p,e.Fp),s=xs(t.n,e.Fn),o=["Gx","Gy","a",r==="weierstrass"?"b":"d"];for(const u of o)if(!n.isValid(t[u]))throw new Error(`CURVE.${u} must be valid field element of CURVE.Fp`);return{Fp:n,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ke=BigInt(0),de=BigInt(1),oi=BigInt(2),Qa=BigInt(8),tc={zip215:!0};function ec(r,t,e,n){const s=r.sqr(e),i=r.sqr(n),o=r.add(r.mul(t.a,s),i),u=r.add(r.ONE,r.mul(t.d,r.mul(s,i)));return r.eql(o,u)}function nc(r,t={}){const{Fp:e,Fn:n}=Eo("edwards",r,t),{h:s,n:i}=r;Kn(t,{},{uvRatio:"function"});const o=oi<<BigInt(n.BYTES*8)-de,u=R=>e.create(R),p=t.uvRatio||((R,k)=>{try{return{isValid:!0,value:e.sqrt(e.div(R,k))}}catch{return{isValid:!1,value:ke}}});if(!ec(e,r,r.Gx,r.Gy))throw new Error("bad curve params: generator point");function v(R,k,W=!1){const G=W?de:ke;return pn("coordinate "+R,k,G,o),k}function S(R){if(!(R instanceof A))throw new Error("ExtendedPoint expected")}const I=cr((R,k)=>{const{ex:W,ey:G,ez:j}=R,tt=R.is0();k==null&&(k=tt?Qa:e.inv(j));const $=u(W*k),X=u(G*k),st=u(j*k);if(tt)return{x:ke,y:de};if(st!==de)throw new Error("invZ was invalid");return{x:$,y:X}}),q=cr(R=>{const{a:k,d:W}=r;if(R.is0())throw new Error("bad point: ZERO");const{ex:G,ey:j,ez:tt,et:$}=R,X=u(G*G),st=u(j*j),et=u(tt*tt),C=u(et*et),T=u(X*k),L=u(et*u(T+st)),O=u(C+u(W*u(X*st)));if(L!==O)throw new Error("bad point: equation left != right (1)");const m=u(G*j),a=u(tt*$);if(m!==a)throw new Error("bad point: equation left != right (2)");return!0});class A{constructor(k,W,G,j){this.ex=v("x",k),this.ey=v("y",W),this.ez=v("z",G,!0),this.et=v("t",j),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(k){if(k instanceof A)throw new Error("extended point not allowed");const{x:W,y:G}=k||{};return v("x",W),v("y",G),new A(W,G,de,u(W*G))}static normalizeZ(k){return wo(A,"ez",k)}static msm(k,W){return So(A,n,k,W)}_setWindowSize(k){this.precompute(k)}precompute(k=8,W=!0){return F.setWindowSize(this,k),W||this.multiply(oi),this}assertValidity(){q(this)}equals(k){S(k);const{ex:W,ey:G,ez:j}=this,{ex:tt,ey:$,ez:X}=k,st=u(W*X),et=u(tt*j),C=u(G*X),T=u($*j);return st===et&&C===T}is0(){return this.equals(A.ZERO)}negate(){return new A(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:k}=r,{ex:W,ey:G,ez:j}=this,tt=u(W*W),$=u(G*G),X=u(oi*u(j*j)),st=u(k*tt),et=W+G,C=u(u(et*et)-tt-$),T=st+$,L=T-X,O=st-$,m=u(C*L),a=u(T*O),d=u(C*O),g=u(L*T);return new A(m,a,g,d)}add(k){S(k);const{a:W,d:G}=r,{ex:j,ey:tt,ez:$,et:X}=this,{ex:st,ey:et,ez:C,et:T}=k,L=u(j*st),O=u(tt*et),m=u(X*G*T),a=u($*C),d=u((j+tt)*(st+et)-L-O),g=a-m,x=a+m,B=u(O-W*L),U=u(d*g),P=u(x*B),b=u(d*B),c=u(g*x);return new A(U,P,c,b)}subtract(k){return this.add(k.negate())}multiply(k){const W=k;pn("scalar",W,de,i);const{p:G,f:j}=F.wNAFCached(this,W,A.normalizeZ);return A.normalizeZ([G,j])[0]}multiplyUnsafe(k,W=A.ZERO){const G=k;return pn("scalar",G,ke,i),G===ke?A.ZERO:this.is0()||G===de?this:F.wNAFCachedUnsafe(this,G,A.normalizeZ,W)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}isTorsionFree(){return F.wNAFCachedUnsafe(this,i).is0()}toAffine(k){return I(this,k)}clearCofactor(){return s===de?this:this.multiplyUnsafe(s)}static fromBytes(k,W=!1){return Me(k),this.fromHex(k,W)}static fromHex(k,W=!1){const{d:G,a:j}=r,tt=e.BYTES;k=Pt("pointHex",k,tt),rn("zip215",W);const $=k.slice(),X=k[tt-1];$[tt-1]=X&-129;const st=Pn($),et=W?o:e.ORDER;pn("pointHex.y",st,ke,et);const C=u(st*st),T=u(C-de),L=u(G*C-j);let{isValid:O,value:m}=p(T,L);if(!O)throw new Error("Point.fromHex: invalid y coordinate");const a=(m&de)===de,d=(X&128)!==0;if(!W&&m===ke&&d)throw new Error("Point.fromHex: x=0 and x_0=1");return d!==a&&(m=u(-m)),A.fromAffine({x:m,y:st})}static fromPrivateScalar(k){return A.BASE.multiply(k)}toBytes(){const{x:k,y:W}=this.toAffine(),G=Br(W,e.BYTES);return G[G.length-1]|=k&de?128:0,G}toRawBytes(){return this.toBytes()}toHex(){return bn(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}A.BASE=new A(r.Gx,r.Gy,de,u(r.Gx*r.Gy)),A.ZERO=new A(ke,de,de,ke),A.Fp=e,A.Fn=n;const F=xo(A,n.BYTES*8);return A}function rc(r,t){Kn(t,{hash:"function"},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:e,hash:n}=t,{BASE:s,Fp:i,Fn:o}=r,u=o.ORDER,p=t.randomBytes||so,v=t.adjustScalarBytes||($=>$),S=t.domain||(($,X,st)=>{if(rn("phflag",st),X.length||st)throw new Error("Contexts/pre-hash are not supported");return $});function I($){return o.create($)}function q($){return I(Pn($))}function A($){const X=i.BYTES;$=Pt("private key",$,X);const st=Pt("hashed private key",n($),2*X),et=v(st.slice(0,X)),C=st.slice(X,2*X),T=q(et);return{head:et,prefix:C,scalar:T}}function F($){const{head:X,prefix:st,scalar:et}=A($),C=s.multiply(et),T=C.toBytes();return{head:X,prefix:st,scalar:et,point:C,pointBytes:T}}function R($){return F($).pointBytes}function k($=Uint8Array.of(),...X){const st=De(...X);return q(n(S(st,Pt("context",$),!!e)))}function W($,X,st={}){$=Pt("message",$),e&&($=e($));const{prefix:et,scalar:C,pointBytes:T}=F(X),L=k(st.context,et,$),O=s.multiply(L).toBytes(),m=k(st.context,O,T,$),a=I(L+m*C);pn("signature.s",a,ke,u);const d=i.BYTES,g=De(O,Br(a,d));return Pt("result",g,d*2)}const G=tc;function j($,X,st,et=G){const{context:C,zip215:T}=et,L=i.BYTES;$=Pt("signature",$,2*L),X=Pt("message",X),st=Pt("publicKey",st,L),T!==void 0&&rn("zip215",T),e&&(X=e(X));const O=Pn($.slice(L,2*L));let m,a,d;try{m=r.fromHex(st,T),a=r.fromHex($.slice(0,L),T),d=s.multiplyUnsafe(O)}catch{return!1}if(!T&&m.isSmallOrder())return!1;const g=k(C,a.toBytes(),m.toBytes(),X);return a.add(m.multiplyUnsafe(g)).subtract(d).clearCofactor().is0()}return s.precompute(8),{getPublicKey:R,sign:W,verify:j,utils:{getExtendedPublicKey:F,randomPrivateKey:()=>p(i.BYTES),precompute($=8,X=r.BASE){return X.precompute($,!1)}},Point:r}}function ic(r){const t={a:r.a,d:r.d,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},e=r.Fp,n=An(t.n,r.nBitLength,!0),s={Fp:e,Fn:n,uvRatio:r.uvRatio},i={hash:r.hash,randomBytes:r.randomBytes,adjustScalarBytes:r.adjustScalarBytes,domain:r.domain,prehash:r.prehash,mapToCurve:r.mapToCurve};return{CURVE:t,curveOpts:s,eddsaOpts:i}}function sc(r,t){return Object.assign({},t,{ExtendedPoint:t.Point,CURVE:r})}function oc(r){const{CURVE:t,curveOpts:e,eddsaOpts:n}=ic(r),s=nc(t,e),i=rc(s,n);return sc(r,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0);const ac=BigInt(1),Ss=BigInt(2);BigInt(3);const cc=BigInt(5),uc=BigInt(8),Ar={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:uc,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function fc(r){const t=BigInt(10),e=BigInt(20),n=BigInt(40),s=BigInt(80),i=Ar.p,u=r*r%i*r%i,p=Ft(u,Ss,i)*u%i,v=Ft(p,ac,i)*r%i,S=Ft(v,cc,i)*v%i,I=Ft(S,t,i)*S%i,q=Ft(I,e,i)*I%i,A=Ft(q,n,i)*q%i,F=Ft(A,s,i)*A%i,R=Ft(F,s,i)*A%i,k=Ft(R,t,i)*S%i;return{pow_p_5_8:Ft(k,Ss,i)*r%i,b2:u}}function lc(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}const Es=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function hc(r,t){const e=Ar.p,n=Ot(t*t*t,e),s=Ot(n*n*t,e),i=fc(r*s).pow_p_5_8;let o=Ot(r*n*i,e);const u=Ot(t*o*o,e),p=o,v=Ot(o*Es,e),S=u===r,I=u===Ot(-r,e),q=u===Ot(-r*Es,e);return S&&(o=p),(I||q)&&(o=v),Wa(o,e)&&(o=Ot(-o,e)),{isValid:S||I,value:o}}const dc=An(Ar.p,void 0,!0),pc={...Ar,Fp:dc,hash:Na,adjustScalarBytes:lc,uvRatio:hc},Hn=oc(pc);var sr={exports:{}};const gc={},yc=Object.freeze(Object.defineProperty({__proto__:null,default:gc},Symbol.toStringTag,{value:"Module"})),mc=Ui(yc);var wc=sr.exports,Bs;function Bo(){return Bs||(Bs=1,function(r){(function(t,e){function n(m,a){if(!m)throw new Error(a||"Assertion failed")}function s(m,a){m.super_=a;var d=function(){};d.prototype=a.prototype,m.prototype=new d,m.prototype.constructor=m}function i(m,a,d){if(i.isBN(m))return m;this.negative=0,this.words=null,this.length=0,this.red=null,m!==null&&((a==="le"||a==="be")&&(d=a,a=10),this._init(m||0,a||10,d||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=mc.Buffer}catch{}i.isBN=function(a){return a instanceof i?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===i.wordSize&&Array.isArray(a.words)},i.max=function(a,d){return a.cmp(d)>0?a:d},i.min=function(a,d){return a.cmp(d)<0?a:d},i.prototype._init=function(a,d,g){if(typeof a=="number")return this._initNumber(a,d,g);if(typeof a=="object")return this._initArray(a,d,g);d==="hex"&&(d=16),n(d===(d|0)&&d>=2&&d<=36),a=a.toString().replace(/\s+/g,"");var x=0;a[0]==="-"&&(x++,this.negative=1),x<a.length&&(d===16?this._parseHex(a,x,g):(this._parseBase(a,d,x),g==="le"&&this._initArray(this.toArray(),d,g)))},i.prototype._initNumber=function(a,d,g){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(n(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),d,g)},i.prototype._initArray=function(a,d,g){if(n(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var B,U,P=0;if(g==="be")for(x=a.length-1,B=0;x>=0;x-=3)U=a[x]|a[x-1]<<8|a[x-2]<<16,this.words[B]|=U<<P&67108863,this.words[B+1]=U>>>26-P&67108863,P+=24,P>=26&&(P-=26,B++);else if(g==="le")for(x=0,B=0;x<a.length;x+=3)U=a[x]|a[x+1]<<8|a[x+2]<<16,this.words[B]|=U<<P&67108863,this.words[B+1]=U>>>26-P&67108863,P+=24,P>=26&&(P-=26,B++);return this._strip()};function u(m,a){var d=m.charCodeAt(a);if(d>=48&&d<=57)return d-48;if(d>=65&&d<=70)return d-55;if(d>=97&&d<=102)return d-87;n(!1,"Invalid character in "+m)}function p(m,a,d){var g=u(m,d);return d-1>=a&&(g|=u(m,d-1)<<4),g}i.prototype._parseHex=function(a,d,g){this.length=Math.ceil((a.length-d)/6),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var B=0,U=0,P;if(g==="be")for(x=a.length-1;x>=d;x-=2)P=p(a,d,x)<<B,this.words[U]|=P&67108863,B>=18?(B-=18,U+=1,this.words[U]|=P>>>26):B+=8;else{var b=a.length-d;for(x=b%2===0?d+1:d;x<a.length;x+=2)P=p(a,d,x)<<B,this.words[U]|=P&67108863,B>=18?(B-=18,U+=1,this.words[U]|=P>>>26):B+=8}this._strip()};function v(m,a,d,g){for(var x=0,B=0,U=Math.min(m.length,d),P=a;P<U;P++){var b=m.charCodeAt(P)-48;x*=g,b>=49?B=b-49+10:b>=17?B=b-17+10:B=b,n(b>=0&&B<g,"Invalid character"),x+=B}return x}i.prototype._parseBase=function(a,d,g){this.words=[0],this.length=1;for(var x=0,B=1;B<=67108863;B*=d)x++;x--,B=B/d|0;for(var U=a.length-g,P=U%x,b=Math.min(U,U-P)+g,c=0,f=g;f<b;f+=x)c=v(a,f,f+x,d),this.imuln(B),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(P!==0){var w=1;for(c=v(a,f,a.length,d),f=0;f<P;f++)w*=d;this.imuln(w),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},i.prototype.copy=function(a){a.words=new Array(this.length);for(var d=0;d<this.length;d++)a.words[d]=this.words[d];a.length=this.length,a.negative=this.negative,a.red=this.red};function S(m,a){m.words=a.words,m.length=a.length,m.negative=a.negative,m.red=a.red}if(i.prototype._move=function(a){S(a,this)},i.prototype.clone=function(){var a=new i(null);return this.copy(a),a},i.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=I}catch{i.prototype.inspect=I}else i.prototype.inspect=I;function I(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var q=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],A=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],F=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(a,d){a=a||10,d=d|0||1;var g;if(a===16||a==="hex"){g="";for(var x=0,B=0,U=0;U<this.length;U++){var P=this.words[U],b=((P<<x|B)&16777215).toString(16);B=P>>>24-x&16777215,x+=2,x>=26&&(x-=26,U--),B!==0||U!==this.length-1?g=q[6-b.length]+b+g:g=b+g}for(B!==0&&(g=B.toString(16)+g);g.length%d!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(a===(a|0)&&a>=2&&a<=36){var c=A[a],f=F[a];g="";var w=this.clone();for(w.negative=0;!w.isZero();){var _=w.modrn(f).toString(a);w=w.idivn(f),w.isZero()?g=_+g:g=q[c-_.length]+_+g}for(this.isZero()&&(g="0"+g);g.length%d!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(a,d){return this.toArrayLike(o,a,d)}),i.prototype.toArray=function(a,d){return this.toArrayLike(Array,a,d)};var R=function(a,d){return a.allocUnsafe?a.allocUnsafe(d):new a(d)};i.prototype.toArrayLike=function(a,d,g){this._strip();var x=this.byteLength(),B=g||Math.max(1,x);n(x<=B,"byte array longer than desired length"),n(B>0,"Requested array length <= 0");var U=R(a,B),P=d==="le"?"LE":"BE";return this["_toArrayLike"+P](U,x),U},i.prototype._toArrayLikeLE=function(a,d){for(var g=0,x=0,B=0,U=0;B<this.length;B++){var P=this.words[B]<<U|x;a[g++]=P&255,g<a.length&&(a[g++]=P>>8&255),g<a.length&&(a[g++]=P>>16&255),U===6?(g<a.length&&(a[g++]=P>>24&255),x=0,U=0):(x=P>>>24,U+=2)}if(g<a.length)for(a[g++]=x;g<a.length;)a[g++]=0},i.prototype._toArrayLikeBE=function(a,d){for(var g=a.length-1,x=0,B=0,U=0;B<this.length;B++){var P=this.words[B]<<U|x;a[g--]=P&255,g>=0&&(a[g--]=P>>8&255),g>=0&&(a[g--]=P>>16&255),U===6?(g>=0&&(a[g--]=P>>24&255),x=0,U=0):(x=P>>>24,U+=2)}if(g>=0)for(a[g--]=x;g>=0;)a[g--]=0},Math.clz32?i.prototype._countBits=function(a){return 32-Math.clz32(a)}:i.prototype._countBits=function(a){var d=a,g=0;return d>=4096&&(g+=13,d>>>=13),d>=64&&(g+=7,d>>>=7),d>=8&&(g+=4,d>>>=4),d>=2&&(g+=2,d>>>=2),g+d},i.prototype._zeroBits=function(a){if(a===0)return 26;var d=a,g=0;return(d&8191)===0&&(g+=13,d>>>=13),(d&127)===0&&(g+=7,d>>>=7),(d&15)===0&&(g+=4,d>>>=4),(d&3)===0&&(g+=2,d>>>=2),(d&1)===0&&g++,g},i.prototype.bitLength=function(){var a=this.words[this.length-1],d=this._countBits(a);return(this.length-1)*26+d};function k(m){for(var a=new Array(m.bitLength()),d=0;d<a.length;d++){var g=d/26|0,x=d%26;a[d]=m.words[g]>>>x&1}return a}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,d=0;d<this.length;d++){var g=this._zeroBits(this.words[d]);if(a+=g,g!==26)break}return a},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},i.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var d=0;d<a.length;d++)this.words[d]=this.words[d]|a.words[d];return this._strip()},i.prototype.ior=function(a){return n((this.negative|a.negative)===0),this.iuor(a)},i.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},i.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},i.prototype.iuand=function(a){var d;this.length>a.length?d=a:d=this;for(var g=0;g<d.length;g++)this.words[g]=this.words[g]&a.words[g];return this.length=d.length,this._strip()},i.prototype.iand=function(a){return n((this.negative|a.negative)===0),this.iuand(a)},i.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},i.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},i.prototype.iuxor=function(a){var d,g;this.length>a.length?(d=this,g=a):(d=a,g=this);for(var x=0;x<g.length;x++)this.words[x]=d.words[x]^g.words[x];if(this!==d)for(;x<d.length;x++)this.words[x]=d.words[x];return this.length=d.length,this._strip()},i.prototype.ixor=function(a){return n((this.negative|a.negative)===0),this.iuxor(a)},i.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},i.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},i.prototype.inotn=function(a){n(typeof a=="number"&&a>=0);var d=Math.ceil(a/26)|0,g=a%26;this._expand(d),g>0&&d--;for(var x=0;x<d;x++)this.words[x]=~this.words[x]&67108863;return g>0&&(this.words[x]=~this.words[x]&67108863>>26-g),this._strip()},i.prototype.notn=function(a){return this.clone().inotn(a)},i.prototype.setn=function(a,d){n(typeof a=="number"&&a>=0);var g=a/26|0,x=a%26;return this._expand(g+1),d?this.words[g]=this.words[g]|1<<x:this.words[g]=this.words[g]&~(1<<x),this._strip()},i.prototype.iadd=function(a){var d;if(this.negative!==0&&a.negative===0)return this.negative=0,d=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,d=this.isub(a),a.negative=1,d._normSign();var g,x;this.length>a.length?(g=this,x=a):(g=a,x=this);for(var B=0,U=0;U<x.length;U++)d=(g.words[U]|0)+(x.words[U]|0)+B,this.words[U]=d&67108863,B=d>>>26;for(;B!==0&&U<g.length;U++)d=(g.words[U]|0)+B,this.words[U]=d&67108863,B=d>>>26;if(this.length=g.length,B!==0)this.words[this.length]=B,this.length++;else if(g!==this)for(;U<g.length;U++)this.words[U]=g.words[U];return this},i.prototype.add=function(a){var d;return a.negative!==0&&this.negative===0?(a.negative=0,d=this.sub(a),a.negative^=1,d):a.negative===0&&this.negative!==0?(this.negative=0,d=a.sub(this),this.negative=1,d):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},i.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var d=this.iadd(a);return a.negative=1,d._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var g=this.cmp(a);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var x,B;g>0?(x=this,B=a):(x=a,B=this);for(var U=0,P=0;P<B.length;P++)d=(x.words[P]|0)-(B.words[P]|0)+U,U=d>>26,this.words[P]=d&67108863;for(;U!==0&&P<x.length;P++)d=(x.words[P]|0)+U,U=d>>26,this.words[P]=d&67108863;if(U===0&&P<x.length&&x!==this)for(;P<x.length;P++)this.words[P]=x.words[P];return this.length=Math.max(this.length,P),x!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(a){return this.clone().isub(a)};function W(m,a,d){d.negative=a.negative^m.negative;var g=m.length+a.length|0;d.length=g,g=g-1|0;var x=m.words[0]|0,B=a.words[0]|0,U=x*B,P=U&67108863,b=U/67108864|0;d.words[0]=P;for(var c=1;c<g;c++){for(var f=b>>>26,w=b&67108863,_=Math.min(c,a.length-1),D=Math.max(0,c-m.length+1);D<=_;D++){var Z=c-D|0;x=m.words[Z]|0,B=a.words[D]|0,U=x*B+w,f+=U/67108864|0,w=U&67108863}d.words[c]=w|0,b=f|0}return b!==0?d.words[c]=b|0:d.length--,d._strip()}var G=function(a,d,g){var x=a.words,B=d.words,U=g.words,P=0,b,c,f,w=x[0]|0,_=w&8191,D=w>>>13,Z=x[1]|0,it=Z&8191,ct=Z>>>13,re=x[2]|0,mt=re&8191,It=re>>>13,Ce=x[3]|0,vt=Ce&8191,Tt=Ce>>>13,Gn=x[4]|0,_t=Gn&8191,Lt=Gn>>>13,jn=x[5]|0,kt=jn&8191,Et=jn>>>13,we=x[6]|0,At=we&8191,Ct=we>>>13,Be=x[7]|0,Ut=Be&8191,y=Be>>>13,l=x[8]|0,h=l&8191,E=l>>>13,N=x[9]|0,z=N&8191,V=N>>>13,pt=B[0]|0,dt=pt&8191,ht=pt>>>13,Bt=B[1]|0,ft=Bt&8191,qt=Bt>>>13,ns=B[2]|0,Dt=ns&8191,zt=ns>>>13,rs=B[3]|0,Kt=rs&8191,Ht=rs>>>13,is=B[4]|0,Wt=is&8191,$t=is>>>13,ss=B[5]|0,Vt=ss&8191,Gt=ss>>>13,os=B[6]|0,jt=os&8191,Zt=os>>>13,as=B[7]|0,Yt=as&8191,Xt=as>>>13,cs=B[8]|0,Jt=cs&8191,Qt=cs>>>13,us=B[9]|0,te=us&8191,ee=us>>>13;g.negative=a.negative^d.negative,g.length=19,b=Math.imul(_,dt),c=Math.imul(_,ht),c=c+Math.imul(D,dt)|0,f=Math.imul(D,ht);var Fr=(P+b|0)+((c&8191)<<13)|0;P=(f+(c>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,b=Math.imul(it,dt),c=Math.imul(it,ht),c=c+Math.imul(ct,dt)|0,f=Math.imul(ct,ht),b=b+Math.imul(_,ft)|0,c=c+Math.imul(_,qt)|0,c=c+Math.imul(D,ft)|0,f=f+Math.imul(D,qt)|0;var Nr=(P+b|0)+((c&8191)<<13)|0;P=(f+(c>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,b=Math.imul(mt,dt),c=Math.imul(mt,ht),c=c+Math.imul(It,dt)|0,f=Math.imul(It,ht),b=b+Math.imul(it,ft)|0,c=c+Math.imul(it,qt)|0,c=c+Math.imul(ct,ft)|0,f=f+Math.imul(ct,qt)|0,b=b+Math.imul(_,Dt)|0,c=c+Math.imul(_,zt)|0,c=c+Math.imul(D,Dt)|0,f=f+Math.imul(D,zt)|0;var Pr=(P+b|0)+((c&8191)<<13)|0;P=(f+(c>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,b=Math.imul(vt,dt),c=Math.imul(vt,ht),c=c+Math.imul(Tt,dt)|0,f=Math.imul(Tt,ht),b=b+Math.imul(mt,ft)|0,c=c+Math.imul(mt,qt)|0,c=c+Math.imul(It,ft)|0,f=f+Math.imul(It,qt)|0,b=b+Math.imul(it,Dt)|0,c=c+Math.imul(it,zt)|0,c=c+Math.imul(ct,Dt)|0,f=f+Math.imul(ct,zt)|0,b=b+Math.imul(_,Kt)|0,c=c+Math.imul(_,Ht)|0,c=c+Math.imul(D,Kt)|0,f=f+Math.imul(D,Ht)|0;var Or=(P+b|0)+((c&8191)<<13)|0;P=(f+(c>>>13)|0)+(Or>>>26)|0,Or&=67108863,b=Math.imul(_t,dt),c=Math.imul(_t,ht),c=c+Math.imul(Lt,dt)|0,f=Math.imul(Lt,ht),b=b+Math.imul(vt,ft)|0,c=c+Math.imul(vt,qt)|0,c=c+Math.imul(Tt,ft)|0,f=f+Math.imul(Tt,qt)|0,b=b+Math.imul(mt,Dt)|0,c=c+Math.imul(mt,zt)|0,c=c+Math.imul(It,Dt)|0,f=f+Math.imul(It,zt)|0,b=b+Math.imul(it,Kt)|0,c=c+Math.imul(it,Ht)|0,c=c+Math.imul(ct,Kt)|0,f=f+Math.imul(ct,Ht)|0,b=b+Math.imul(_,Wt)|0,c=c+Math.imul(_,$t)|0,c=c+Math.imul(D,Wt)|0,f=f+Math.imul(D,$t)|0;var qr=(P+b|0)+((c&8191)<<13)|0;P=(f+(c>>>13)|0)+(qr>>>26)|0,qr&=67108863,b=Math.imul(kt,dt),c=Math.imul(kt,ht),c=c+Math.imul(Et,dt)|0,f=Math.imul(Et,ht),b=b+Math.imul(_t,ft)|0,c=c+Math.imul(_t,qt)|0,c=c+Math.imul(Lt,ft)|0,f=f+Math.imul(Lt,qt)|0,b=b+Math.imul(vt,Dt)|0,c=c+Math.imul(vt,zt)|0,c=c+Math.imul(Tt,Dt)|0,f=f+Math.imul(Tt,zt)|0,b=b+Math.imul(mt,Kt)|0,c=c+Math.imul(mt,Ht)|0,c=c+Math.imul(It,Kt)|0,f=f+Math.imul(It,Ht)|0,b=b+Math.imul(it,Wt)|0,c=c+Math.imul(it,$t)|0,c=c+Math.imul(ct,Wt)|0,f=f+Math.imul(ct,$t)|0,b=b+Math.imul(_,Vt)|0,c=c+Math.imul(_,Gt)|0,c=c+Math.imul(D,Vt)|0,f=f+Math.imul(D,Gt)|0;var Dr=(P+b|0)+((c&8191)<<13)|0;P=(f+(c>>>13)|0)+(Dr>>>26)|0,Dr&=67108863,b=Math.imul(At,dt),c=Math.imul(At,ht),c=c+Math.imul(Ct,dt)|0,f=Math.imul(Ct,ht),b=b+Math.imul(kt,ft)|0,c=c+Math.imul(kt,qt)|0,c=c+Math.imul(Et,ft)|0,f=f+Math.imul(Et,qt)|0,b=b+Math.imul(_t,Dt)|0,c=c+Math.imul(_t,zt)|0,c=c+Math.imul(Lt,Dt)|0,f=f+Math.imul(Lt,zt)|0,b=b+Math.imul(vt,Kt)|0,c=c+Math.imul(vt,Ht)|0,c=c+Math.imul(Tt,Kt)|0,f=f+Math.imul(Tt,Ht)|0,b=b+Math.imul(mt,Wt)|0,c=c+Math.imul(mt,$t)|0,c=c+Math.imul(It,Wt)|0,f=f+Math.imul(It,$t)|0,b=b+Math.imul(it,Vt)|0,c=c+Math.imul(it,Gt)|0,c=c+Math.imul(ct,Vt)|0,f=f+Math.imul(ct,Gt)|0,b=b+Math.imul(_,jt)|0,c=c+Math.imul(_,Zt)|0,c=c+Math.imul(D,jt)|0,f=f+Math.imul(D,Zt)|0;var zr=(P+b|0)+((c&8191)<<13)|0;P=(f+(c>>>13)|0)+(zr>>>26)|0,zr&=67108863,b=Math.imul(Ut,dt),c=Math.imul(Ut,ht),c=c+Math.imul(y,dt)|0,f=Math.imul(y,ht),b=b+Math.imul(At,ft)|0,c=c+Math.imul(At,qt)|0,c=c+Math.imul(Ct,ft)|0,f=f+Math.imul(Ct,qt)|0,b=b+Math.imul(kt,Dt)|0,c=c+Math.imul(kt,zt)|0,c=c+Math.imul(Et,Dt)|0,f=f+Math.imul(Et,zt)|0,b=b+Math.imul(_t,Kt)|0,c=c+Math.imul(_t,Ht)|0,c=c+Math.imul(Lt,Kt)|0,f=f+Math.imul(Lt,Ht)|0,b=b+Math.imul(vt,Wt)|0,c=c+Math.imul(vt,$t)|0,c=c+Math.imul(Tt,Wt)|0,f=f+Math.imul(Tt,$t)|0,b=b+Math.imul(mt,Vt)|0,c=c+Math.imul(mt,Gt)|0,c=c+Math.imul(It,Vt)|0,f=f+Math.imul(It,Gt)|0,b=b+Math.imul(it,jt)|0,c=c+Math.imul(it,Zt)|0,c=c+Math.imul(ct,jt)|0,f=f+Math.imul(ct,Zt)|0,b=b+Math.imul(_,Yt)|0,c=c+Math.imul(_,Xt)|0,c=c+Math.imul(D,Yt)|0,f=f+Math.imul(D,Xt)|0;var Kr=(P+b|0)+((c&8191)<<13)|0;P=(f+(c>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,b=Math.imul(h,dt),c=Math.imul(h,ht),c=c+Math.imul(E,dt)|0,f=Math.imul(E,ht),b=b+Math.imul(Ut,ft)|0,c=c+Math.imul(Ut,qt)|0,c=c+Math.imul(y,ft)|0,f=f+Math.imul(y,qt)|0,b=b+Math.imul(At,Dt)|0,c=c+Math.imul(At,zt)|0,c=c+Math.imul(Ct,Dt)|0,f=f+Math.imul(Ct,zt)|0,b=b+Math.imul(kt,Kt)|0,c=c+Math.imul(kt,Ht)|0,c=c+Math.imul(Et,Kt)|0,f=f+Math.imul(Et,Ht)|0,b=b+Math.imul(_t,Wt)|0,c=c+Math.imul(_t,$t)|0,c=c+Math.imul(Lt,Wt)|0,f=f+Math.imul(Lt,$t)|0,b=b+Math.imul(vt,Vt)|0,c=c+Math.imul(vt,Gt)|0,c=c+Math.imul(Tt,Vt)|0,f=f+Math.imul(Tt,Gt)|0,b=b+Math.imul(mt,jt)|0,c=c+Math.imul(mt,Zt)|0,c=c+Math.imul(It,jt)|0,f=f+Math.imul(It,Zt)|0,b=b+Math.imul(it,Yt)|0,c=c+Math.imul(it,Xt)|0,c=c+Math.imul(ct,Yt)|0,f=f+Math.imul(ct,Xt)|0,b=b+Math.imul(_,Jt)|0,c=c+Math.imul(_,Qt)|0,c=c+Math.imul(D,Jt)|0,f=f+Math.imul(D,Qt)|0;var Hr=(P+b|0)+((c&8191)<<13)|0;P=(f+(c>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,b=Math.imul(z,dt),c=Math.imul(z,ht),c=c+Math.imul(V,dt)|0,f=Math.imul(V,ht),b=b+Math.imul(h,ft)|0,c=c+Math.imul(h,qt)|0,c=c+Math.imul(E,ft)|0,f=f+Math.imul(E,qt)|0,b=b+Math.imul(Ut,Dt)|0,c=c+Math.imul(Ut,zt)|0,c=c+Math.imul(y,Dt)|0,f=f+Math.imul(y,zt)|0,b=b+Math.imul(At,Kt)|0,c=c+Math.imul(At,Ht)|0,c=c+Math.imul(Ct,Kt)|0,f=f+Math.imul(Ct,Ht)|0,b=b+Math.imul(kt,Wt)|0,c=c+Math.imul(kt,$t)|0,c=c+Math.imul(Et,Wt)|0,f=f+Math.imul(Et,$t)|0,b=b+Math.imul(_t,Vt)|0,c=c+Math.imul(_t,Gt)|0,c=c+Math.imul(Lt,Vt)|0,f=f+Math.imul(Lt,Gt)|0,b=b+Math.imul(vt,jt)|0,c=c+Math.imul(vt,Zt)|0,c=c+Math.imul(Tt,jt)|0,f=f+Math.imul(Tt,Zt)|0,b=b+Math.imul(mt,Yt)|0,c=c+Math.imul(mt,Xt)|0,c=c+Math.imul(It,Yt)|0,f=f+Math.imul(It,Xt)|0,b=b+Math.imul(it,Jt)|0,c=c+Math.imul(it,Qt)|0,c=c+Math.imul(ct,Jt)|0,f=f+Math.imul(ct,Qt)|0,b=b+Math.imul(_,te)|0,c=c+Math.imul(_,ee)|0,c=c+Math.imul(D,te)|0,f=f+Math.imul(D,ee)|0;var Wr=(P+b|0)+((c&8191)<<13)|0;P=(f+(c>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,b=Math.imul(z,ft),c=Math.imul(z,qt),c=c+Math.imul(V,ft)|0,f=Math.imul(V,qt),b=b+Math.imul(h,Dt)|0,c=c+Math.imul(h,zt)|0,c=c+Math.imul(E,Dt)|0,f=f+Math.imul(E,zt)|0,b=b+Math.imul(Ut,Kt)|0,c=c+Math.imul(Ut,Ht)|0,c=c+Math.imul(y,Kt)|0,f=f+Math.imul(y,Ht)|0,b=b+Math.imul(At,Wt)|0,c=c+Math.imul(At,$t)|0,c=c+Math.imul(Ct,Wt)|0,f=f+Math.imul(Ct,$t)|0,b=b+Math.imul(kt,Vt)|0,c=c+Math.imul(kt,Gt)|0,c=c+Math.imul(Et,Vt)|0,f=f+Math.imul(Et,Gt)|0,b=b+Math.imul(_t,jt)|0,c=c+Math.imul(_t,Zt)|0,c=c+Math.imul(Lt,jt)|0,f=f+Math.imul(Lt,Zt)|0,b=b+Math.imul(vt,Yt)|0,c=c+Math.imul(vt,Xt)|0,c=c+Math.imul(Tt,Yt)|0,f=f+Math.imul(Tt,Xt)|0,b=b+Math.imul(mt,Jt)|0,c=c+Math.imul(mt,Qt)|0,c=c+Math.imul(It,Jt)|0,f=f+Math.imul(It,Qt)|0,b=b+Math.imul(it,te)|0,c=c+Math.imul(it,ee)|0,c=c+Math.imul(ct,te)|0,f=f+Math.imul(ct,ee)|0;var $r=(P+b|0)+((c&8191)<<13)|0;P=(f+(c>>>13)|0)+($r>>>26)|0,$r&=67108863,b=Math.imul(z,Dt),c=Math.imul(z,zt),c=c+Math.imul(V,Dt)|0,f=Math.imul(V,zt),b=b+Math.imul(h,Kt)|0,c=c+Math.imul(h,Ht)|0,c=c+Math.imul(E,Kt)|0,f=f+Math.imul(E,Ht)|0,b=b+Math.imul(Ut,Wt)|0,c=c+Math.imul(Ut,$t)|0,c=c+Math.imul(y,Wt)|0,f=f+Math.imul(y,$t)|0,b=b+Math.imul(At,Vt)|0,c=c+Math.imul(At,Gt)|0,c=c+Math.imul(Ct,Vt)|0,f=f+Math.imul(Ct,Gt)|0,b=b+Math.imul(kt,jt)|0,c=c+Math.imul(kt,Zt)|0,c=c+Math.imul(Et,jt)|0,f=f+Math.imul(Et,Zt)|0,b=b+Math.imul(_t,Yt)|0,c=c+Math.imul(_t,Xt)|0,c=c+Math.imul(Lt,Yt)|0,f=f+Math.imul(Lt,Xt)|0,b=b+Math.imul(vt,Jt)|0,c=c+Math.imul(vt,Qt)|0,c=c+Math.imul(Tt,Jt)|0,f=f+Math.imul(Tt,Qt)|0,b=b+Math.imul(mt,te)|0,c=c+Math.imul(mt,ee)|0,c=c+Math.imul(It,te)|0,f=f+Math.imul(It,ee)|0;var Vr=(P+b|0)+((c&8191)<<13)|0;P=(f+(c>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,b=Math.imul(z,Kt),c=Math.imul(z,Ht),c=c+Math.imul(V,Kt)|0,f=Math.imul(V,Ht),b=b+Math.imul(h,Wt)|0,c=c+Math.imul(h,$t)|0,c=c+Math.imul(E,Wt)|0,f=f+Math.imul(E,$t)|0,b=b+Math.imul(Ut,Vt)|0,c=c+Math.imul(Ut,Gt)|0,c=c+Math.imul(y,Vt)|0,f=f+Math.imul(y,Gt)|0,b=b+Math.imul(At,jt)|0,c=c+Math.imul(At,Zt)|0,c=c+Math.imul(Ct,jt)|0,f=f+Math.imul(Ct,Zt)|0,b=b+Math.imul(kt,Yt)|0,c=c+Math.imul(kt,Xt)|0,c=c+Math.imul(Et,Yt)|0,f=f+Math.imul(Et,Xt)|0,b=b+Math.imul(_t,Jt)|0,c=c+Math.imul(_t,Qt)|0,c=c+Math.imul(Lt,Jt)|0,f=f+Math.imul(Lt,Qt)|0,b=b+Math.imul(vt,te)|0,c=c+Math.imul(vt,ee)|0,c=c+Math.imul(Tt,te)|0,f=f+Math.imul(Tt,ee)|0;var Gr=(P+b|0)+((c&8191)<<13)|0;P=(f+(c>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,b=Math.imul(z,Wt),c=Math.imul(z,$t),c=c+Math.imul(V,Wt)|0,f=Math.imul(V,$t),b=b+Math.imul(h,Vt)|0,c=c+Math.imul(h,Gt)|0,c=c+Math.imul(E,Vt)|0,f=f+Math.imul(E,Gt)|0,b=b+Math.imul(Ut,jt)|0,c=c+Math.imul(Ut,Zt)|0,c=c+Math.imul(y,jt)|0,f=f+Math.imul(y,Zt)|0,b=b+Math.imul(At,Yt)|0,c=c+Math.imul(At,Xt)|0,c=c+Math.imul(Ct,Yt)|0,f=f+Math.imul(Ct,Xt)|0,b=b+Math.imul(kt,Jt)|0,c=c+Math.imul(kt,Qt)|0,c=c+Math.imul(Et,Jt)|0,f=f+Math.imul(Et,Qt)|0,b=b+Math.imul(_t,te)|0,c=c+Math.imul(_t,ee)|0,c=c+Math.imul(Lt,te)|0,f=f+Math.imul(Lt,ee)|0;var jr=(P+b|0)+((c&8191)<<13)|0;P=(f+(c>>>13)|0)+(jr>>>26)|0,jr&=67108863,b=Math.imul(z,Vt),c=Math.imul(z,Gt),c=c+Math.imul(V,Vt)|0,f=Math.imul(V,Gt),b=b+Math.imul(h,jt)|0,c=c+Math.imul(h,Zt)|0,c=c+Math.imul(E,jt)|0,f=f+Math.imul(E,Zt)|0,b=b+Math.imul(Ut,Yt)|0,c=c+Math.imul(Ut,Xt)|0,c=c+Math.imul(y,Yt)|0,f=f+Math.imul(y,Xt)|0,b=b+Math.imul(At,Jt)|0,c=c+Math.imul(At,Qt)|0,c=c+Math.imul(Ct,Jt)|0,f=f+Math.imul(Ct,Qt)|0,b=b+Math.imul(kt,te)|0,c=c+Math.imul(kt,ee)|0,c=c+Math.imul(Et,te)|0,f=f+Math.imul(Et,ee)|0;var Zr=(P+b|0)+((c&8191)<<13)|0;P=(f+(c>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,b=Math.imul(z,jt),c=Math.imul(z,Zt),c=c+Math.imul(V,jt)|0,f=Math.imul(V,Zt),b=b+Math.imul(h,Yt)|0,c=c+Math.imul(h,Xt)|0,c=c+Math.imul(E,Yt)|0,f=f+Math.imul(E,Xt)|0,b=b+Math.imul(Ut,Jt)|0,c=c+Math.imul(Ut,Qt)|0,c=c+Math.imul(y,Jt)|0,f=f+Math.imul(y,Qt)|0,b=b+Math.imul(At,te)|0,c=c+Math.imul(At,ee)|0,c=c+Math.imul(Ct,te)|0,f=f+Math.imul(Ct,ee)|0;var Yr=(P+b|0)+((c&8191)<<13)|0;P=(f+(c>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,b=Math.imul(z,Yt),c=Math.imul(z,Xt),c=c+Math.imul(V,Yt)|0,f=Math.imul(V,Xt),b=b+Math.imul(h,Jt)|0,c=c+Math.imul(h,Qt)|0,c=c+Math.imul(E,Jt)|0,f=f+Math.imul(E,Qt)|0,b=b+Math.imul(Ut,te)|0,c=c+Math.imul(Ut,ee)|0,c=c+Math.imul(y,te)|0,f=f+Math.imul(y,ee)|0;var Xr=(P+b|0)+((c&8191)<<13)|0;P=(f+(c>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,b=Math.imul(z,Jt),c=Math.imul(z,Qt),c=c+Math.imul(V,Jt)|0,f=Math.imul(V,Qt),b=b+Math.imul(h,te)|0,c=c+Math.imul(h,ee)|0,c=c+Math.imul(E,te)|0,f=f+Math.imul(E,ee)|0;var Jr=(P+b|0)+((c&8191)<<13)|0;P=(f+(c>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,b=Math.imul(z,te),c=Math.imul(z,ee),c=c+Math.imul(V,te)|0,f=Math.imul(V,ee);var Qr=(P+b|0)+((c&8191)<<13)|0;return P=(f+(c>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,U[0]=Fr,U[1]=Nr,U[2]=Pr,U[3]=Or,U[4]=qr,U[5]=Dr,U[6]=zr,U[7]=Kr,U[8]=Hr,U[9]=Wr,U[10]=$r,U[11]=Vr,U[12]=Gr,U[13]=jr,U[14]=Zr,U[15]=Yr,U[16]=Xr,U[17]=Jr,U[18]=Qr,P!==0&&(U[19]=P,g.length++),g};Math.imul||(G=W);function j(m,a,d){d.negative=a.negative^m.negative,d.length=m.length+a.length;for(var g=0,x=0,B=0;B<d.length-1;B++){var U=x;x=0;for(var P=g&67108863,b=Math.min(B,a.length-1),c=Math.max(0,B-m.length+1);c<=b;c++){var f=B-c,w=m.words[f]|0,_=a.words[c]|0,D=w*_,Z=D&67108863;U=U+(D/67108864|0)|0,Z=Z+P|0,P=Z&67108863,U=U+(Z>>>26)|0,x+=U>>>26,U&=67108863}d.words[B]=P,g=U,U=x}return g!==0?d.words[B]=g:d.length--,d._strip()}function tt(m,a,d){return j(m,a,d)}i.prototype.mulTo=function(a,d){var g,x=this.length+a.length;return this.length===10&&a.length===10?g=G(this,a,d):x<63?g=W(this,a,d):x<1024?g=j(this,a,d):g=tt(this,a,d),g},i.prototype.mul=function(a){var d=new i(null);return d.words=new Array(this.length+a.length),this.mulTo(a,d)},i.prototype.mulf=function(a){var d=new i(null);return d.words=new Array(this.length+a.length),tt(this,a,d)},i.prototype.imul=function(a){return this.clone().mulTo(a,this)},i.prototype.imuln=function(a){var d=a<0;d&&(a=-a),n(typeof a=="number"),n(a<67108864);for(var g=0,x=0;x<this.length;x++){var B=(this.words[x]|0)*a,U=(B&67108863)+(g&67108863);g>>=26,g+=B/67108864|0,g+=U>>>26,this.words[x]=U&67108863}return g!==0&&(this.words[x]=g,this.length++),this.length=a===0?1:this.length,d?this.ineg():this},i.prototype.muln=function(a){return this.clone().imuln(a)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(a){var d=k(a);if(d.length===0)return new i(1);for(var g=this,x=0;x<d.length&&d[x]===0;x++,g=g.sqr());if(++x<d.length)for(var B=g.sqr();x<d.length;x++,B=B.sqr())d[x]!==0&&(g=g.mul(B));return g},i.prototype.iushln=function(a){n(typeof a=="number"&&a>=0);var d=a%26,g=(a-d)/26,x=67108863>>>26-d<<26-d,B;if(d!==0){var U=0;for(B=0;B<this.length;B++){var P=this.words[B]&x,b=(this.words[B]|0)-P<<d;this.words[B]=b|U,U=P>>>26-d}U&&(this.words[B]=U,this.length++)}if(g!==0){for(B=this.length-1;B>=0;B--)this.words[B+g]=this.words[B];for(B=0;B<g;B++)this.words[B]=0;this.length+=g}return this._strip()},i.prototype.ishln=function(a){return n(this.negative===0),this.iushln(a)},i.prototype.iushrn=function(a,d,g){n(typeof a=="number"&&a>=0);var x;d?x=(d-d%26)/26:x=0;var B=a%26,U=Math.min((a-B)/26,this.length),P=67108863^67108863>>>B<<B,b=g;if(x-=U,x=Math.max(0,x),b){for(var c=0;c<U;c++)b.words[c]=this.words[c];b.length=U}if(U!==0)if(this.length>U)for(this.length-=U,c=0;c<this.length;c++)this.words[c]=this.words[c+U];else this.words[0]=0,this.length=1;var f=0;for(c=this.length-1;c>=0&&(f!==0||c>=x);c--){var w=this.words[c]|0;this.words[c]=f<<26-B|w>>>B,f=w&P}return b&&f!==0&&(b.words[b.length++]=f),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(a,d,g){return n(this.negative===0),this.iushrn(a,d,g)},i.prototype.shln=function(a){return this.clone().ishln(a)},i.prototype.ushln=function(a){return this.clone().iushln(a)},i.prototype.shrn=function(a){return this.clone().ishrn(a)},i.prototype.ushrn=function(a){return this.clone().iushrn(a)},i.prototype.testn=function(a){n(typeof a=="number"&&a>=0);var d=a%26,g=(a-d)/26,x=1<<d;if(this.length<=g)return!1;var B=this.words[g];return!!(B&x)},i.prototype.imaskn=function(a){n(typeof a=="number"&&a>=0);var d=a%26,g=(a-d)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(d!==0&&g++,this.length=Math.min(g,this.length),d!==0){var x=67108863^67108863>>>d<<d;this.words[this.length-1]&=x}return this._strip()},i.prototype.maskn=function(a){return this.clone().imaskn(a)},i.prototype.iaddn=function(a){return n(typeof a=="number"),n(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},i.prototype._iaddn=function(a){this.words[0]+=a;for(var d=0;d<this.length&&this.words[d]>=67108864;d++)this.words[d]-=67108864,d===this.length-1?this.words[d+1]=1:this.words[d+1]++;return this.length=Math.max(this.length,d+1),this},i.prototype.isubn=function(a){if(n(typeof a=="number"),n(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var d=0;d<this.length&&this.words[d]<0;d++)this.words[d]+=67108864,this.words[d+1]-=1;return this._strip()},i.prototype.addn=function(a){return this.clone().iaddn(a)},i.prototype.subn=function(a){return this.clone().isubn(a)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(a,d,g){var x=a.length+g,B;this._expand(x);var U,P=0;for(B=0;B<a.length;B++){U=(this.words[B+g]|0)+P;var b=(a.words[B]|0)*d;U-=b&67108863,P=(U>>26)-(b/67108864|0),this.words[B+g]=U&67108863}for(;B<this.length-g;B++)U=(this.words[B+g]|0)+P,P=U>>26,this.words[B+g]=U&67108863;if(P===0)return this._strip();for(n(P===-1),P=0,B=0;B<this.length;B++)U=-(this.words[B]|0)+P,P=U>>26,this.words[B]=U&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(a,d){var g=this.length-a.length,x=this.clone(),B=a,U=B.words[B.length-1]|0,P=this._countBits(U);g=26-P,g!==0&&(B=B.ushln(g),x.iushln(g),U=B.words[B.length-1]|0);var b=x.length-B.length,c;if(d!=="mod"){c=new i(null),c.length=b+1,c.words=new Array(c.length);for(var f=0;f<c.length;f++)c.words[f]=0}var w=x.clone()._ishlnsubmul(B,1,b);w.negative===0&&(x=w,c&&(c.words[b]=1));for(var _=b-1;_>=0;_--){var D=(x.words[B.length+_]|0)*67108864+(x.words[B.length+_-1]|0);for(D=Math.min(D/U|0,67108863),x._ishlnsubmul(B,D,_);x.negative!==0;)D--,x.negative=0,x._ishlnsubmul(B,1,_),x.isZero()||(x.negative^=1);c&&(c.words[_]=D)}return c&&c._strip(),x._strip(),d!=="div"&&g!==0&&x.iushrn(g),{div:c||null,mod:x}},i.prototype.divmod=function(a,d,g){if(n(!a.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var x,B,U;return this.negative!==0&&a.negative===0?(U=this.neg().divmod(a,d),d!=="mod"&&(x=U.div.neg()),d!=="div"&&(B=U.mod.neg(),g&&B.negative!==0&&B.iadd(a)),{div:x,mod:B}):this.negative===0&&a.negative!==0?(U=this.divmod(a.neg(),d),d!=="mod"&&(x=U.div.neg()),{div:x,mod:U.mod}):(this.negative&a.negative)!==0?(U=this.neg().divmod(a.neg(),d),d!=="div"&&(B=U.mod.neg(),g&&B.negative!==0&&B.isub(a)),{div:U.div,mod:B}):a.length>this.length||this.cmp(a)<0?{div:new i(0),mod:this}:a.length===1?d==="div"?{div:this.divn(a.words[0]),mod:null}:d==="mod"?{div:null,mod:new i(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new i(this.modrn(a.words[0]))}:this._wordDiv(a,d)},i.prototype.div=function(a){return this.divmod(a,"div",!1).div},i.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},i.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},i.prototype.divRound=function(a){var d=this.divmod(a);if(d.mod.isZero())return d.div;var g=d.div.negative!==0?d.mod.isub(a):d.mod,x=a.ushrn(1),B=a.andln(1),U=g.cmp(x);return U<0||B===1&&U===0?d.div:d.div.negative!==0?d.div.isubn(1):d.div.iaddn(1)},i.prototype.modrn=function(a){var d=a<0;d&&(a=-a),n(a<=67108863);for(var g=(1<<26)%a,x=0,B=this.length-1;B>=0;B--)x=(g*x+(this.words[B]|0))%a;return d?-x:x},i.prototype.modn=function(a){return this.modrn(a)},i.prototype.idivn=function(a){var d=a<0;d&&(a=-a),n(a<=67108863);for(var g=0,x=this.length-1;x>=0;x--){var B=(this.words[x]|0)+g*67108864;this.words[x]=B/a|0,g=B%a}return this._strip(),d?this.ineg():this},i.prototype.divn=function(a){return this.clone().idivn(a)},i.prototype.egcd=function(a){n(a.negative===0),n(!a.isZero());var d=this,g=a.clone();d.negative!==0?d=d.umod(a):d=d.clone();for(var x=new i(1),B=new i(0),U=new i(0),P=new i(1),b=0;d.isEven()&&g.isEven();)d.iushrn(1),g.iushrn(1),++b;for(var c=g.clone(),f=d.clone();!d.isZero();){for(var w=0,_=1;(d.words[0]&_)===0&&w<26;++w,_<<=1);if(w>0)for(d.iushrn(w);w-- >0;)(x.isOdd()||B.isOdd())&&(x.iadd(c),B.isub(f)),x.iushrn(1),B.iushrn(1);for(var D=0,Z=1;(g.words[0]&Z)===0&&D<26;++D,Z<<=1);if(D>0)for(g.iushrn(D);D-- >0;)(U.isOdd()||P.isOdd())&&(U.iadd(c),P.isub(f)),U.iushrn(1),P.iushrn(1);d.cmp(g)>=0?(d.isub(g),x.isub(U),B.isub(P)):(g.isub(d),U.isub(x),P.isub(B))}return{a:U,b:P,gcd:g.iushln(b)}},i.prototype._invmp=function(a){n(a.negative===0),n(!a.isZero());var d=this,g=a.clone();d.negative!==0?d=d.umod(a):d=d.clone();for(var x=new i(1),B=new i(0),U=g.clone();d.cmpn(1)>0&&g.cmpn(1)>0;){for(var P=0,b=1;(d.words[0]&b)===0&&P<26;++P,b<<=1);if(P>0)for(d.iushrn(P);P-- >0;)x.isOdd()&&x.iadd(U),x.iushrn(1);for(var c=0,f=1;(g.words[0]&f)===0&&c<26;++c,f<<=1);if(c>0)for(g.iushrn(c);c-- >0;)B.isOdd()&&B.iadd(U),B.iushrn(1);d.cmp(g)>=0?(d.isub(g),x.isub(B)):(g.isub(d),B.isub(x))}var w;return d.cmpn(1)===0?w=x:w=B,w.cmpn(0)<0&&w.iadd(a),w},i.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var d=this.clone(),g=a.clone();d.negative=0,g.negative=0;for(var x=0;d.isEven()&&g.isEven();x++)d.iushrn(1),g.iushrn(1);do{for(;d.isEven();)d.iushrn(1);for(;g.isEven();)g.iushrn(1);var B=d.cmp(g);if(B<0){var U=d;d=g,g=U}else if(B===0||g.cmpn(1)===0)break;d.isub(g)}while(!0);return g.iushln(x)},i.prototype.invm=function(a){return this.egcd(a).a.umod(a)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(a){return this.words[0]&a},i.prototype.bincn=function(a){n(typeof a=="number");var d=a%26,g=(a-d)/26,x=1<<d;if(this.length<=g)return this._expand(g+1),this.words[g]|=x,this;for(var B=x,U=g;B!==0&&U<this.length;U++){var P=this.words[U]|0;P+=B,B=P>>>26,P&=67108863,this.words[U]=P}return B!==0&&(this.words[U]=B,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(a){var d=a<0;if(this.negative!==0&&!d)return-1;if(this.negative===0&&d)return 1;this._strip();var g;if(this.length>1)g=1;else{d&&(a=-a),n(a<=67108863,"Number is too big");var x=this.words[0]|0;g=x===a?0:x<a?-1:1}return this.negative!==0?-g|0:g},i.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var d=this.ucmp(a);return this.negative!==0?-d|0:d},i.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var d=0,g=this.length-1;g>=0;g--){var x=this.words[g]|0,B=a.words[g]|0;if(x!==B){x<B?d=-1:x>B&&(d=1);break}}return d},i.prototype.gtn=function(a){return this.cmpn(a)===1},i.prototype.gt=function(a){return this.cmp(a)===1},i.prototype.gten=function(a){return this.cmpn(a)>=0},i.prototype.gte=function(a){return this.cmp(a)>=0},i.prototype.ltn=function(a){return this.cmpn(a)===-1},i.prototype.lt=function(a){return this.cmp(a)===-1},i.prototype.lten=function(a){return this.cmpn(a)<=0},i.prototype.lte=function(a){return this.cmp(a)<=0},i.prototype.eqn=function(a){return this.cmpn(a)===0},i.prototype.eq=function(a){return this.cmp(a)===0},i.red=function(a){return new L(a)},i.prototype.toRed=function(a){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(a){return this.red=a,this},i.prototype.forceRed=function(a){return n(!this.red,"Already a number in reduction context"),this._forceRed(a)},i.prototype.redAdd=function(a){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},i.prototype.redIAdd=function(a){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},i.prototype.redSub=function(a){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},i.prototype.redISub=function(a){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},i.prototype.redShl=function(a){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},i.prototype.redMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},i.prototype.redIMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(a){return n(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var $={k256:null,p224:null,p192:null,p25519:null};function X(m,a){this.name=m,this.p=new i(a,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}X.prototype._tmp=function(){var a=new i(null);return a.words=new Array(Math.ceil(this.n/13)),a},X.prototype.ireduce=function(a){var d=a,g;do this.split(d,this.tmp),d=this.imulK(d),d=d.iadd(this.tmp),g=d.bitLength();while(g>this.n);var x=g<this.n?-1:d.ucmp(this.p);return x===0?(d.words[0]=0,d.length=1):x>0?d.isub(this.p):d.strip!==void 0?d.strip():d._strip(),d},X.prototype.split=function(a,d){a.iushrn(this.n,0,d)},X.prototype.imulK=function(a){return a.imul(this.k)};function st(){X.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(st,X),st.prototype.split=function(a,d){for(var g=4194303,x=Math.min(a.length,9),B=0;B<x;B++)d.words[B]=a.words[B];if(d.length=x,a.length<=9){a.words[0]=0,a.length=1;return}var U=a.words[9];for(d.words[d.length++]=U&g,B=10;B<a.length;B++){var P=a.words[B]|0;a.words[B-10]=(P&g)<<4|U>>>22,U=P}U>>>=22,a.words[B-10]=U,U===0&&a.length>10?a.length-=10:a.length-=9},st.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var d=0,g=0;g<a.length;g++){var x=a.words[g]|0;d+=x*977,a.words[g]=d&67108863,d=x*64+(d/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function et(){X.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(et,X);function C(){X.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(C,X);function T(){X.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(T,X),T.prototype.imulK=function(a){for(var d=0,g=0;g<a.length;g++){var x=(a.words[g]|0)*19+d,B=x&67108863;x>>>=26,a.words[g]=B,d=x}return d!==0&&(a.words[a.length++]=d),a},i._prime=function(a){if($[a])return $[a];var d;if(a==="k256")d=new st;else if(a==="p224")d=new et;else if(a==="p192")d=new C;else if(a==="p25519")d=new T;else throw new Error("Unknown prime "+a);return $[a]=d,d};function L(m){if(typeof m=="string"){var a=i._prime(m);this.m=a.p,this.prime=a}else n(m.gtn(1),"modulus must be greater than 1"),this.m=m,this.prime=null}L.prototype._verify1=function(a){n(a.negative===0,"red works only with positives"),n(a.red,"red works only with red numbers")},L.prototype._verify2=function(a,d){n((a.negative|d.negative)===0,"red works only with positives"),n(a.red&&a.red===d.red,"red works only with red numbers")},L.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(S(a,a.umod(this.m)._forceRed(this)),a)},L.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},L.prototype.add=function(a,d){this._verify2(a,d);var g=a.add(d);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},L.prototype.iadd=function(a,d){this._verify2(a,d);var g=a.iadd(d);return g.cmp(this.m)>=0&&g.isub(this.m),g},L.prototype.sub=function(a,d){this._verify2(a,d);var g=a.sub(d);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},L.prototype.isub=function(a,d){this._verify2(a,d);var g=a.isub(d);return g.cmpn(0)<0&&g.iadd(this.m),g},L.prototype.shl=function(a,d){return this._verify1(a),this.imod(a.ushln(d))},L.prototype.imul=function(a,d){return this._verify2(a,d),this.imod(a.imul(d))},L.prototype.mul=function(a,d){return this._verify2(a,d),this.imod(a.mul(d))},L.prototype.isqr=function(a){return this.imul(a,a.clone())},L.prototype.sqr=function(a){return this.mul(a,a)},L.prototype.sqrt=function(a){if(a.isZero())return a.clone();var d=this.m.andln(3);if(n(d%2===1),d===3){var g=this.m.add(new i(1)).iushrn(2);return this.pow(a,g)}for(var x=this.m.subn(1),B=0;!x.isZero()&&x.andln(1)===0;)B++,x.iushrn(1);n(!x.isZero());var U=new i(1).toRed(this),P=U.redNeg(),b=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new i(2*c*c).toRed(this);this.pow(c,b).cmp(P)!==0;)c.redIAdd(P);for(var f=this.pow(c,x),w=this.pow(a,x.addn(1).iushrn(1)),_=this.pow(a,x),D=B;_.cmp(U)!==0;){for(var Z=_,it=0;Z.cmp(U)!==0;it++)Z=Z.redSqr();n(it<D);var ct=this.pow(f,new i(1).iushln(D-it-1));w=w.redMul(ct),f=ct.redSqr(),_=_.redMul(f),D=it}return w},L.prototype.invm=function(a){var d=a._invmp(this.m);return d.negative!==0?(d.negative=0,this.imod(d).redNeg()):this.imod(d)},L.prototype.pow=function(a,d){if(d.isZero())return new i(1).toRed(this);if(d.cmpn(1)===0)return a.clone();var g=4,x=new Array(1<<g);x[0]=new i(1).toRed(this),x[1]=a;for(var B=2;B<x.length;B++)x[B]=this.mul(x[B-1],a);var U=x[0],P=0,b=0,c=d.bitLength()%26;for(c===0&&(c=26),B=d.length-1;B>=0;B--){for(var f=d.words[B],w=c-1;w>=0;w--){var _=f>>w&1;if(U!==x[0]&&(U=this.sqr(U)),_===0&&P===0){b=0;continue}P<<=1,P|=_,b++,!(b!==g&&(B!==0||w!==0))&&(U=this.mul(U,x[P]),b=0,P=0)}c=26}return U},L.prototype.convertTo=function(a){var d=a.umod(this.m);return d===a?d.clone():d},L.prototype.convertFrom=function(a){var d=a.clone();return d.red=null,d},i.mont=function(a){return new O(a)};function O(m){L.call(this,m),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(O,L),O.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},O.prototype.convertFrom=function(a){var d=this.imod(a.mul(this.rinv));return d.red=null,d},O.prototype.imul=function(a,d){if(a.isZero()||d.isZero())return a.words[0]=0,a.length=1,a;var g=a.imul(d),x=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),B=g.isub(x).iushrn(this.shift),U=B;return B.cmp(this.m)>=0?U=B.isub(this.m):B.cmpn(0)<0&&(U=B.iadd(this.m)),U._forceRed(this)},O.prototype.mul=function(a,d){if(a.isZero()||d.isZero())return new i(0)._forceRed(this);var g=a.mul(d),x=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),B=g.isub(x).iushrn(this.shift),U=B;return B.cmp(this.m)>=0?U=B.isub(this.m):B.cmpn(0)<0&&(U=B.iadd(this.m)),U._forceRed(this)},O.prototype.invm=function(a){var d=this.imod(a._invmp(this.m).mul(this.r2));return d._forceRed(this)}})(r,wc)}(sr)),sr.exports}var bc=Bo();const _s=Sr(bc);var tr={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var As;function vc(){return As||(As=1,function(r,t){var e=Fi(),n=e.Buffer;function s(o,u){for(var p in o)u[p]=o[p]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=e:(s(e,t),t.Buffer=i);function i(o,u,p){return n(o,u,p)}i.prototype=Object.create(n.prototype),s(n,i),i.from=function(o,u,p){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,u,p)},i.alloc=function(o,u,p){if(typeof o!="number")throw new TypeError("Argument must be a number");var v=n(o);return u!==void 0?typeof p=="string"?v.fill(u,p):v.fill(u):v.fill(0),v},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(o)}}(tr,tr.exports)),tr.exports}var ai,Is;function xc(){if(Is)return ai;Is=1;var r=vc().Buffer;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),s=0;s<n.length;s++)n[s]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),u=o.charCodeAt(0);if(n[u]!==255)throw new TypeError(o+" is ambiguous");n[u]=i}var p=e.length,v=e.charAt(0),S=Math.log(p)/Math.log(256),I=Math.log(256)/Math.log(p);function q(R){if((Array.isArray(R)||R instanceof Uint8Array)&&(R=r.from(R)),!r.isBuffer(R))throw new TypeError("Expected Buffer");if(R.length===0)return"";for(var k=0,W=0,G=0,j=R.length;G!==j&&R[G]===0;)G++,k++;for(var tt=(j-G)*I+1>>>0,$=new Uint8Array(tt);G!==j;){for(var X=R[G],st=0,et=tt-1;(X!==0||st<W)&&et!==-1;et--,st++)X+=256*$[et]>>>0,$[et]=X%p>>>0,X=X/p>>>0;if(X!==0)throw new Error("Non-zero carry");W=st,G++}for(var C=tt-W;C!==tt&&$[C]===0;)C++;for(var T=v.repeat(k);C<tt;++C)T+=e.charAt($[C]);return T}function A(R){if(typeof R!="string")throw new TypeError("Expected String");if(R.length===0)return r.alloc(0);for(var k=0,W=0,G=0;R[k]===v;)W++,k++;for(var j=(R.length-k)*S+1>>>0,tt=new Uint8Array(j);k<R.length;){var $=R.charCodeAt(k);if($>255)return;var X=n[$];if(X===255)return;for(var st=0,et=j-1;(X!==0||st<G)&&et!==-1;et--,st++)X+=p*tt[et]>>>0,tt[et]=X%256>>>0,X=X/256>>>0;if(X!==0)throw new Error("Non-zero carry");G=st,k++}for(var C=j-G;C!==j&&tt[C]===0;)C++;var T=r.allocUnsafe(W+(j-C));T.fill(0,0,W);for(var L=W;C!==j;)T[L++]=tt[C++];return T}function F(R){var k=A(R);if(k)return k;throw new Error("Non-base"+p+" character")}return{encode:q,decodeUnsafe:A,decode:F}}return ai=t,ai}var ci,ks;function _o(){if(ks)return ci;ks=1;var r=xc(),t="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return ci=r(t),ci}var Sc=_o();const oe=Sr(Sc),Ms=co;var wt={};function Pe(r,t,e){return t<=r&&r<=e}function Ir(r){if(r===void 0)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function Ec(r){for(var t=String(r),e=t.length,n=0,s=[];n<e;){var i=t.charCodeAt(n);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(n===e-1)s.push(65533);else{var o=r.charCodeAt(n+1);if(56320<=o&&o<=57343){var u=i&1023,p=o&1023;s.push(65536+(u<<10)+p),n+=1}else s.push(65533)}n+=1}return s}function Bc(r){for(var t="",e=0;e<r.length;++e){var n=r[e];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return t}var ur=-1;function zi(r){this.tokens=[].slice.call(r)}zi.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():ur},prepend:function(r){if(Array.isArray(r))for(var t=r;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(var t=r;t.length;)this.tokens.push(t.shift());else this.tokens.push(r)}};var xn=-1;function ui(r,t){if(r)throw TypeError("Decoder error");return t||65533}var fr="utf-8";function lr(r,t){if(!(this instanceof lr))return new lr(r,t);if(r=r!==void 0?String(r).toLowerCase():fr,r!==fr)throw new Error("Encoding not supported. Only utf-8 is supported");t=Ir(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}lr.prototype={decode:function(t,e){var n;typeof t=="object"&&t instanceof ArrayBuffer?n=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):n=new Uint8Array(0),e=Ir(e),this._streaming||(this._decoder=new _c({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var s=new zi(n),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==xn);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===xn)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),Bc(i)}};function hr(r,t){if(!(this instanceof hr))return new hr(r,t);if(r=r!==void 0?String(r).toLowerCase():fr,r!==fr)throw new Error("Encoding not supported. Only utf-8 is supported");t=Ir(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}hr.prototype={encode:function(t,e){t=t?String(t):"",e=Ir(e),this._streaming||(this._encoder=new Ac(this._options)),this._streaming=!!e.stream;for(var n=[],s=new zi(Ec(t)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==xn);)Array.isArray(i)?n.push.apply(n,i):n.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==xn;)Array.isArray(i)?n.push.apply(n,i):n.push(i);this._encoder=null}return new Uint8Array(n)}};function _c(r){var t=r.fatal,e=0,n=0,s=0,i=128,o=191;this.handler=function(u,p){if(p===ur&&s!==0)return s=0,ui(t);if(p===ur)return xn;if(s===0){if(Pe(p,0,127))return p;if(Pe(p,194,223))s=1,e=p-192;else if(Pe(p,224,239))p===224&&(i=160),p===237&&(o=159),s=2,e=p-224;else if(Pe(p,240,244))p===240&&(i=144),p===244&&(o=143),s=3,e=p-240;else return ui(t);return e=e<<6*s,null}if(!Pe(p,i,o))return e=s=n=0,i=128,o=191,u.prepend(p),ui(t);if(i=128,o=191,n+=1,e+=p-128<<6*(s-n),n!==s)return null;var v=e;return e=s=n=0,v}}function Ac(r){r.fatal,this.handler=function(t,e){if(e===ur)return xn;if(Pe(e,0,127))return e;var n,s;Pe(e,128,2047)?(n=1,s=192):Pe(e,2048,65535)?(n=2,s=224):Pe(e,65536,1114111)&&(n=3,s=240);for(var i=[(e>>6*n)+s];n>0;){var o=e>>6*(n-1);i.push(128|o&63),n-=1}return i}}const Ic=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:lr,TextEncoder:hr},Symbol.toStringTag,{value:"Module"})),kc=Ui(Ic);var Rs;function Mc(){if(Rs)return wt;Rs=1;var r=wt&&wt.__createBinding||(Object.create?function(C,T,L,O){O===void 0&&(O=L),Object.defineProperty(C,O,{enumerable:!0,get:function(){return T[L]}})}:function(C,T,L,O){O===void 0&&(O=L),C[O]=T[L]}),t=wt&&wt.__setModuleDefault||(Object.create?function(C,T){Object.defineProperty(C,"default",{enumerable:!0,value:T})}:function(C,T){C.default=T}),e=wt&&wt.__decorate||function(C,T,L,O){var m=arguments.length,a=m<3?T:O===null?O=Object.getOwnPropertyDescriptor(T,L):O,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(C,T,L,O);else for(var g=C.length-1;g>=0;g--)(d=C[g])&&(a=(m<3?d(a):m>3?d(T,L,a):d(T,L))||a);return m>3&&a&&Object.defineProperty(T,L,a),a},n=wt&&wt.__importStar||function(C){if(C&&C.__esModule)return C;var T={};if(C!=null)for(var L in C)L!=="default"&&Object.hasOwnProperty.call(C,L)&&r(T,C,L);return t(T,C),T},s=wt&&wt.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(wt,"__esModule",{value:!0}),wt.deserializeUnchecked=wt.deserialize=wt.serialize=wt.BinaryReader=wt.BinaryWriter=wt.BorshError=wt.baseDecode=wt.baseEncode=void 0;const i=s(Bo()),o=s(_o()),u=n(kc),p=typeof TextDecoder!="function"?u.TextDecoder:TextDecoder,v=new p("utf-8",{fatal:!0});function S(C){return typeof C=="string"&&(C=Buffer.from(C,"utf8")),o.default.encode(Buffer.from(C))}wt.baseEncode=S;function I(C){return Buffer.from(o.default.decode(C))}wt.baseDecode=I;const q=1024;class A extends Error{constructor(T){super(T),this.fieldPath=[],this.originalMessage=T}addToFieldPath(T){this.fieldPath.splice(0,0,T),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}wt.BorshError=A;class F{constructor(){this.buf=Buffer.alloc(q),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(q)]))}writeU8(T){this.maybeResize(),this.buf.writeUInt8(T,this.length),this.length+=1}writeU16(T){this.maybeResize(),this.buf.writeUInt16LE(T,this.length),this.length+=2}writeU32(T){this.maybeResize(),this.buf.writeUInt32LE(T,this.length),this.length+=4}writeU64(T){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(T).toArray("le",8)))}writeU128(T){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(T).toArray("le",16)))}writeU256(T){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(T).toArray("le",32)))}writeU512(T){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(T).toArray("le",64)))}writeBuffer(T){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),T,Buffer.alloc(q)]),this.length+=T.length}writeString(T){this.maybeResize();const L=Buffer.from(T,"utf8");this.writeU32(L.length),this.writeBuffer(L)}writeFixedArray(T){this.writeBuffer(Buffer.from(T))}writeArray(T,L){this.maybeResize(),this.writeU32(T.length);for(const O of T)this.maybeResize(),L(O)}toArray(){return this.buf.subarray(0,this.length)}}wt.BinaryWriter=F;function R(C,T,L){const O=L.value;L.value=function(...m){try{return O.apply(this,m)}catch(a){if(a instanceof RangeError){const d=a.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(d)>=0)throw new A("Reached the end of buffer when deserializing")}throw a}}}class k{constructor(T){this.buf=T,this.offset=0}readU8(){const T=this.buf.readUInt8(this.offset);return this.offset+=1,T}readU16(){const T=this.buf.readUInt16LE(this.offset);return this.offset+=2,T}readU32(){const T=this.buf.readUInt32LE(this.offset);return this.offset+=4,T}readU64(){const T=this.readBuffer(8);return new i.default(T,"le")}readU128(){const T=this.readBuffer(16);return new i.default(T,"le")}readU256(){const T=this.readBuffer(32);return new i.default(T,"le")}readU512(){const T=this.readBuffer(64);return new i.default(T,"le")}readBuffer(T){if(this.offset+T>this.buf.length)throw new A(`Expected buffer length ${T} isn't within bounds`);const L=this.buf.slice(this.offset,this.offset+T);return this.offset+=T,L}readString(){const T=this.readU32(),L=this.readBuffer(T);try{return v.decode(L)}catch(O){throw new A(`Error decoding UTF-8 string: ${O}`)}}readFixedArray(T){return new Uint8Array(this.readBuffer(T))}readArray(T){const L=this.readU32(),O=Array();for(let m=0;m<L;++m)O.push(T());return O}}e([R],k.prototype,"readU8",null),e([R],k.prototype,"readU16",null),e([R],k.prototype,"readU32",null),e([R],k.prototype,"readU64",null),e([R],k.prototype,"readU128",null),e([R],k.prototype,"readU256",null),e([R],k.prototype,"readU512",null),e([R],k.prototype,"readString",null),e([R],k.prototype,"readFixedArray",null),e([R],k.prototype,"readArray",null),wt.BinaryReader=k;function W(C){return C.charAt(0).toUpperCase()+C.slice(1)}function G(C,T,L,O,m){try{if(typeof O=="string")m[`write${W(O)}`](L);else if(O instanceof Array)if(typeof O[0]=="number"){if(L.length!==O[0])throw new A(`Expecting byte array of length ${O[0]}, but got ${L.length} bytes`);m.writeFixedArray(L)}else if(O.length===2&&typeof O[1]=="number"){if(L.length!==O[1])throw new A(`Expecting byte array of length ${O[1]}, but got ${L.length} bytes`);for(let a=0;a<O[1];a++)G(C,null,L[a],O[0],m)}else m.writeArray(L,a=>{G(C,T,a,O[0],m)});else if(O.kind!==void 0)switch(O.kind){case"option":{L==null?m.writeU8(0):(m.writeU8(1),G(C,T,L,O.type,m));break}case"map":{m.writeU32(L.size),L.forEach((a,d)=>{G(C,T,d,O.key,m),G(C,T,a,O.value,m)});break}default:throw new A(`FieldType ${O} unrecognized`)}else j(C,L,m)}catch(a){throw a instanceof A&&a.addToFieldPath(T),a}}function j(C,T,L){if(typeof T.borshSerialize=="function"){T.borshSerialize(L);return}const O=C.get(T.constructor);if(!O)throw new A(`Class ${T.constructor.name} is missing in schema`);if(O.kind==="struct")O.fields.map(([m,a])=>{G(C,m,T[m],a,L)});else if(O.kind==="enum"){const m=T[O.field];for(let a=0;a<O.values.length;++a){const[d,g]=O.values[a];if(d===m){L.writeU8(a),G(C,d,T[d],g,L);break}}}else throw new A(`Unexpected schema kind: ${O.kind} for ${T.constructor.name}`)}function tt(C,T,L=F){const O=new L;return j(C,T,O),O.toArray()}wt.serialize=tt;function $(C,T,L,O){try{if(typeof L=="string")return O[`read${W(L)}`]();if(L instanceof Array){if(typeof L[0]=="number")return O.readFixedArray(L[0]);if(typeof L[1]=="number"){const m=[];for(let a=0;a<L[1];a++)m.push($(C,null,L[0],O));return m}else return O.readArray(()=>$(C,T,L[0],O))}if(L.kind==="option")return O.readU8()?$(C,T,L.type,O):void 0;if(L.kind==="map"){let m=new Map;const a=O.readU32();for(let d=0;d<a;d++){const g=$(C,T,L.key,O),x=$(C,T,L.value,O);m.set(g,x)}return m}return X(C,L,O)}catch(m){throw m instanceof A&&m.addToFieldPath(T),m}}function X(C,T,L){if(typeof T.borshDeserialize=="function")return T.borshDeserialize(L);const O=C.get(T);if(!O)throw new A(`Class ${T.name} is missing in schema`);if(O.kind==="struct"){const m={};for(const[a,d]of C.get(T).fields)m[a]=$(C,a,d,L);return new T(m)}if(O.kind==="enum"){const m=L.readU8();if(m>=O.values.length)throw new A(`Enum index: ${m} is out of range`);const[a,d]=O.values[m],g=$(C,a,d,L);return new T({[a]:g})}throw new A(`Unexpected schema kind: ${O.kind} for ${T.constructor.name}`)}function st(C,T,L,O=k){const m=new O(L),a=X(C,T,m);if(m.offset<L.length)throw new A(`Unexpected ${L.length-m.offset} bytes after deserialized data`);return a}wt.deserialize=st;function et(C,T,L,O=k){const m=new O(L);return X(C,T,m)}return wt.deserializeUnchecked=et,wt}var fi=Mc(),H={},Ts;function Rc(){if(Ts)return H;Ts=1,Object.defineProperty(H,"__esModule",{value:!0}),H.s16=H.s8=H.nu64be=H.u48be=H.u40be=H.u32be=H.u24be=H.u16be=H.nu64=H.u48=H.u40=H.u32=H.u24=H.u16=H.u8=H.offset=H.greedy=H.Constant=H.UTF8=H.CString=H.Blob=H.Boolean=H.BitField=H.BitStructure=H.VariantLayout=H.Union=H.UnionLayoutDiscriminator=H.UnionDiscriminator=H.Structure=H.Sequence=H.DoubleBE=H.Double=H.FloatBE=H.Float=H.NearInt64BE=H.NearInt64=H.NearUInt64BE=H.NearUInt64=H.IntBE=H.Int=H.UIntBE=H.UInt=H.OffsetLayout=H.GreedyCount=H.ExternalLayout=H.bindConstructorLayout=H.nameWithProperty=H.Layout=H.uint8ArrayToBuffer=H.checkUint8Array=void 0,H.constant=H.utf8=H.cstr=H.blob=H.unionLayoutDiscriminator=H.union=H.seq=H.bits=H.struct=H.f64be=H.f64=H.f32be=H.f32=H.ns64be=H.s48be=H.s40be=H.s32be=H.s24be=H.s16be=H.ns64=H.s48=H.s40=H.s32=H.s24=void 0;const r=Fi();function t(c){if(!(c instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}H.checkUint8Array=t;function e(c){return t(c),r.Buffer.from(c.buffer,c.byteOffset,c.length)}H.uint8ArrayToBuffer=e;let n=class{constructor(f,w){if(!Number.isInteger(f))throw new TypeError("span must be an integer");this.span=f,this.property=w}makeDestinationObject(){return{}}getSpan(f,w){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(f){const w=Object.create(this.constructor.prototype);return Object.assign(w,this),w.property=f,w}fromArray(f){}};H.Layout=n;function s(c,f){return f.property?c+"["+f.property+"]":c}H.nameWithProperty=s;function i(c,f){if(typeof c!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(c,"layout_"))throw new Error("Class is already bound to a layout");if(!(f&&f instanceof n))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(f,"boundConstructor_"))throw new Error("layout is already bound to a constructor");c.layout_=f,f.boundConstructor_=c,f.makeDestinationObject=()=>new c,Object.defineProperty(c.prototype,"encode",{value(w,_){return f.encode(this,w,_)},writable:!0}),Object.defineProperty(c,"decode",{value(w,_){return f.decode(w,_)},writable:!0})}H.bindConstructorLayout=i;class o extends n{isCount(){throw new Error("ExternalLayout is abstract")}}H.ExternalLayout=o;class u extends o{constructor(f=1,w){if(!Number.isInteger(f)||0>=f)throw new TypeError("elementSpan must be a (positive) integer");super(-1,w),this.elementSpan=f}isCount(){return!0}decode(f,w=0){t(f);const _=f.length-w;return Math.floor(_/this.elementSpan)}encode(f,w,_){return 0}}H.GreedyCount=u;class p extends o{constructor(f,w=0,_){if(!(f instanceof n))throw new TypeError("layout must be a Layout");if(!Number.isInteger(w))throw new TypeError("offset must be integer or undefined");super(f.span,_||f.property),this.layout=f,this.offset=w}isCount(){return this.layout instanceof v||this.layout instanceof S}decode(f,w=0){return this.layout.decode(f,w+this.offset)}encode(f,w,_=0){return this.layout.encode(f,w,_+this.offset)}}H.OffsetLayout=p;class v extends n{constructor(f,w){if(super(f,w),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(f,w=0){return e(f).readUIntLE(w,this.span)}encode(f,w,_=0){return e(w).writeUIntLE(f,_,this.span),this.span}}H.UInt=v;class S extends n{constructor(f,w){if(super(f,w),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(f,w=0){return e(f).readUIntBE(w,this.span)}encode(f,w,_=0){return e(w).writeUIntBE(f,_,this.span),this.span}}H.UIntBE=S;class I extends n{constructor(f,w){if(super(f,w),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(f,w=0){return e(f).readIntLE(w,this.span)}encode(f,w,_=0){return e(w).writeIntLE(f,_,this.span),this.span}}H.Int=I;class q extends n{constructor(f,w){if(super(f,w),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(f,w=0){return e(f).readIntBE(w,this.span)}encode(f,w,_=0){return e(w).writeIntBE(f,_,this.span),this.span}}H.IntBE=q;const A=Math.pow(2,32);function F(c){const f=Math.floor(c/A),w=c-f*A;return{hi32:f,lo32:w}}function R(c,f){return c*A+f}class k extends n{constructor(f){super(8,f)}decode(f,w=0){const _=e(f),D=_.readUInt32LE(w),Z=_.readUInt32LE(w+4);return R(Z,D)}encode(f,w,_=0){const D=F(f),Z=e(w);return Z.writeUInt32LE(D.lo32,_),Z.writeUInt32LE(D.hi32,_+4),8}}H.NearUInt64=k;class W extends n{constructor(f){super(8,f)}decode(f,w=0){const _=e(f),D=_.readUInt32BE(w),Z=_.readUInt32BE(w+4);return R(D,Z)}encode(f,w,_=0){const D=F(f),Z=e(w);return Z.writeUInt32BE(D.hi32,_),Z.writeUInt32BE(D.lo32,_+4),8}}H.NearUInt64BE=W;class G extends n{constructor(f){super(8,f)}decode(f,w=0){const _=e(f),D=_.readUInt32LE(w),Z=_.readInt32LE(w+4);return R(Z,D)}encode(f,w,_=0){const D=F(f),Z=e(w);return Z.writeUInt32LE(D.lo32,_),Z.writeInt32LE(D.hi32,_+4),8}}H.NearInt64=G;class j extends n{constructor(f){super(8,f)}decode(f,w=0){const _=e(f),D=_.readInt32BE(w),Z=_.readUInt32BE(w+4);return R(D,Z)}encode(f,w,_=0){const D=F(f),Z=e(w);return Z.writeInt32BE(D.hi32,_),Z.writeUInt32BE(D.lo32,_+4),8}}H.NearInt64BE=j;class tt extends n{constructor(f){super(4,f)}decode(f,w=0){return e(f).readFloatLE(w)}encode(f,w,_=0){return e(w).writeFloatLE(f,_),4}}H.Float=tt;class $ extends n{constructor(f){super(4,f)}decode(f,w=0){return e(f).readFloatBE(w)}encode(f,w,_=0){return e(w).writeFloatBE(f,_),4}}H.FloatBE=$;class X extends n{constructor(f){super(8,f)}decode(f,w=0){return e(f).readDoubleLE(w)}encode(f,w,_=0){return e(w).writeDoubleLE(f,_),8}}H.Double=X;class st extends n{constructor(f){super(8,f)}decode(f,w=0){return e(f).readDoubleBE(w)}encode(f,w,_=0){return e(w).writeDoubleBE(f,_),8}}H.DoubleBE=st;class et extends n{constructor(f,w,_){if(!(f instanceof n))throw new TypeError("elementLayout must be a Layout");if(!(w instanceof o&&w.isCount()||Number.isInteger(w)&&0<=w))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let D=-1;!(w instanceof o)&&0<f.span&&(D=w*f.span),super(D,_),this.elementLayout=f,this.count=w}getSpan(f,w=0){if(0<=this.span)return this.span;let _=0,D=this.count;if(D instanceof o&&(D=D.decode(f,w)),0<this.elementLayout.span)_=D*this.elementLayout.span;else{let Z=0;for(;Z<D;)_+=this.elementLayout.getSpan(f,w+_),++Z}return _}decode(f,w=0){const _=[];let D=0,Z=this.count;for(Z instanceof o&&(Z=Z.decode(f,w));D<Z;)_.push(this.elementLayout.decode(f,w)),w+=this.elementLayout.getSpan(f,w),D+=1;return _}encode(f,w,_=0){const D=this.elementLayout,Z=f.reduce((it,ct)=>it+D.encode(ct,w,_+it),0);return this.count instanceof o&&this.count.encode(f.length,w,_),Z}}H.Sequence=et;class C extends n{constructor(f,w,_){if(!(Array.isArray(f)&&f.reduce((Z,it)=>Z&&it instanceof n,!0)))throw new TypeError("fields must be array of Layout instances");typeof w=="boolean"&&_===void 0&&(_=w,w=void 0);for(const Z of f)if(0>Z.span&&Z.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let D=-1;try{D=f.reduce((Z,it)=>Z+it.getSpan(),0)}catch{}super(D,w),this.fields=f,this.decodePrefixes=!!_}getSpan(f,w=0){if(0<=this.span)return this.span;let _=0;try{_=this.fields.reduce((D,Z)=>{const it=Z.getSpan(f,w);return w+=it,D+it},0)}catch{throw new RangeError("indeterminate span")}return _}decode(f,w=0){t(f);const _=this.makeDestinationObject();for(const D of this.fields)if(D.property!==void 0&&(_[D.property]=D.decode(f,w)),w+=D.getSpan(f,w),this.decodePrefixes&&f.length===w)break;return _}encode(f,w,_=0){const D=_;let Z=0,it=0;for(const ct of this.fields){let re=ct.span;if(it=0<re?re:0,ct.property!==void 0){const mt=f[ct.property];mt!==void 0&&(it=ct.encode(mt,w,_),0>re&&(re=ct.getSpan(w,_)))}Z=_,_+=re}return Z+it-D}fromArray(f){const w=this.makeDestinationObject();for(const _ of this.fields)_.property!==void 0&&0<f.length&&(w[_.property]=f.shift());return w}layoutFor(f){if(typeof f!="string")throw new TypeError("property must be string");for(const w of this.fields)if(w.property===f)return w}offsetOf(f){if(typeof f!="string")throw new TypeError("property must be string");let w=0;for(const _ of this.fields){if(_.property===f)return w;0>_.span?w=-1:0<=w&&(w+=_.span)}}}H.Structure=C;class T{constructor(f){this.property=f}decode(f,w){throw new Error("UnionDiscriminator is abstract")}encode(f,w,_){throw new Error("UnionDiscriminator is abstract")}}H.UnionDiscriminator=T;class L extends T{constructor(f,w){if(!(f instanceof o&&f.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(w||f.property||"variant"),this.layout=f}decode(f,w){return this.layout.decode(f,w)}encode(f,w,_){return this.layout.encode(f,w,_)}}H.UnionLayoutDiscriminator=L;class O extends n{constructor(f,w,_){let D;if(f instanceof v||f instanceof S)D=new L(new p(f));else if(f instanceof o&&f.isCount())D=new L(f);else if(f instanceof T)D=f;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(w===void 0&&(w=null),!(w===null||w instanceof n))throw new TypeError("defaultLayout must be null or a Layout");if(w!==null){if(0>w.span)throw new Error("defaultLayout must have constant span");w.property===void 0&&(w=w.replicate("content"))}let Z=-1;w&&(Z=w.span,0<=Z&&(f instanceof v||f instanceof S)&&(Z+=D.layout.span)),super(Z,_),this.discriminator=D,this.usesPrefixDiscriminator=f instanceof v||f instanceof S,this.defaultLayout=w,this.registry={};let it=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(ct){return it(ct)},this.configGetSourceVariant=function(ct){it=ct.bind(this)}}getSpan(f,w=0){if(0<=this.span)return this.span;const _=this.getVariant(f,w);if(!_)throw new Error("unable to determine span for unrecognized variant");return _.getSpan(f,w)}defaultGetSourceVariant(f){if(Object.prototype.hasOwnProperty.call(f,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(f,this.defaultLayout.property))return;const w=this.registry[f[this.discriminator.property]];if(w&&(!w.layout||w.property&&Object.prototype.hasOwnProperty.call(f,w.property)))return w}else for(const w in this.registry){const _=this.registry[w];if(_.property&&Object.prototype.hasOwnProperty.call(f,_.property))return _}throw new Error("unable to infer src variant")}decode(f,w=0){let _;const D=this.discriminator,Z=D.decode(f,w),it=this.registry[Z];if(it===void 0){const ct=this.defaultLayout;let re=0;this.usesPrefixDiscriminator&&(re=D.layout.span),_=this.makeDestinationObject(),_[D.property]=Z,_[ct.property]=ct.decode(f,w+re)}else _=it.decode(f,w);return _}encode(f,w,_=0){const D=this.getSourceVariant(f);if(D===void 0){const Z=this.discriminator,it=this.defaultLayout;let ct=0;return this.usesPrefixDiscriminator&&(ct=Z.layout.span),Z.encode(f[Z.property],w,_),ct+it.encode(f[it.property],w,_+ct)}return D.encode(f,w,_)}addVariant(f,w,_){const D=new m(this,f,w,_);return this.registry[f]=D,D}getVariant(f,w=0){let _;return f instanceof Uint8Array?_=this.discriminator.decode(f,w):_=f,this.registry[_]}}H.Union=O;class m extends n{constructor(f,w,_,D){if(!(f instanceof O))throw new TypeError("union must be a Union");if(!Number.isInteger(w)||0>w)throw new TypeError("variant must be a (non-negative) integer");if(typeof _=="string"&&D===void 0&&(D=_,_=null),_){if(!(_ instanceof n))throw new TypeError("layout must be a Layout");if(f.defaultLayout!==null&&0<=_.span&&_.span>f.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof D!="string")throw new TypeError("variant must have a String property")}let Z=f.span;0>f.span&&(Z=_?_.span:0,0<=Z&&f.usesPrefixDiscriminator&&(Z+=f.discriminator.layout.span)),super(Z,D),this.union=f,this.variant=w,this.layout=_||null}getSpan(f,w=0){if(0<=this.span)return this.span;let _=0;this.union.usesPrefixDiscriminator&&(_=this.union.discriminator.layout.span);let D=0;return this.layout&&(D=this.layout.getSpan(f,w+_)),_+D}decode(f,w=0){const _=this.makeDestinationObject();if(this!==this.union.getVariant(f,w))throw new Error("variant mismatch");let D=0;return this.union.usesPrefixDiscriminator&&(D=this.union.discriminator.layout.span),this.layout?_[this.property]=this.layout.decode(f,w+D):this.property?_[this.property]=!0:this.union.usesPrefixDiscriminator&&(_[this.union.discriminator.property]=this.variant),_}encode(f,w,_=0){let D=0;if(this.union.usesPrefixDiscriminator&&(D=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(f,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,w,_);let Z=D;if(this.layout&&(this.layout.encode(f[this.property],w,_+D),Z+=this.layout.getSpan(w,_+D),0<=this.union.span&&Z>this.union.span))throw new Error("encoded variant overruns containing union");return Z}fromArray(f){if(this.layout)return this.layout.fromArray(f)}}H.VariantLayout=m;function a(c){return 0>c&&(c+=4294967296),c}class d extends n{constructor(f,w,_){if(!(f instanceof v||f instanceof S))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof w=="string"&&_===void 0&&(_=w,w=!1),4<f.span)throw new RangeError("word cannot exceed 32 bits");super(f.span,_),this.word=f,this.msb=!!w,this.fields=[];let D=0;this._packedSetValue=function(Z){return D=a(Z),this},this._packedGetValue=function(){return D}}decode(f,w=0){const _=this.makeDestinationObject(),D=this.word.decode(f,w);this._packedSetValue(D);for(const Z of this.fields)Z.property!==void 0&&(_[Z.property]=Z.decode(f));return _}encode(f,w,_=0){const D=this.word.decode(w,_);this._packedSetValue(D);for(const Z of this.fields)if(Z.property!==void 0){const it=f[Z.property];it!==void 0&&Z.encode(it)}return this.word.encode(this._packedGetValue(),w,_)}addField(f,w){const _=new g(this,f,w);return this.fields.push(_),_}addBoolean(f){const w=new x(this,f);return this.fields.push(w),w}fieldFor(f){if(typeof f!="string")throw new TypeError("property must be string");for(const w of this.fields)if(w.property===f)return w}}H.BitStructure=d;class g{constructor(f,w,_){if(!(f instanceof d))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(w)||0>=w)throw new TypeError("bits must be positive integer");const D=8*f.span,Z=f.fields.reduce((it,ct)=>it+ct.bits,0);if(w+Z>D)throw new Error("bits too long for span remainder ("+(D-Z)+" of "+D+" remain)");this.container=f,this.bits=w,this.valueMask=(1<<w)-1,w===32&&(this.valueMask=4294967295),this.start=Z,this.container.msb&&(this.start=D-Z-w),this.wordMask=a(this.valueMask<<this.start),this.property=_}decode(f,w){const _=this.container._packedGetValue();return a(_&this.wordMask)>>>this.start}encode(f){if(typeof f!="number"||!Number.isInteger(f)||f!==a(f&this.valueMask))throw new TypeError(s("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const w=this.container._packedGetValue(),_=a(f<<this.start);this.container._packedSetValue(a(w&~this.wordMask)|_)}}H.BitField=g;class x extends g{constructor(f,w){super(f,1,w)}decode(f,w){return!!super.decode(f,w)}encode(f){typeof f=="boolean"&&(f=+f),super.encode(f)}}H.Boolean=x;class B extends n{constructor(f,w){if(!(f instanceof o&&f.isCount()||Number.isInteger(f)&&0<=f))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let _=-1;f instanceof o||(_=f),super(_,w),this.length=f}getSpan(f,w){let _=this.span;return 0>_&&(_=this.length.decode(f,w)),_}decode(f,w=0){let _=this.span;return 0>_&&(_=this.length.decode(f,w)),e(f).slice(w,w+_)}encode(f,w,_){let D=this.length;if(this.length instanceof o&&(D=f.length),!(f instanceof Uint8Array&&D===f.length))throw new TypeError(s("Blob.encode",this)+" requires (length "+D+") Uint8Array as src");if(_+D>w.length)throw new RangeError("encoding overruns Uint8Array");const Z=e(f);return e(w).write(Z.toString("hex"),_,D,"hex"),this.length instanceof o&&this.length.encode(D,w,_),D}}H.Blob=B;class U extends n{constructor(f){super(-1,f)}getSpan(f,w=0){t(f);let _=w;for(;_<f.length&&f[_]!==0;)_+=1;return 1+_-w}decode(f,w=0){const _=this.getSpan(f,w);return e(f).slice(w,w+_-1).toString("utf-8")}encode(f,w,_=0){typeof f!="string"&&(f=String(f));const D=r.Buffer.from(f,"utf8"),Z=D.length;if(_+Z>w.length)throw new RangeError("encoding overruns Buffer");const it=e(w);return D.copy(it,_),it[_+Z]=0,Z+1}}H.CString=U;class P extends n{constructor(f,w){if(typeof f=="string"&&w===void 0&&(w=f,f=void 0),f===void 0)f=-1;else if(!Number.isInteger(f))throw new TypeError("maxSpan must be an integer");super(-1,w),this.maxSpan=f}getSpan(f,w=0){return t(f),f.length-w}decode(f,w=0){const _=this.getSpan(f,w);if(0<=this.maxSpan&&this.maxSpan<_)throw new RangeError("text length exceeds maxSpan");return e(f).slice(w,w+_).toString("utf-8")}encode(f,w,_=0){typeof f!="string"&&(f=String(f));const D=r.Buffer.from(f,"utf8"),Z=D.length;if(0<=this.maxSpan&&this.maxSpan<Z)throw new RangeError("text length exceeds maxSpan");if(_+Z>w.length)throw new RangeError("encoding overruns Buffer");return D.copy(e(w),_),Z}}H.UTF8=P;class b extends n{constructor(f,w){super(0,w),this.value=f}decode(f,w){return this.value}encode(f,w,_){return 0}}return H.Constant=b,H.greedy=(c,f)=>new u(c,f),H.offset=(c,f,w)=>new p(c,f,w),H.u8=c=>new v(1,c),H.u16=c=>new v(2,c),H.u24=c=>new v(3,c),H.u32=c=>new v(4,c),H.u40=c=>new v(5,c),H.u48=c=>new v(6,c),H.nu64=c=>new k(c),H.u16be=c=>new S(2,c),H.u24be=c=>new S(3,c),H.u32be=c=>new S(4,c),H.u40be=c=>new S(5,c),H.u48be=c=>new S(6,c),H.nu64be=c=>new W(c),H.s8=c=>new I(1,c),H.s16=c=>new I(2,c),H.s24=c=>new I(3,c),H.s32=c=>new I(4,c),H.s40=c=>new I(5,c),H.s48=c=>new I(6,c),H.ns64=c=>new G(c),H.s16be=c=>new q(2,c),H.s24be=c=>new q(3,c),H.s32be=c=>new q(4,c),H.s40be=c=>new q(5,c),H.s48be=c=>new q(6,c),H.ns64be=c=>new j(c),H.f32=c=>new tt(c),H.f32be=c=>new $(c),H.f64=c=>new X(c),H.f64be=c=>new st(c),H.struct=(c,f,w)=>new C(c,f,w),H.bits=(c,f,w)=>new d(c,f,w),H.seq=(c,f,w)=>new et(c,f,w),H.union=(c,f,w)=>new O(c,f,w),H.unionLayoutDiscriminator=(c,f)=>new L(c,f),H.blob=(c,f)=>new B(c,f),H.cstr=c=>new U(c),H.utf8=(c,f)=>new P(c,f),H.constant=(c,f)=>new b(c,f),H}var M=Rc(),Tc=8078e3,Lc=8078001,Cc=8078004,Uc=8078005,Fc=8078006,Nc=8078011;function Ao(r){return Array.isArray(r)?"%5B"+r.map(Ao).join("%2C%20")+"%5D":typeof r=="bigint"?`${r}n`:encodeURIComponent(String(r!=null&&Object.getPrototypeOf(r)===null?{...r}:r))}function Pc([r,t]){return`${r}=${Ao(t)}`}function Oc(r){const t=Object.entries(r).map(Pc).join("&");return btoa(t)}function qc(r,t={}){{let e=`Solana error #${r}; Decode this error by running \`npx @solana/errors decode -- ${r}`;return Object.keys(t).length&&(e+=` '${Oc(t)}'`),`${e}\``}}var yn=class extends Error{constructor(...[t,e]){let n,s;if(e){const{cause:o,...u}=e;o&&(s={cause:o}),Object.keys(u).length>0&&(n=u)}const i=qc(t,n);super(i,s);ne(this,"cause",this.cause);ne(this,"context");this.context={__code:t,...n},this.name="SolanaError"}};function Dc(r,t){return"fixedSize"in t?t.fixedSize:t.getSizeFromValue(r)}function zc(r){return Object.freeze({...r,encode:t=>{const e=new Uint8Array(Dc(t,r));return r.write(t,e,0),e}})}function Kc(r){return Object.freeze({...r,decode:(t,e=0)=>r.read(t,e)[0]})}function hn(r){return"fixedSize"in r&&typeof r.fixedSize=="number"}function Hc(r,t){if(hn(r)!==hn(t))throw new yn(Cc);if(hn(r)&&hn(t)&&r.fixedSize!==t.fixedSize)throw new yn(Uc,{decoderFixedSize:t.fixedSize,encoderFixedSize:r.fixedSize});if(!hn(r)&&!hn(t)&&r.maxSize!==t.maxSize)throw new yn(Fc,{decoderMaxSize:t.maxSize,encoderMaxSize:r.maxSize});return{...t,...r,decode:t.decode,encode:r.encode,read:t.read,write:r.write}}function Wc(r,t,e=0){if(t.length-e<=0)throw new yn(Tc,{codecDescription:r})}function $c(r,t,e,n=0){const s=e.length-n;if(s<t)throw new yn(Lc,{bytesLength:s,codecDescription:r,expected:t})}function Vc(r,t,e,n){if(n<t||n>e)throw new yn(Nc,{codecDescription:r,max:e,min:t,value:n})}function Io(r){return(r==null?void 0:r.endian)!==1}function Gc(r){return zc({fixedSize:r.size,write(t,e,n){r.range&&Vc(r.name,r.range[0],r.range[1],t);const s=new ArrayBuffer(r.size);return r.set(new DataView(s),t,Io(r.config)),e.set(new Uint8Array(s),n),n+r.size}})}function jc(r){return Kc({fixedSize:r.size,read(t,e=0){Wc(r.name,t,e),$c(r.name,r.size,t,e);const n=new DataView(Zc(t,e,r.size));return[r.get(n,Io(r.config)),e+r.size]}})}function Zc(r,t,e){const n=r.byteOffset+(t??0),s=e??r.byteLength;return r.buffer.slice(n,n+s)}var Yc=(r={})=>Gc({config:r,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(t,e,n)=>t.setBigUint64(0,BigInt(e),n),size:8}),Xc=(r={})=>jc({config:r,get:(t,e)=>t.getBigUint64(0,e),name:"u64",size:8}),Jc=(r={})=>Hc(Yc(r),Xc(r));class Qc extends TypeError{constructor(t,e){let n;const{message:s,explanation:i,...o}=t,{path:u}=t,p=u.length===0?s:`At path: ${u.join(".")} -- ${s}`;super(i??p),i!=null&&(this.cause=p),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[t,...e()])}}function tu(r){return Wn(r)&&typeof r[Symbol.iterator]=="function"}function Wn(r){return typeof r=="object"&&r!=null}function dr(r){return Wn(r)&&!Array.isArray(r)}function Ae(r){return typeof r=="symbol"?r.toString():typeof r=="string"?JSON.stringify(r):`${r}`}function eu(r){const{done:t,value:e}=r.next();return t?void 0:e}function nu(r,t,e,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:s,branch:i}=t,{type:o}=e,{refinement:u,message:p=`Expected a value of type \`${o}\`${u?` with refinement \`${u}\``:""}, but received: \`${Ae(n)}\``}=r;return{value:n,type:o,refinement:u,key:s[s.length-1],path:s,branch:i,...r,message:p}}function*Ls(r,t,e,n){tu(r)||(r=[r]);for(const s of r){const i=nu(s,t,e,n);i&&(yield i)}}function*Ki(r,t,e={}){const{path:n=[],branch:s=[r],coerce:i=!1,mask:o=!1}=e,u={path:n,branch:s,mask:o};i&&(r=t.coercer(r,u));let p="valid";for(const v of t.validator(r,u))v.explanation=e.message,p="not_valid",yield[v,void 0];for(let[v,S,I]of t.entries(r,u)){const q=Ki(S,I,{path:v===void 0?n:[...n,v],branch:v===void 0?s:[...s,S],coerce:i,mask:o,message:e.message});for(const A of q)A[0]?(p=A[0].refinement!=null?"not_refined":"not_valid",yield[A[0],void 0]):i&&(S=A[1],v===void 0?r=S:r instanceof Map?r.set(v,S):r instanceof Set?r.add(S):Wn(r)&&(S!==void 0||v in r)&&(r[v]=S))}if(p!=="not_valid")for(const v of t.refiner(r,u))v.explanation=e.message,p="not_refined",yield[v,void 0];p==="valid"&&(yield[void 0,r])}let Le=class{constructor(t){const{type:e,schema:n,validator:s,refiner:i,coercer:o=p=>p,entries:u=function*(){}}=t;this.type=e,this.schema=n,this.entries=u,this.coercer=o,s?this.validator=(p,v)=>{const S=s(p,v);return Ls(S,v,this,p)}:this.validator=()=>[],i?this.refiner=(p,v)=>{const S=i(p,v);return Ls(S,v,this,p)}:this.refiner=()=>[]}assert(t,e){return ru(t,this,e)}create(t,e){return Q(t,this,e)}is(t){return ko(t,this)}mask(t,e){return iu(t,this,e)}validate(t,e={}){return $n(t,this,e)}};function ru(r,t,e){const n=$n(r,t,{message:e});if(n[0])throw n[0]}function Q(r,t,e){const n=$n(r,t,{coerce:!0,message:e});if(n[0])throw n[0];return n[1]}function iu(r,t,e){const n=$n(r,t,{coerce:!0,mask:!0,message:e});if(n[0])throw n[0];return n[1]}function ko(r,t){return!$n(r,t)[0]}function $n(r,t,e={}){const n=Ki(r,t,e),s=eu(n);return s[0]?[new Qc(s[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function on(r,t){return new Le({type:r,schema:null,validator:t})}function su(){return on("any",()=>!0)}function nt(r){return new Le({type:"array",schema:r,*entries(t){if(r&&Array.isArray(t))for(const[e,n]of t.entries())yield[e,n,r]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${Ae(t)}`}})}function Re(){return on("boolean",r=>typeof r=="boolean")}function Hi(r){return on("instance",t=>t instanceof r||`Expected a \`${r.name}\` instance, but received: ${Ae(t)}`)}function Mt(r){const t=Ae(r),e=typeof r;return new Le({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?r:null,validator(n){return n===r||`Expected the literal \`${t}\`, but received: ${Ae(n)}`}})}function ou(){return on("never",()=>!1)}function rt(r){return new Le({...r,validator:(t,e)=>t===null||r.validator(t,e),refiner:(t,e)=>t===null||r.refiner(t,e)})}function K(){return on("number",r=>typeof r=="number"&&!isNaN(r)||`Expected a number, but received: ${Ae(r)}`)}function ut(r){return new Le({...r,validator:(t,e)=>t===void 0||r.validator(t,e),refiner:(t,e)=>t===void 0||r.refiner(t,e)})}function Mo(r,t){return new Le({type:"record",schema:null,*entries(e){if(Wn(e))for(const n in e){const s=e[n];yield[n,n,r],yield[n,s,t]}},validator(e){return dr(e)||`Expected an object, but received: ${Ae(e)}`},coercer(e){return dr(e)?{...e}:e}})}function J(){return on("string",r=>typeof r=="string"||`Expected a string, but received: ${Ae(r)}`)}function Wi(r){const t=ou();return new Le({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const n=Math.max(r.length,e.length);for(let s=0;s<n;s++)yield[s,e[s],r[s]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${Ae(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function Y(r){const t=Object.keys(r);return new Le({type:"type",schema:r,*entries(e){if(Wn(e))for(const n of t)yield[n,e[n],r[n]]},validator(e){return dr(e)||`Expected an object, but received: ${Ae(e)}`},coercer(e){return dr(e)?{...e}:e}})}function ye(r){const t=r.map(e=>e.type).join(" | ");return new Le({type:"union",schema:null,coercer(e,n){for(const s of r){const[i,o]=s.validate(e,{coerce:!0,mask:n.mask});if(!i)return o}return e},validator(e,n){const s=[];for(const i of r){const[...o]=Ki(e,i,n),[u]=o;if(u[0])for(const[p]of o)p&&s.push(p);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${Ae(e)}`,...s]}})}function In(){return on("unknown",()=>!0)}function Vn(r,t,e){return new Le({...r,coercer:(n,s)=>ko(n,t)?r.coercer(e(n,s),s):r.coercer(n,s)})}var er,au=new Uint8Array(16);function Ro(){if(!er&&(er=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!er))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return er(au)}const cu=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function kr(r){return typeof r=="string"&&cu.test(r)}var se=[];for(var li=0;li<256;++li)se.push((li+256).toString(16).substr(1));function Mr(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(se[r[t+0]]+se[r[t+1]]+se[r[t+2]]+se[r[t+3]]+"-"+se[r[t+4]]+se[r[t+5]]+"-"+se[r[t+6]]+se[r[t+7]]+"-"+se[r[t+8]]+se[r[t+9]]+"-"+se[r[t+10]]+se[r[t+11]]+se[r[t+12]]+se[r[t+13]]+se[r[t+14]]+se[r[t+15]]).toLowerCase();if(!kr(e))throw TypeError("Stringified UUID is invalid");return e}var Cs,hi,di=0,pi=0;function uu(r,t,e){var n=t&&e||0,s=t||new Array(16);r=r||{};var i=r.node||Cs,o=r.clockseq!==void 0?r.clockseq:hi;if(i==null||o==null){var u=r.random||(r.rng||Ro)();i==null&&(i=Cs=[u[0]|1,u[1],u[2],u[3],u[4],u[5]]),o==null&&(o=hi=(u[6]<<8|u[7])&16383)}var p=r.msecs!==void 0?r.msecs:Date.now(),v=r.nsecs!==void 0?r.nsecs:pi+1,S=p-di+(v-pi)/1e4;if(S<0&&r.clockseq===void 0&&(o=o+1&16383),(S<0||p>di)&&r.nsecs===void 0&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");di=p,pi=v,hi=o,p+=122192928e5;var I=((p&268435455)*1e4+v)%4294967296;s[n++]=I>>>24&255,s[n++]=I>>>16&255,s[n++]=I>>>8&255,s[n++]=I&255;var q=p/4294967296*1e4&268435455;s[n++]=q>>>8&255,s[n++]=q&255,s[n++]=q>>>24&15|16,s[n++]=q>>>16&255,s[n++]=o>>>8|128,s[n++]=o&255;for(var A=0;A<6;++A)s[n+A]=i[A];return t||Mr(s)}function To(r){if(!kr(r))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(r.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(r.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(r.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(r.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(r.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function fu(r){r=unescape(encodeURIComponent(r));for(var t=[],e=0;e<r.length;++e)t.push(r.charCodeAt(e));return t}var lu="6ba7b810-9dad-11d1-80b4-00c04fd430c8",hu="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Lo(r,t,e){function n(s,i,o,u){if(typeof s=="string"&&(s=fu(s)),typeof i=="string"&&(i=To(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var p=new Uint8Array(16+s.length);if(p.set(i),p.set(s,i.length),p=e(p),p[6]=p[6]&15|t,p[8]=p[8]&63|128,o){u=u||0;for(var v=0;v<16;++v)o[u+v]=p[v];return o}return Mr(p)}try{n.name=r}catch{}return n.DNS=lu,n.URL=hu,n}function du(r){if(typeof r=="string"){var t=unescape(encodeURIComponent(r));r=new Uint8Array(t.length);for(var e=0;e<t.length;++e)r[e]=t.charCodeAt(e)}return pu(gu(yu(r),r.length*8))}function pu(r){for(var t=[],e=r.length*32,n="0123456789abcdef",s=0;s<e;s+=8){var i=r[s>>5]>>>s%32&255,o=parseInt(n.charAt(i>>>4&15)+n.charAt(i&15),16);t.push(o)}return t}function Co(r){return(r+64>>>9<<4)+14+1}function gu(r,t){r[t>>5]|=128<<t%32,r[Co(t)-1]=t;for(var e=1732584193,n=-271733879,s=-1732584194,i=271733878,o=0;o<r.length;o+=16){var u=e,p=n,v=s,S=i;e=ue(e,n,s,i,r[o],7,-680876936),i=ue(i,e,n,s,r[o+1],12,-389564586),s=ue(s,i,e,n,r[o+2],17,606105819),n=ue(n,s,i,e,r[o+3],22,-1044525330),e=ue(e,n,s,i,r[o+4],7,-176418897),i=ue(i,e,n,s,r[o+5],12,1200080426),s=ue(s,i,e,n,r[o+6],17,-1473231341),n=ue(n,s,i,e,r[o+7],22,-45705983),e=ue(e,n,s,i,r[o+8],7,1770035416),i=ue(i,e,n,s,r[o+9],12,-1958414417),s=ue(s,i,e,n,r[o+10],17,-42063),n=ue(n,s,i,e,r[o+11],22,-1990404162),e=ue(e,n,s,i,r[o+12],7,1804603682),i=ue(i,e,n,s,r[o+13],12,-40341101),s=ue(s,i,e,n,r[o+14],17,-1502002290),n=ue(n,s,i,e,r[o+15],22,1236535329),e=fe(e,n,s,i,r[o+1],5,-165796510),i=fe(i,e,n,s,r[o+6],9,-1069501632),s=fe(s,i,e,n,r[o+11],14,643717713),n=fe(n,s,i,e,r[o],20,-373897302),e=fe(e,n,s,i,r[o+5],5,-701558691),i=fe(i,e,n,s,r[o+10],9,38016083),s=fe(s,i,e,n,r[o+15],14,-660478335),n=fe(n,s,i,e,r[o+4],20,-405537848),e=fe(e,n,s,i,r[o+9],5,568446438),i=fe(i,e,n,s,r[o+14],9,-1019803690),s=fe(s,i,e,n,r[o+3],14,-187363961),n=fe(n,s,i,e,r[o+8],20,1163531501),e=fe(e,n,s,i,r[o+13],5,-1444681467),i=fe(i,e,n,s,r[o+2],9,-51403784),s=fe(s,i,e,n,r[o+7],14,1735328473),n=fe(n,s,i,e,r[o+12],20,-1926607734),e=le(e,n,s,i,r[o+5],4,-378558),i=le(i,e,n,s,r[o+8],11,-2022574463),s=le(s,i,e,n,r[o+11],16,1839030562),n=le(n,s,i,e,r[o+14],23,-35309556),e=le(e,n,s,i,r[o+1],4,-1530992060),i=le(i,e,n,s,r[o+4],11,1272893353),s=le(s,i,e,n,r[o+7],16,-155497632),n=le(n,s,i,e,r[o+10],23,-1094730640),e=le(e,n,s,i,r[o+13],4,681279174),i=le(i,e,n,s,r[o],11,-358537222),s=le(s,i,e,n,r[o+3],16,-722521979),n=le(n,s,i,e,r[o+6],23,76029189),e=le(e,n,s,i,r[o+9],4,-640364487),i=le(i,e,n,s,r[o+12],11,-421815835),s=le(s,i,e,n,r[o+15],16,530742520),n=le(n,s,i,e,r[o+2],23,-995338651),e=he(e,n,s,i,r[o],6,-198630844),i=he(i,e,n,s,r[o+7],10,1126891415),s=he(s,i,e,n,r[o+14],15,-1416354905),n=he(n,s,i,e,r[o+5],21,-57434055),e=he(e,n,s,i,r[o+12],6,1700485571),i=he(i,e,n,s,r[o+3],10,-1894986606),s=he(s,i,e,n,r[o+10],15,-1051523),n=he(n,s,i,e,r[o+1],21,-2054922799),e=he(e,n,s,i,r[o+8],6,1873313359),i=he(i,e,n,s,r[o+15],10,-30611744),s=he(s,i,e,n,r[o+6],15,-1560198380),n=he(n,s,i,e,r[o+13],21,1309151649),e=he(e,n,s,i,r[o+4],6,-145523070),i=he(i,e,n,s,r[o+11],10,-1120210379),s=he(s,i,e,n,r[o+2],15,718787259),n=he(n,s,i,e,r[o+9],21,-343485551),e=je(e,u),n=je(n,p),s=je(s,v),i=je(i,S)}return[e,n,s,i]}function yu(r){if(r.length===0)return[];for(var t=r.length*8,e=new Uint32Array(Co(t)),n=0;n<t;n+=8)e[n>>5]|=(r[n/8]&255)<<n%32;return e}function je(r,t){var e=(r&65535)+(t&65535),n=(r>>16)+(t>>16)+(e>>16);return n<<16|e&65535}function mu(r,t){return r<<t|r>>>32-t}function Rr(r,t,e,n,s,i){return je(mu(je(je(t,r),je(n,i)),s),e)}function ue(r,t,e,n,s,i,o){return Rr(t&e|~t&n,r,t,s,i,o)}function fe(r,t,e,n,s,i,o){return Rr(t&n|e&~n,r,t,s,i,o)}function le(r,t,e,n,s,i,o){return Rr(t^e^n,r,t,s,i,o)}function he(r,t,e,n,s,i,o){return Rr(e^(t|~n),r,t,s,i,o)}var wu=Lo("v3",48,du);function bu(r,t,e){r=r||{};var n=r.random||(r.rng||Ro)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){e=e||0;for(var s=0;s<16;++s)t[e+s]=n[s];return t}return Mr(n)}function vu(r,t,e,n){switch(r){case 0:return t&e^~t&n;case 1:return t^e^n;case 2:return t&e^t&n^e&n;case 3:return t^e^n}}function gi(r,t){return r<<t|r>>>32-t}function xu(r){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var s=0;s<n.length;++s)r.push(n.charCodeAt(s))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var i=r.length/4+2,o=Math.ceil(i/16),u=new Array(o),p=0;p<o;++p){for(var v=new Uint32Array(16),S=0;S<16;++S)v[S]=r[p*64+S*4]<<24|r[p*64+S*4+1]<<16|r[p*64+S*4+2]<<8|r[p*64+S*4+3];u[p]=v}u[o-1][14]=(r.length-1)*8/Math.pow(2,32),u[o-1][14]=Math.floor(u[o-1][14]),u[o-1][15]=(r.length-1)*8&4294967295;for(var I=0;I<o;++I){for(var q=new Uint32Array(80),A=0;A<16;++A)q[A]=u[I][A];for(var F=16;F<80;++F)q[F]=gi(q[F-3]^q[F-8]^q[F-14]^q[F-16],1);for(var R=e[0],k=e[1],W=e[2],G=e[3],j=e[4],tt=0;tt<80;++tt){var $=Math.floor(tt/20),X=gi(R,5)+vu($,k,W,G)+j+t[$]+q[tt]>>>0;j=G,G=W,W=gi(k,30)>>>0,k=R,R=X}e[0]=e[0]+R>>>0,e[1]=e[1]+k>>>0,e[2]=e[2]+W>>>0,e[3]=e[3]+G>>>0,e[4]=e[4]+j>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var Su=Lo("v5",80,xu);const Eu="00000000-0000-0000-0000-000000000000";function Bu(r){if(!kr(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const _u=Object.freeze(Object.defineProperty({__proto__:null,NIL:Eu,parse:To,stringify:Mr,v1:uu,v3:wu,v4:bu,v5:Su,validate:kr,version:Bu},Symbol.toStringTag,{value:"Module"})),Uo=Ui(_u);var yi,Us;function Au(){if(Us)return yi;Us=1;const r=Uo.v4;return yi=function(e,n,s,i){if(typeof e!="string")throw new TypeError(e+" must be a string");i=i||{};const o=typeof i.version=="number"?i.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const u={method:e};if(o===2&&(u.jsonrpc="2.0"),n){if(typeof n!="object"&&!Array.isArray(n))throw new TypeError(n+" must be an object, array or omitted");u.params=n}if(typeof s>"u"){const p=typeof i.generator=="function"?i.generator:function(){return r()};u.id=p(u,i)}else o===2&&s===null?i.notificationIdNull&&(u.id=null):u.id=s;return u},yi}var mi,Fs;function Iu(){if(Fs)return mi;Fs=1;const r=Uo.v4,t=Au(),e=function(n,s){if(!(this instanceof e))return new e(n,s);s||(s={}),this.options={reviver:typeof s.reviver<"u"?s.reviver:null,replacer:typeof s.replacer<"u"?s.replacer:null,generator:typeof s.generator<"u"?s.generator:function(){return r()},version:typeof s.version<"u"?s.version:2,notificationIdNull:typeof s.notificationIdNull=="boolean"?s.notificationIdNull:!1},this.callServer=n};return mi=e,e.prototype.request=function(n,s,i,o){const u=this;let p=null;const v=Array.isArray(n)&&typeof s=="function";if(this.options.version===1&&v)throw new TypeError("JSON-RPC 1.0 does not support batching");if(v||!v&&n&&typeof n=="object"&&typeof s=="function")o=s,p=n;else{typeof i=="function"&&(o=i,i=void 0);const q=typeof o=="function";try{p=t(n,s,i,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(A){if(q)return o(A);throw A}if(!q)return p}let I;try{I=JSON.stringify(p,this.options.replacer)}catch(q){return o(q)}return this.callServer(I,function(q,A){u._parseResponse(q,A,o)}),p},e.prototype._parseResponse=function(n,s,i){if(n){i(n);return}if(!s)return i();let o;try{o=JSON.parse(s,this.options.reviver)}catch(u){return i(u)}if(i.length===3)if(Array.isArray(o)){const u=function(v){return typeof v.error<"u"},p=function(v){return!u(v)};return i(null,o.filter(u),o.filter(p))}else return i(null,o.error,o.result);i(null,o)},mi}var ku=Iu();const Mu=Sr(ku);var wi={exports:{}},Ns;function Ru(){return Ns||(Ns=1,function(r){var t=Object.prototype.hasOwnProperty,e="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(e=!1));function s(p,v,S){this.fn=p,this.context=v,this.once=S||!1}function i(p,v,S,I,q){if(typeof S!="function")throw new TypeError("The listener must be a function");var A=new s(S,I||p,q),F=e?e+v:v;return p._events[F]?p._events[F].fn?p._events[F]=[p._events[F],A]:p._events[F].push(A):(p._events[F]=A,p._eventsCount++),p}function o(p,v){--p._eventsCount===0?p._events=new n:delete p._events[v]}function u(){this._events=new n,this._eventsCount=0}u.prototype.eventNames=function(){var v=[],S,I;if(this._eventsCount===0)return v;for(I in S=this._events)t.call(S,I)&&v.push(e?I.slice(1):I);return Object.getOwnPropertySymbols?v.concat(Object.getOwnPropertySymbols(S)):v},u.prototype.listeners=function(v){var S=e?e+v:v,I=this._events[S];if(!I)return[];if(I.fn)return[I.fn];for(var q=0,A=I.length,F=new Array(A);q<A;q++)F[q]=I[q].fn;return F},u.prototype.listenerCount=function(v){var S=e?e+v:v,I=this._events[S];return I?I.fn?1:I.length:0},u.prototype.emit=function(v,S,I,q,A,F){var R=e?e+v:v;if(!this._events[R])return!1;var k=this._events[R],W=arguments.length,G,j;if(k.fn){switch(k.once&&this.removeListener(v,k.fn,void 0,!0),W){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,S),!0;case 3:return k.fn.call(k.context,S,I),!0;case 4:return k.fn.call(k.context,S,I,q),!0;case 5:return k.fn.call(k.context,S,I,q,A),!0;case 6:return k.fn.call(k.context,S,I,q,A,F),!0}for(j=1,G=new Array(W-1);j<W;j++)G[j-1]=arguments[j];k.fn.apply(k.context,G)}else{var tt=k.length,$;for(j=0;j<tt;j++)switch(k[j].once&&this.removeListener(v,k[j].fn,void 0,!0),W){case 1:k[j].fn.call(k[j].context);break;case 2:k[j].fn.call(k[j].context,S);break;case 3:k[j].fn.call(k[j].context,S,I);break;case 4:k[j].fn.call(k[j].context,S,I,q);break;default:if(!G)for($=1,G=new Array(W-1);$<W;$++)G[$-1]=arguments[$];k[j].fn.apply(k[j].context,G)}}return!0},u.prototype.on=function(v,S,I){return i(this,v,S,I,!1)},u.prototype.once=function(v,S,I){return i(this,v,S,I,!0)},u.prototype.removeListener=function(v,S,I,q){var A=e?e+v:v;if(!this._events[A])return this;if(!S)return o(this,A),this;var F=this._events[A];if(F.fn)F.fn===S&&(!q||F.once)&&(!I||F.context===I)&&o(this,A);else{for(var R=0,k=[],W=F.length;R<W;R++)(F[R].fn!==S||q&&!F[R].once||I&&F[R].context!==I)&&k.push(F[R]);k.length?this._events[A]=k.length===1?k[0]:k:o(this,A)}return this},u.prototype.removeAllListeners=function(v){var S;return v?(S=e?e+v:v,this._events[S]&&o(this,S)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=e,u.EventEmitter=u,r.exports=u}(wi)),wi.exports}var Tu=Ru();const Fo=Sr(Tu);var Lu=class extends Fo{constructor(t,e,n){super();ne(this,"socket");this.socket=new window.WebSocket(t,n),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=s=>this.emit("message",s.data),this.socket.onerror=s=>this.emit("error",s),this.socket.onclose=s=>{this.emit("close",s.code,s.reason)}}send(t,e,n){const s=n||e;try{this.socket.send(t),s()}catch(i){s(i)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,n){this.socket.addEventListener(t,e,n)}};function Cu(r,t){return new Lu(r,t)}var Uu=class{encode(r){return JSON.stringify(r)}decode(r){return JSON.parse(r)}},Fu=class extends Fo{constructor(t,e="ws://localhost:8080",{autoconnect:n=!0,reconnect:s=!0,reconnect_interval:i=1e3,max_reconnects:o=5,...u}={},p,v){super();ne(this,"address");ne(this,"rpc_id");ne(this,"queue");ne(this,"options");ne(this,"autoconnect");ne(this,"ready");ne(this,"reconnect");ne(this,"reconnect_timer_id");ne(this,"reconnect_interval");ne(this,"max_reconnects");ne(this,"rest_options");ne(this,"current_reconnects");ne(this,"generate_request_id");ne(this,"socket");ne(this,"webSocketFactory");ne(this,"dataPack");this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=n,this.ready=!1,this.reconnect=s,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=o,this.rest_options=u,this.current_reconnects=0,this.generate_request_id=p||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),v?this.dataPack=v:this.dataPack=new Uu,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,n,s){return!s&&typeof n=="object"&&(s=n,n=null),new Promise((i,o)=>{if(!this.ready)return o(new Error("socket not ready"));const u=this.generate_request_id(t,e),p={jsonrpc:"2.0",method:t,params:e||void 0,id:u};this.socket.send(this.dataPack.encode(p),s,v=>{if(v)return o(v);this.queue[u]={promise:[i,o]},n&&(this.queue[u].timeout=setTimeout(()=>{delete this.queue[u],o(new Error("reply timeout"))},n))})})}async login(t){const e=await this.call("rpc.login",t);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((n,s)=>{if(!this.ready)return s(new Error("socket not ready"));const i={jsonrpc:"2.0",method:t,params:e};this.socket.send(this.dataPack.encode(i),o=>{if(o)return s(o);n()})})}async subscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.on",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.off",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:n})=>{n instanceof ArrayBuffer&&(n=lt.Buffer.from(n).toString());try{n=this.dataPack.decode(n)}catch{return}if(n.notification&&this.listeners(n.notification).length){if(!Object.keys(n.params).length)return this.emit(n.notification);const s=[n.notification];if(n.params.constructor===Object)s.push(n.params);else for(let i=0;i<n.params.length;i++)s.push(n.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,s)})}if(!this.queue[n.id])return n.method?Promise.resolve().then(()=>{this.emit(n.method,n==null?void 0:n.params)}):void 0;"error"in n=="result"in n&&this.queue[n.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[n.id].timeout&&clearTimeout(this.queue[n.id].timeout),n.error?this.queue[n.id].promise[1](n.error):this.queue[n.id].promise[0](n.result),delete this.queue[n.id]}),this.socket.addEventListener("error",n=>this.emit("error",n)),this.socket.addEventListener("close",({code:n,reason:s})=>{this.ready&&setTimeout(()=>this.emit("close",n,s),0),this.ready=!1,this.socket=void 0,n!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval)))})}};class No extends ro{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,ya(t);const n=Oi(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?t.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),wn(i)}update(t){return ar(this),this.iHash.update(t),this}digestInto(t){ar(this),Me(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:u}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=u,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Po=(r,t,e)=>new No(r,t).update(e).digest();Po.create=(r,t)=>new No(r,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ps(r){r.lowS!==void 0&&rn("lowS",r.lowS),r.prehash!==void 0&&rn("prehash",r.prehash)}class Nu extends Error{constructor(t=""){super(t)}}const Ne={Err:Nu,_tlv:{encode:(r,t)=>{const{Err:e}=Ne;if(r<0||r>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");const n=t.length/2,s=Qn(n);if(s.length/2&128)throw new e("tlv.encode: long form length too big");const i=n>127?Qn(s.length/2|128):"";return Qn(r)+i+s+t},decode(r,t){const{Err:e}=Ne;let n=0;if(r<0||r>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[n++]!==r)throw new e("tlv.decode: wrong tlv");const s=t[n++],i=!!(s&128);let o=0;if(!i)o=s;else{const p=s&127;if(!p)throw new e("tlv.decode(long): indefinite length not supported");if(p>4)throw new e("tlv.decode(long): byte length is too big");const v=t.subarray(n,n+p);if(v.length!==p)throw new e("tlv.decode: length bytes not complete");if(v[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(const S of v)o=o<<8|S;if(n+=p,o<128)throw new e("tlv.decode(long): not minimal encoding")}const u=t.subarray(n,n+o);if(u.length!==o)throw new e("tlv.decode: wrong value length");return{v:u,l:t.subarray(n+o)}}},_int:{encode(r){const{Err:t}=Ne;if(r<Un)throw new t("integer: negative integers are not allowed");let e=Qn(r);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return e},decode(r){const{Err:t}=Ne;if(r[0]&128)throw new t("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Er(r)}},toSig(r){const{Err:t,_int:e,_tlv:n}=Ne,s=Pt("signature",r),{v:i,l:o}=n.decode(48,s);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:u,l:p}=n.decode(2,i),{v,l:S}=n.decode(2,p);if(S.length)throw new t("invalid signature: left bytes after parsing");return{r:e.decode(u),s:e.decode(v)}},hexFromSig(r){const{_tlv:t,_int:e}=Ne,n=t.encode(2,e.encode(r.r)),s=t.encode(2,e.encode(r.s)),i=n+s;return t.encode(48,i)}},Un=BigInt(0),Fn=BigInt(1),Pu=BigInt(2),nr=BigInt(3),Ou=BigInt(4);function qu(r,t,e){function n(s){const i=r.sqr(s),o=r.mul(i,s);return r.add(r.add(o,r.mul(s,t)),e)}return n}function Oo(r,t,e){const{BYTES:n}=r;function s(i){let o;if(typeof i=="bigint")o=i;else{let u=Pt("private key",i);if(t){if(!t.includes(u.length*2))throw new Error("invalid private key");const p=new Uint8Array(n);p.set(u,p.length-u.length),u=p}try{o=r.fromBytes(u)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof i}`)}}if(e&&(o=r.create(o)),!r.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function Du(r,t={}){const{Fp:e,Fn:n}=Eo("weierstrass",r,t),{h:s,n:i}=r;Kn(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=t;if(o&&(!e.is0(r.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function u(){if(!e.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function p(et,C,T){const{x:L,y:O}=C.toAffine(),m=e.toBytes(L);if(rn("isCompressed",T),T){u();const a=!e.isOdd(O);return De(qo(a),m)}else return De(Uint8Array.of(4),m,e.toBytes(O))}function v(et){Me(et);const C=e.BYTES,T=C+1,L=2*C+1,O=et.length,m=et[0],a=et.subarray(1);if(O===T&&(m===2||m===3)){const d=e.fromBytes(a);if(!e.isValid(d))throw new Error("bad point: is not on curve, wrong x");const g=q(d);let x;try{x=e.sqrt(g)}catch(P){const b=P instanceof Error?": "+P.message:"";throw new Error("bad point: is not on curve, sqrt error"+b)}u();const B=e.isOdd(x);return(m&1)===1!==B&&(x=e.neg(x)),{x:d,y:x}}else if(O===L&&m===4){const d=e.fromBytes(a.subarray(C*0,C*1)),g=e.fromBytes(a.subarray(C*1,C*2));if(!A(d,g))throw new Error("bad point: is not on curve");return{x:d,y:g}}else throw new Error(`bad point: got length ${O}, expected compressed=${T} or uncompressed=${L}`)}const S=t.toBytes||p,I=t.fromBytes||v,q=qu(e,r.a,r.b);function A(et,C){const T=e.sqr(C),L=q(et);return e.eql(T,L)}if(!A(r.Gx,r.Gy))throw new Error("bad curve params: generator point");const F=e.mul(e.pow(r.a,nr),Ou),R=e.mul(e.sqr(r.b),BigInt(27));if(e.is0(e.add(F,R)))throw new Error("bad curve params: a or b");function k(et,C,T=!1){if(!e.isValid(C)||T&&e.is0(C))throw new Error(`bad point coordinate ${et}`);return C}function W(et){if(!(et instanceof $))throw new Error("ProjectivePoint expected")}const G=cr((et,C)=>{const{px:T,py:L,pz:O}=et;if(e.eql(O,e.ONE))return{x:T,y:L};const m=et.is0();C==null&&(C=m?e.ONE:e.inv(O));const a=e.mul(T,C),d=e.mul(L,C),g=e.mul(O,C);if(m)return{x:e.ZERO,y:e.ZERO};if(!e.eql(g,e.ONE))throw new Error("invZ was invalid");return{x:a,y:d}}),j=cr(et=>{if(et.is0()){if(t.allowInfinityPoint&&!e.is0(et.py))return;throw new Error("bad point: ZERO")}const{x:C,y:T}=et.toAffine();if(!e.isValid(C)||!e.isValid(T))throw new Error("bad point: x or y not field elements");if(!A(C,T))throw new Error("bad point: equation left != right");if(!et.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function tt(et,C,T,L,O){return T=new $(e.mul(T.px,et),T.py,T.pz),C=Cn(L,C),T=Cn(O,T),C.add(T)}class ${constructor(C,T,L){this.px=k("x",C),this.py=k("y",T,!0),this.pz=k("z",L),Object.freeze(this)}static fromAffine(C){const{x:T,y:L}=C||{};if(!C||!e.isValid(T)||!e.isValid(L))throw new Error("invalid affine point");if(C instanceof $)throw new Error("projective point not allowed");return e.is0(T)&&e.is0(L)?$.ZERO:new $(T,L,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(C){return wo($,"pz",C)}static fromBytes(C){return Me(C),$.fromHex(C)}static fromHex(C){const T=$.fromAffine(I(Pt("pointHex",C)));return T.assertValidity(),T}static fromPrivateKey(C){const T=Oo(n,t.allowedPrivateKeyLengths,t.wrapPrivateKey);return $.BASE.multiply(T(C))}static msm(C,T){return So($,n,C,T)}precompute(C=8,T=!0){return st.setWindowSize(this,C),T||this.multiply(nr),this}_setWindowSize(C){this.precompute(C)}assertValidity(){j(this)}hasEvenY(){const{y:C}=this.toAffine();if(!e.isOdd)throw new Error("Field doesn't support isOdd");return!e.isOdd(C)}equals(C){W(C);const{px:T,py:L,pz:O}=this,{px:m,py:a,pz:d}=C,g=e.eql(e.mul(T,d),e.mul(m,O)),x=e.eql(e.mul(L,d),e.mul(a,O));return g&&x}negate(){return new $(this.px,e.neg(this.py),this.pz)}double(){const{a:C,b:T}=r,L=e.mul(T,nr),{px:O,py:m,pz:a}=this;let d=e.ZERO,g=e.ZERO,x=e.ZERO,B=e.mul(O,O),U=e.mul(m,m),P=e.mul(a,a),b=e.mul(O,m);return b=e.add(b,b),x=e.mul(O,a),x=e.add(x,x),d=e.mul(C,x),g=e.mul(L,P),g=e.add(d,g),d=e.sub(U,g),g=e.add(U,g),g=e.mul(d,g),d=e.mul(b,d),x=e.mul(L,x),P=e.mul(C,P),b=e.sub(B,P),b=e.mul(C,b),b=e.add(b,x),x=e.add(B,B),B=e.add(x,B),B=e.add(B,P),B=e.mul(B,b),g=e.add(g,B),P=e.mul(m,a),P=e.add(P,P),B=e.mul(P,b),d=e.sub(d,B),x=e.mul(P,U),x=e.add(x,x),x=e.add(x,x),new $(d,g,x)}add(C){W(C);const{px:T,py:L,pz:O}=this,{px:m,py:a,pz:d}=C;let g=e.ZERO,x=e.ZERO,B=e.ZERO;const U=r.a,P=e.mul(r.b,nr);let b=e.mul(T,m),c=e.mul(L,a),f=e.mul(O,d),w=e.add(T,L),_=e.add(m,a);w=e.mul(w,_),_=e.add(b,c),w=e.sub(w,_),_=e.add(T,O);let D=e.add(m,d);return _=e.mul(_,D),D=e.add(b,f),_=e.sub(_,D),D=e.add(L,O),g=e.add(a,d),D=e.mul(D,g),g=e.add(c,f),D=e.sub(D,g),B=e.mul(U,_),g=e.mul(P,f),B=e.add(g,B),g=e.sub(c,B),B=e.add(c,B),x=e.mul(g,B),c=e.add(b,b),c=e.add(c,b),f=e.mul(U,f),_=e.mul(P,_),c=e.add(c,f),f=e.sub(b,f),f=e.mul(U,f),_=e.add(_,f),b=e.mul(c,_),x=e.add(x,b),b=e.mul(D,_),g=e.mul(w,g),g=e.sub(g,b),b=e.mul(w,c),B=e.mul(D,B),B=e.add(B,b),new $(g,x,B)}subtract(C){return this.add(C.negate())}is0(){return this.equals($.ZERO)}multiply(C){const{endo:T}=t;if(!n.isValidNot0(C))throw new Error("invalid scalar: out of range");let L,O;const m=a=>st.wNAFCached(this,a,$.normalizeZ);if(T){const{k1neg:a,k1:d,k2neg:g,k2:x}=T.splitScalar(C),{p:B,f:U}=m(d),{p:P,f:b}=m(x);O=U.add(b),L=tt(T.beta,B,P,a,g)}else{const{p:a,f:d}=m(C);L=a,O=d}return $.normalizeZ([L,O])[0]}multiplyUnsafe(C){const{endo:T}=t,L=this;if(!n.isValid(C))throw new Error("invalid scalar: out of range");if(C===Un||L.is0())return $.ZERO;if(C===Fn)return L;if(st.hasPrecomputes(this))return this.multiply(C);if(T){const{k1neg:O,k1:m,k2neg:a,k2:d}=T.splitScalar(C),{p1:g,p2:x}=Ja($,L,m,d);return tt(T.beta,g,x,O,a)}else return st.wNAFCachedUnsafe(L,C)}multiplyAndAddUnsafe(C,T,L){const O=this.multiplyUnsafe(T).add(C.multiplyUnsafe(L));return O.is0()?void 0:O}toAffine(C){return G(this,C)}isTorsionFree(){const{isTorsionFree:C}=t;return s===Fn?!0:C?C($,this):st.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:C}=t;return s===Fn?this:C?C($,this):this.multiplyUnsafe(s)}toBytes(C=!0){return rn("isCompressed",C),this.assertValidity(),S($,this,C)}toRawBytes(C=!0){return this.toBytes(C)}toHex(C=!0){return bn(this.toBytes(C))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}$.BASE=new $(r.Gx,r.Gy,e.ONE),$.ZERO=new $(e.ZERO,e.ONE,e.ZERO),$.Fp=e,$.Fn=n;const X=n.BITS,st=xo($,t.endo?Math.ceil(X/2):X);return $}function qo(r){return Uint8Array.of(r?2:3)}function zu(r,t,e={}){Kn(t,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=t.randomBytes||so,s=t.hmac||((L,...O)=>Po(t.hash,L,De(...O))),{Fp:i,Fn:o}=r,{ORDER:u,BITS:p}=o;function v(L){const O=u>>Fn;return L>O}function S(L){return v(L)?o.neg(L):L}function I(L,O){if(!o.isValidNot0(O))throw new Error(`invalid signature ${L}: out of range 1..CURVE.n`)}class q{constructor(O,m,a){I("r",O),I("s",m),this.r=O,this.s=m,a!=null&&(this.recovery=a),Object.freeze(this)}static fromCompact(O){const m=o.BYTES,a=Pt("compactSignature",O,m*2);return new q(o.fromBytes(a.subarray(0,m)),o.fromBytes(a.subarray(m,m*2)))}static fromDER(O){const{r:m,s:a}=Ne.toSig(Pt("DER",O));return new q(m,a)}assertValidity(){}addRecoveryBit(O){return new q(this.r,this.s,O)}recoverPublicKey(O){const m=i.ORDER,{r:a,s:d,recovery:g}=this;if(g==null||![0,1,2,3].includes(g))throw new Error("recovery id invalid");if(u*Pu<m&&g>1)throw new Error("recovery id is ambiguous for h>1 curve");const B=g===2||g===3?a+u:a;if(!i.isValid(B))throw new Error("recovery id 2 or 3 invalid");const U=i.toBytes(B),P=r.fromHex(De(qo((g&1)===0),U)),b=o.inv(B),c=j(Pt("msgHash",O)),f=o.create(-c*b),w=o.create(d*b),_=r.BASE.multiplyUnsafe(f).add(P.multiplyUnsafe(w));if(_.is0())throw new Error("point at infinify");return _.assertValidity(),_}hasHighS(){return v(this.s)}normalizeS(){return this.hasHighS()?new q(this.r,o.neg(this.s),this.recovery):this}toBytes(O){if(O==="compact")return De(o.toBytes(this.r),o.toBytes(this.s));if(O==="der")return Pi(Ne.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return bn(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return bn(this.toBytes("compact"))}}const A=Oo(o,e.allowedPrivateKeyLengths,e.wrapPrivateKey),F={isValidPrivateKey(L){try{return A(L),!0}catch{return!1}},normPrivateKeyToScalar:A,randomPrivateKey:()=>{const L=u;return Za(n(mo(L)),L)},precompute(L=8,O=r.BASE){return O.precompute(L,!1)}};function R(L,O=!0){return r.fromPrivateKey(L).toBytes(O)}function k(L){if(typeof L=="bigint")return!1;if(L instanceof r)return!0;const m=Pt("key",L).length,a=i.BYTES,d=a+1,g=2*a+1;if(!(e.allowedPrivateKeyLengths||o.BYTES===d))return m===d||m===g}function W(L,O,m=!0){if(k(L)===!0)throw new Error("first arg must be private key");if(k(O)===!1)throw new Error("second arg must be public key");return r.fromHex(O).multiply(A(L)).toBytes(m)}const G=t.bits2int||function(L){if(L.length>8192)throw new Error("input is too large");const O=Er(L),m=L.length*8-p;return m>0?O>>BigInt(m):O},j=t.bits2int_modN||function(L){return o.create(G(L))},tt=_r(p);function $(L){return pn("num < 2^"+p,L,Un,tt),o.toBytes(L)}function X(L,O,m=st){if(["recovered","canonical"].some(w=>w in m))throw new Error("sign() legacy options not supported");const{hash:a}=t;let{lowS:d,prehash:g,extraEntropy:x}=m;d==null&&(d=!0),L=Pt("msgHash",L),Ps(m),g&&(L=Pt("prehashed msgHash",a(L)));const B=j(L),U=A(O),P=[$(U),$(B)];if(x!=null&&x!==!1){const w=x===!0?n(i.BYTES):x;P.push(Pt("extraEntropy",w))}const b=De(...P),c=B;function f(w){const _=G(w);if(!o.isValidNot0(_))return;const D=o.inv(_),Z=r.BASE.multiply(_).toAffine(),it=o.create(Z.x);if(it===Un)return;const ct=o.create(D*o.create(c+it*U));if(ct===Un)return;let re=(Z.x===it?0:2)|Number(Z.y&Fn),mt=ct;return d&&v(ct)&&(mt=S(ct),re^=1),new q(it,mt,re)}return{seed:b,k2sig:f}}const st={lowS:t.lowS,prehash:!1},et={lowS:t.lowS,prehash:!1};function C(L,O,m=st){const{seed:a,k2sig:d}=X(L,O,m);return qa(t.hash.outputLen,o.BYTES,s)(a,d)}r.BASE.precompute(8);function T(L,O,m,a=et){const d=L;O=Pt("msgHash",O),m=Pt("publicKey",m),Ps(a);const{lowS:g,prehash:x,format:B}=a;if("strict"in a)throw new Error("options.strict was renamed to lowS");if(B!==void 0&&!["compact","der","js"].includes(B))throw new Error('format must be "compact", "der" or "js"');const U=typeof d=="string"||Ni(d),P=!U&&!B&&typeof d=="object"&&d!==null&&typeof d.r=="bigint"&&typeof d.s=="bigint";if(!U&&!P)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let b,c;try{if(P)if(B===void 0||B==="js")b=new q(d.r,d.s);else throw new Error("invalid format");if(U){try{B!=="compact"&&(b=q.fromDER(d))}catch(mt){if(!(mt instanceof Ne.Err))throw mt}!b&&B!=="der"&&(b=q.fromCompact(d))}c=r.fromHex(m)}catch{return!1}if(!b||g&&b.hasHighS())return!1;x&&(O=t.hash(O));const{r:f,s:w}=b,_=j(O),D=o.inv(w),Z=o.create(_*D),it=o.create(f*D),ct=r.BASE.multiplyUnsafe(Z).add(c.multiplyUnsafe(it));return ct.is0()?!1:o.create(ct.x)===f}return Object.freeze({getPublicKey:R,getSharedSecret:W,sign:C,verify:T,utils:F,Point:r,Signature:q})}function Ku(r){const t={a:r.a,b:r.b,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},e=r.Fp,n=An(t.n,r.nBitLength),s={Fp:e,Fn:n,allowedPrivateKeyLengths:r.allowedPrivateKeyLengths,allowInfinityPoint:r.allowInfinityPoint,endo:r.endo,wrapPrivateKey:r.wrapPrivateKey,isTorsionFree:r.isTorsionFree,clearCofactor:r.clearCofactor,fromBytes:r.fromBytes,toBytes:r.toBytes};return{CURVE:t,curveOpts:s}}function Hu(r){const{CURVE:t,curveOpts:e}=Ku(r),n={hash:r.hash,hmac:r.hmac,randomBytes:r.randomBytes,lowS:r.lowS,bits2int:r.bits2int,bits2int_modN:r.bits2int_modN};return{CURVE:t,curveOpts:e,ecdsaOpts:n}}function Wu(r,t){return Object.assign({},t,{ProjectivePoint:t.Point,CURVE:r})}function $u(r){const{CURVE:t,curveOpts:e,ecdsaOpts:n}=Hu(r),s=Du(t,e),i=zu(s,n,e);return Wu(r,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Vu(r,t){const e=n=>$u({...r,hash:n});return{...e(t),create:e}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pr={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const Gu=BigInt(1),Mi=BigInt(2),Os=(r,t)=>(r+t/Mi)/t;function ju(r){const t=pr.p,e=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),u=BigInt(44),p=BigInt(88),v=r*r*r%t,S=v*v*r%t,I=Ft(S,e,t)*S%t,q=Ft(I,e,t)*S%t,A=Ft(q,Mi,t)*v%t,F=Ft(A,s,t)*A%t,R=Ft(F,i,t)*F%t,k=Ft(R,u,t)*R%t,W=Ft(k,p,t)*k%t,G=Ft(W,u,t)*R%t,j=Ft(G,e,t)*S%t,tt=Ft(j,o,t)*F%t,$=Ft(tt,n,t)*v%t,X=Ft($,Mi,t);if(!Ri.eql(Ri.sqr(X),r))throw new Error("Cannot find square root");return X}const Ri=An(pr.p,void 0,void 0,{sqrt:ju}),Zu=Vu({...pr,Fp:Ri,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const t=pr.n,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Gu*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=e,o=BigInt("0x100000000000000000000000000000000"),u=Os(i*r,t),p=Os(-n*r,t);let v=Ot(r-u*e-p*s,t),S=Ot(-u*n-p*i,t);const I=v>o,q=S>o;if(I&&(v=t-v),q&&(S=t-S),v>o||S>o)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:I,k1:v,k2neg:q,k2:S}}}},co);Hn.utils.randomPrivateKey;Hn.getPublicKey;function qs(r){try{return Hn.ExtendedPoint.fromHex(r),!0}catch{return!1}}const Do=(r,t)=>Hn.sign(r,t.slice(0,32)),Yu=Hn.verify,ie=r=>lt.Buffer.isBuffer(r)?r:r instanceof Uint8Array?lt.Buffer.from(r.buffer,r.byteOffset,r.byteLength):lt.Buffer.from(r);class Xu{constructor(t){Object.assign(this,t)}encode(){return lt.Buffer.from(fi.serialize(or,this))}static decode(t){return fi.deserialize(or,this,t)}static decodeUnchecked(t){return fi.deserializeUnchecked(or,this,t)}}const or=new Map;var zo;const Ju=32,Ze=32;function Qu(r){return r._bn!==void 0}let Ds=1;class ot extends Xu{constructor(t){if(super({}),this._bn=void 0,Qu(t))this._bn=t._bn;else{if(typeof t=="string"){const e=oe.decode(t);if(e.length!=Ze)throw new Error("Invalid public key input");this._bn=new _s(e)}else this._bn=new _s(t);if(this._bn.byteLength()>Ze)throw new Error("Invalid public key input")}}static unique(){const t=new ot(Ds);return Ds+=1,new ot(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return oe.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(lt.Buffer);if(t.length===Ze)return t;const e=lt.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,n){const s=lt.Buffer.concat([t.toBuffer(),lt.Buffer.from(e),n.toBuffer()]),i=Ms(s);return new ot(i)}static createProgramAddressSync(t,e){let n=lt.Buffer.alloc(0);t.forEach(function(i){if(i.length>Ju)throw new TypeError("Max seed length exceeded");n=lt.Buffer.concat([n,ie(i)])}),n=lt.Buffer.concat([n,e.toBuffer(),lt.Buffer.from("ProgramDerivedAddress")]);const s=Ms(n);if(qs(s))throw new Error("Invalid seeds, address must fall off the curve");return new ot(s)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let n=255,s;for(;n!=0;){try{const i=t.concat(lt.Buffer.from([n]));s=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[s,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new ot(t);return qs(e.toBytes())}}zo=ot;ot.default=new zo("11111111111111111111111111111111");or.set(ot,{kind:"struct",fields:[["_bn","u256"]]});new ot("BPFLoader1111111111111111111111111111111111");const mn=1232,$i=127,gr=64;class Ko extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Ko.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Ho extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Ho.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Tn extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Tn.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class yr{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((i,o)=>{n.set(i.toBase58(),o)});const s=i=>{const o=n.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return t.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const yt=(r="publicKey")=>M.blob(32,r),tf=(r="signature")=>M.blob(64,r),gn=(r="string")=>{const t=M.struct([M.u32("length"),M.u32("lengthPadding"),M.blob(M.offset(M.u32(),-8),"chars")],r),e=t.decode.bind(t),n=t.encode.bind(t),s=t;return s.decode=(i,o)=>e(i,o).chars.toString(),s.encode=(i,o,u)=>{const p={chars:lt.Buffer.from(i,"utf8")};return n(p,o,u)},s.alloc=i=>M.u32().span+M.u32().span+lt.Buffer.from(i,"utf8").length,s},ef=(r="authorized")=>M.struct([yt("staker"),yt("withdrawer")],r),nf=(r="lockup")=>M.struct([M.ns64("unixTimestamp"),M.ns64("epoch"),yt("custodian")],r),rf=(r="voteInit")=>M.struct([yt("nodePubkey"),yt("authorizedVoter"),yt("authorizedWithdrawer"),M.u8("commission")],r),sf=(r="voteAuthorizeWithSeedArgs")=>M.struct([M.u32("voteAuthorizationType"),yt("currentAuthorityDerivedKeyOwnerPubkey"),gn("currentAuthorityDerivedKeySeed"),yt("newAuthorized")],r);function Wo(r,t){const e=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(t[s.property]);if("count"in s&&"elementLayout"in s){const i=t[s.property];if(Array.isArray(i))return i.length*e(s.elementLayout)}else if("fields"in s)return Wo({layout:s},t[s.property]);return 0};let n=0;return r.layout.fields.forEach(s=>{n+=e(s)}),n}function be(r){let t=0,e=0;for(;;){let n=r.shift();if(t|=(n&127)<<e*7,e+=1,(n&128)===0)break}return t}function ve(r,t){let e=t;for(;;){let n=e&127;if(e>>=7,e==0){r.push(n);break}else n|=128,r.push(n)}}function St(r,t){if(!r)throw new Error(t||"Assertion failed")}class Tr{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const n=new Map,s=o=>{const u=o.toBase58();let p=n.get(u);return p===void 0&&(p={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(u,p)),p},i=s(e);i.isSigner=!0,i.isWritable=!0;for(const o of t){s(o.programId).isInvoked=!0;for(const u of o.keys){const p=s(u.pubkey);p.isSigner||(p.isSigner=u.isSigner),p.isWritable||(p.isWritable=u.isWritable)}}return new Tr(e,n)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];St(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,p])=>p.isSigner&&p.isWritable),n=t.filter(([,p])=>p.isSigner&&!p.isWritable),s=t.filter(([,p])=>!p.isSigner&&p.isWritable),i=t.filter(([,p])=>!p.isSigner&&!p.isWritable),o={numRequiredSignatures:e.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:i.length};{St(e.length>0,"Expected at least one writable signer key");const[p]=e[0];St(p===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const u=[...e.map(([p])=>new ot(p)),...n.map(([p])=>new ot(p)),...s.map(([p])=>new ot(p)),...i.map(([p])=>new ot(p))];return[o,u]}extractTableLookup(t){const[e,n]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(e.length===0&&s.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:s},{writable:n,readonly:i}]}drainKeysFoundInLookupTable(t,e){const n=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(e(o)){const u=new ot(i),p=t.findIndex(v=>v.equals(u));p>=0&&(St(p<256,"Max lookup table index exceeded"),n.push(p),s.push(u),this.keyMetaMap.delete(i))}return[n,s]}}const $o="Reached end of buffer unexpectedly";function Oe(r){if(r.length===0)throw new Error($o);return r.shift()}function xe(r,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>r.length:e>=r.length)throw new Error($o);return r.splice(...t)}class Te{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new ot(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:oe.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new yr(this.staticAccountKeys)}static compile(t){const e=Tr.compile(t.instructions,t.payerKey),[n,s]=e.getMessageComponents(),o=new yr(s).compileInstructions(t.instructions).map(u=>({programIdIndex:u.programIdIndex,accounts:u.accountKeyIndexes,data:oe.encode(u.data)}));return new Te({header:n,accountKeys:s,recentBlockhash:t.recentBlockhash,instructions:o})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const n=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return n<i}else{const n=e-this.header.numReadonlySignedAccounts;return t<n}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];ve(e,t);const n=this.instructions.map(I=>{const{accounts:q,programIdIndex:A}=I,F=Array.from(oe.decode(I.data));let R=[];ve(R,q.length);let k=[];return ve(k,F.length),{programIdIndex:A,keyIndicesCount:lt.Buffer.from(R),keyIndices:q,dataLength:lt.Buffer.from(k),data:F}});let s=[];ve(s,n.length);let i=lt.Buffer.alloc(mn);lt.Buffer.from(s).copy(i);let o=s.length;n.forEach(I=>{const A=M.struct([M.u8("programIdIndex"),M.blob(I.keyIndicesCount.length,"keyIndicesCount"),M.seq(M.u8("keyIndex"),I.keyIndices.length,"keyIndices"),M.blob(I.dataLength.length,"dataLength"),M.seq(M.u8("userdatum"),I.data.length,"data")]).encode(I,i,o);o+=A}),i=i.slice(0,o);const u=M.struct([M.blob(1,"numRequiredSignatures"),M.blob(1,"numReadonlySignedAccounts"),M.blob(1,"numReadonlyUnsignedAccounts"),M.blob(e.length,"keyCount"),M.seq(yt("key"),t,"keys"),yt("recentBlockhash")]),p={numRequiredSignatures:lt.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:lt.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:lt.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:lt.Buffer.from(e),keys:this.accountKeys.map(I=>ie(I.toBytes())),recentBlockhash:oe.decode(this.recentBlockhash)};let v=lt.Buffer.alloc(2048);const S=u.encode(p,v);return i.copy(v,S),v.slice(0,S+i.length)}static from(t){let e=[...t];const n=Oe(e);if(n!==(n&$i))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=Oe(e),i=Oe(e),o=be(e);let u=[];for(let q=0;q<o;q++){const A=xe(e,0,Ze);u.push(new ot(lt.Buffer.from(A)))}const p=xe(e,0,Ze),v=be(e);let S=[];for(let q=0;q<v;q++){const A=Oe(e),F=be(e),R=xe(e,0,F),k=be(e),W=xe(e,0,k),G=oe.encode(lt.Buffer.from(W));S.push({programIdIndex:A,accounts:R,data:G})}const I={header:{numRequiredSignatures:n,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:oe.encode(lt.Buffer.from(p)),accountKeys:u,instructions:S};return new Te(I)}}class Sn{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new yr(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(t>=n){const s=t-n,i=this.addressTableLookups.reduce((o,u)=>o+u.writableIndexes.length,0);return s<i}else if(t>=this.header.numRequiredSignatures){const s=t-e,o=n-e-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=e-this.header.numReadonlySignedAccounts;return t<s}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const n of this.addressTableLookups){const s=t.find(i=>i.key.equals(n.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const i of n.writableIndexes)if(i<s.state.addresses.length)e.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`);for(const i of n.readonlyIndexes)if(i<s.state.addresses.length)e.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`)}return e}static compile(t){const e=Tr.compile(t.instructions,t.payerKey),n=new Array,s={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const S of i){const I=e.extractTableLookup(S);if(I!==void 0){const[q,{writable:A,readonly:F}]=I;n.push(q),s.writable.push(...A),s.readonly.push(...F)}}const[o,u]=e.getMessageComponents(),v=new yr(u,s).compileInstructions(t.instructions);return new Sn({header:o,staticAccountKeys:u,recentBlockhash:t.recentBlockhash,compiledInstructions:v,addressTableLookups:n})}serialize(){const t=Array();ve(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),n=Array();ve(n,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();ve(i,this.addressTableLookups.length);const o=M.struct([M.u8("prefix"),M.struct([M.u8("numRequiredSignatures"),M.u8("numReadonlySignedAccounts"),M.u8("numReadonlyUnsignedAccounts")],"header"),M.blob(t.length,"staticAccountKeysLength"),M.seq(yt(),this.staticAccountKeys.length,"staticAccountKeys"),yt("recentBlockhash"),M.blob(n.length,"instructionsLength"),M.blob(e.length,"serializedInstructions"),M.blob(i.length,"addressTableLookupsLength"),M.blob(s.length,"serializedAddressTableLookups")]),u=new Uint8Array(mn),v=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(S=>S.toBytes()),recentBlockhash:oe.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},u);return u.slice(0,v)}serializeInstructions(){let t=0;const e=new Uint8Array(mn);for(const n of this.compiledInstructions){const s=Array();ve(s,n.accountKeyIndexes.length);const i=Array();ve(i,n.data.length);const o=M.struct([M.u8("programIdIndex"),M.blob(s.length,"encodedAccountKeyIndexesLength"),M.seq(M.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),M.blob(i.length,"encodedDataLength"),M.blob(n.data.length,"data")]);t+=o.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:n.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(mn);for(const n of this.addressTableLookups){const s=Array();ve(s,n.writableIndexes.length);const i=Array();ve(i,n.readonlyIndexes.length);const o=M.struct([yt("accountKey"),M.blob(s.length,"encodedWritableIndexesLength"),M.seq(M.u8(),n.writableIndexes.length,"writableIndexes"),M.blob(i.length,"encodedReadonlyIndexesLength"),M.seq(M.u8(),n.readonlyIndexes.length,"readonlyIndexes")]);t+=o.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:n.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const n=Oe(e),s=n&$i;St(n!==s,"Expected versioned message but received legacy message");const i=s;St(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:Oe(e),numReadonlySignedAccounts:Oe(e),numReadonlyUnsignedAccounts:Oe(e)},u=[],p=be(e);for(let F=0;F<p;F++)u.push(new ot(xe(e,0,Ze)));const v=oe.encode(xe(e,0,Ze)),S=be(e),I=[];for(let F=0;F<S;F++){const R=Oe(e),k=be(e),W=xe(e,0,k),G=be(e),j=new Uint8Array(xe(e,0,G));I.push({programIdIndex:R,accountKeyIndexes:W,data:j})}const q=be(e),A=[];for(let F=0;F<q;F++){const R=new ot(xe(e,0,Ze)),k=be(e),W=xe(e,0,k),G=be(e),j=xe(e,0,G);A.push({accountKey:R,writableIndexes:W,readonlyIndexes:j})}return new Sn({header:o,staticAccountKeys:u,recentBlockhash:v,compiledInstructions:I,addressTableLookups:A})}}const Vo={deserializeMessageVersion(r){const t=r[0],e=t&$i;return e===t?"legacy":e},deserialize:r=>{const t=Vo.deserializeMessageVersion(r);if(t==="legacy")return Te.from(r);if(t===0)return Sn.deserialize(r);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let Ve=function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r}({});const of=lt.Buffer.alloc(gr).fill(0);class pe{constructor(t){this.keys=void 0,this.programId=void 0,this.data=lt.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:n})=>({pubkey:t.toJSON(),isSigner:e,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class qe{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:n}=t;this.minNonceContextSlot=e,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:n}=t;this.recentBlockhash=e,this.lastValidBlockHeight=n}else{const{recentBlockhash:e,nonceInfo:n}=t;n&&(this.nonceInfo=n),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new pe(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let R=0;R<e.length;R++)if(e[R].programId===void 0)throw new Error(`Transaction instruction index ${R} has undefined program id`);const s=[],i=[];e.forEach(R=>{R.keys.forEach(W=>{i.push({...W})});const k=R.programId.toString();s.includes(k)||s.push(k)}),s.forEach(R=>{i.push({pubkey:new ot(R),isSigner:!1,isWritable:!1})});const o=[];i.forEach(R=>{const k=R.pubkey.toString(),W=o.findIndex(G=>G.pubkey.toString()===k);W>-1?(o[W].isWritable=o[W].isWritable||R.isWritable,o[W].isSigner=o[W].isSigner||R.isSigner):o.push(R)}),o.sort(function(R,k){if(R.isSigner!==k.isSigner)return R.isSigner?-1:1;if(R.isWritable!==k.isWritable)return R.isWritable?-1:1;const W={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return R.pubkey.toBase58().localeCompare(k.pubkey.toBase58(),"en",W)});const u=o.findIndex(R=>R.pubkey.equals(n));if(u>-1){const[R]=o.splice(u,1);R.isSigner=!0,R.isWritable=!0,o.unshift(R)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const R of this.signatures){const k=o.findIndex(W=>W.pubkey.equals(R.publicKey));if(k>-1)o[k].isSigner||(o[k].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${R.publicKey.toString()}`)}let p=0,v=0,S=0;const I=[],q=[];o.forEach(({pubkey:R,isSigner:k,isWritable:W})=>{k?(I.push(R.toString()),p+=1,W||(v+=1)):(q.push(R.toString()),W||(S+=1))});const A=I.concat(q),F=e.map(R=>{const{data:k,programId:W}=R;return{programIdIndex:A.indexOf(W.toString()),accounts:R.keys.map(G=>A.indexOf(G.pubkey.toString())),data:oe.encode(k)}});return F.forEach(R=>{St(R.programIdIndex>=0),R.accounts.forEach(k=>St(k>=0))}),new Te({header:{numRequiredSignatures:p,numReadonlySignedAccounts:v,numReadonlyUnsignedAccounts:S},accountKeys:A,recentBlockhash:t,instructions:F})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((s,i)=>e[i].equals(s.publicKey))||(this.signatures=e.map(n=>({signature:null,publicKey:n}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(n=>{const s=n.toString();return e.has(s)?!1:(e.add(s),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,n=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),n.push(i))}this.signatures=n.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...n)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,n=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),n.push(i))}const s=this._compile();this._partialSign(s,...n)}_partialSign(t,...e){const n=t.serialize();e.forEach(s=>{const i=Do(n,s.secretKey);this._addSignature(s.publicKey,ie(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){St(e.length===64);const n=this.signatures.findIndex(s=>t.equals(s.publicKey));if(n<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[n].signature=lt.Buffer.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const n={};for(const{signature:s,publicKey:i}of this.signatures)s===null?e&&(n.missing||(n.missing=[])).push(i):Yu(s,t,i.toBytes())||(n.invalid||(n.invalid=[])).push(i);return n.invalid||n.missing?n:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),s=this.serializeMessage();if(n){const i=this._getMessageSignednessErrors(s,e);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(u=>u.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(u=>u.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(t){const{signatures:e}=this,n=[];ve(n,e.length);const s=n.length+e.length*64+t.length,i=lt.Buffer.alloc(s);return St(e.length<256),lt.Buffer.from(n).copy(i,0),e.forEach(({signature:o},u)=>{o!==null&&(St(o.length===64,"signature has invalid length"),lt.Buffer.from(o).copy(i,n.length+u*64))}),t.copy(i,n.length+e.length*64),St(i.length<=mn,`Transaction too large: ${i.length} > ${mn}`),i}get keys(){return St(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return St(this.instructions.length===1),this.instructions[0].programId}get data(){return St(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const n=be(e);let s=[];for(let i=0;i<n;i++){const o=xe(e,0,gr);s.push(oe.encode(lt.Buffer.from(o)))}return qe.populate(Te.from(e),s)}static populate(t,e=[]){const n=new qe;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),e.forEach((s,i)=>{const o={signature:s==oe.encode(of)?null:oe.decode(s),publicKey:t.accountKeys[i]};n.signatures.push(o)}),t.instructions.forEach(s=>{const i=s.accounts.map(o=>{const u=t.accountKeys[o];return{pubkey:u,isSigner:n.signatures.some(p=>p.publicKey.toString()===u.toString())||t.isAccountSigner(o),isWritable:t.isAccountWritable(o)}});n.instructions.push(new pe({keys:i,programId:t.accountKeys[s.programIdIndex],data:oe.decode(s.data)}))}),n._message=t,n._json=n.toJSON(),n}}class Vi{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,e){const{header:n,compiledInstructions:s,recentBlockhash:i}=t,{numRequiredSignatures:o,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:p}=n,v=o-u;St(v>0,"Message header is invalid");const S=t.staticAccountKeys.length-o-p;St(S>=0,"Message header is invalid");const I=t.getAccountKeys(e),q=I.get(0);if(q===void 0)throw new Error("Failed to decompile message because no account keys were found");const A=[];for(const F of s){const R=[];for(const W of F.accountKeyIndexes){const G=I.get(W);if(G===void 0)throw new Error(`Failed to find key for account key index ${W}`);const j=W<o;let tt;j?tt=W<v:W<I.staticAccountKeys.length?tt=W-o<S:tt=W-I.staticAccountKeys.length<I.accountKeysFromLookups.writable.length,R.push({pubkey:G,isSigner:W<n.numRequiredSignatures,isWritable:tt})}const k=I.get(F.programIdIndex);if(k===void 0)throw new Error(`Failed to find program id for program id index ${F.programIdIndex}`);A.push(new pe({programId:k,data:ie(F.data),keys:R}))}return new Vi({payerKey:q,instructions:A,recentBlockhash:i})}compileToLegacyMessage(){return Te.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return Sn.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}}class Gi{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)St(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const n=[];for(let s=0;s<t.header.numRequiredSignatures;s++)n.push(new Uint8Array(gr));this.signatures=n}this.message=t}serialize(){const t=this.message.serialize(),e=Array();ve(e,this.signatures.length);const n=M.struct([M.blob(e.length,"encodedSignaturesLength"),M.seq(tf(),this.signatures.length,"signatures"),M.blob(t.length,"serializedMessage")]),s=new Uint8Array(2048),i=n.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},s);return s.slice(0,i)}static deserialize(t){let e=[...t];const n=[],s=be(e);for(let o=0;o<s;o++)n.push(new Uint8Array(xe(e,0,gr)));const i=Vo.deserialize(new Uint8Array(e));return new Gi(i,n)}sign(t){const e=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of t){const i=n.findIndex(o=>o.equals(s.publicKey));St(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=Do(e,s.secretKey)}}addSignature(t,e){St(e.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(t));St(s>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=e}}const af=160,cf=64,uf=af/cf,ff=1e3/uf;new ot("SysvarC1ock11111111111111111111111111111111");new ot("SysvarEpochSchedu1e111111111111111111111111");new ot("Sysvar1nstructions1111111111111111111111111");const bi=new ot("SysvarRecentB1ockHashes11111111111111111111"),zs=new ot("SysvarRent111111111111111111111111111111111");new ot("SysvarRewards111111111111111111111111111111");new ot("SysvarS1otHashes111111111111111111111111111");new ot("SysvarS1otHistory11111111111111111111111111");new ot("SysvarStakeHistory1111111111111111111111111");class Ks extends Error{constructor({action:t,signature:e,transactionMessage:n,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let u;switch(t){case"send":u=`Transaction ${e} resulted in an error. 
${n}. `+i+o;break;case"simulate":u=`Simulation failed. 
Message: ${n}. 
`+i+o;break;default:u=`Unknown action '${(p=>p)(t)}'`}super(u),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=n,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,n)=>{t.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,e(i)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}class at extends Error{constructor({code:t,message:e,data:n},s){super(s!=null?`${s}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=n,this.name="SolanaJSONRPCError"}}function dn(r){return new Promise(t=>setTimeout(t,r))}function Se(r,t){const e=r.layout.span>=0?r.layout.span:Wo(r,t),n=lt.Buffer.alloc(e),s=Object.assign({instruction:r.index},t);return r.layout.encode(s,n),n}const lf=M.nu64("lamportsPerSignature"),Go=M.struct([M.u32("version"),M.u32("state"),yt("authorizedPubkey"),yt("nonce"),M.struct([lf],"feeCalculator")]),Hs=Go.span;class ji{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=Go.decode(ie(t),0);return new ji({authorizedPubkey:new ot(e.authorizedPubkey),nonce:new ot(e.nonce).toString(),feeCalculator:e.feeCalculator})}}function En(r){const t=M.blob(8,r),e=t.decode.bind(t),n=t.encode.bind(t),s=t,i=Jc();return s.decode=(o,u)=>{const p=e(o,u);return i.decode(p)},s.encode=(o,u,p)=>{const v=i.encode(o);return n(v,u,p)},s}const Ee=Object.freeze({Create:{index:0,layout:M.struct([M.u32("instruction"),M.ns64("lamports"),M.ns64("space"),yt("programId")])},Assign:{index:1,layout:M.struct([M.u32("instruction"),yt("programId")])},Transfer:{index:2,layout:M.struct([M.u32("instruction"),En("lamports")])},CreateWithSeed:{index:3,layout:M.struct([M.u32("instruction"),yt("base"),gn("seed"),M.ns64("lamports"),M.ns64("space"),yt("programId")])},AdvanceNonceAccount:{index:4,layout:M.struct([M.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:M.struct([M.u32("instruction"),M.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:M.struct([M.u32("instruction"),yt("authorized")])},AuthorizeNonceAccount:{index:7,layout:M.struct([M.u32("instruction"),yt("authorized")])},Allocate:{index:8,layout:M.struct([M.u32("instruction"),M.ns64("space")])},AllocateWithSeed:{index:9,layout:M.struct([M.u32("instruction"),yt("base"),gn("seed"),M.ns64("space"),yt("programId")])},AssignWithSeed:{index:10,layout:M.struct([M.u32("instruction"),yt("base"),gn("seed"),yt("programId")])},TransferWithSeed:{index:11,layout:M.struct([M.u32("instruction"),En("lamports"),gn("seed"),yt("programId")])},UpgradeNonceAccount:{index:12,layout:M.struct([M.u32("instruction")])}});class On{constructor(){}static createAccount(t){const e=Ee.Create,n=Se(e,{lamports:t.lamports,space:t.space,programId:ie(t.programId.toBuffer())});return new pe({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(t){let e,n;if("basePubkey"in t){const s=Ee.TransferWithSeed;e=Se(s,{lamports:BigInt(t.lamports),seed:t.seed,programId:ie(t.programId.toBuffer())}),n=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=Ee.Transfer;e=Se(s,{lamports:BigInt(t.lamports)}),n=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new pe({keys:n,programId:this.programId,data:e})}static assign(t){let e,n;if("basePubkey"in t){const s=Ee.AssignWithSeed;e=Se(s,{base:ie(t.basePubkey.toBuffer()),seed:t.seed,programId:ie(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Ee.Assign;e=Se(s,{programId:ie(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new pe({keys:n,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=Ee.CreateWithSeed,n=Se(e,{base:ie(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:ie(t.programId.toBuffer())});let s=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||s.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new pe({keys:s,programId:this.programId,data:n})}static createNonceAccount(t){const e=new qe;"basePubkey"in t&&"seed"in t?e.add(On.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:Hs,programId:this.programId})):e.add(On.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:Hs,programId:this.programId}));const n={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(n)),e}static nonceInitialize(t){const e=Ee.InitializeNonceAccount,n=Se(e,{authorized:ie(t.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:bi,isSigner:!1,isWritable:!1},{pubkey:zs,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new pe(s)}static nonceAdvance(t){const e=Ee.AdvanceNonceAccount,n=Se(e),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:bi,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new pe(s)}static nonceWithdraw(t){const e=Ee.WithdrawNonceAccount,n=Se(e,{lamports:t.lamports});return new pe({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:bi,isSigner:!1,isWritable:!1},{pubkey:zs,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(t){const e=Ee.AuthorizeNonceAccount,n=Se(e,{authorized:ie(t.newAuthorizedPubkey.toBuffer())});return new pe({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(t){let e,n;if("basePubkey"in t){const s=Ee.AllocateWithSeed;e=Se(s,{base:ie(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:ie(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Ee.Allocate;e=Se(s,{space:t.space}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new pe({keys:n,programId:this.programId,data:e})}}On.programId=new ot("11111111111111111111111111111111");new ot("BPFLoader2111111111111111111111111111111111");function hf(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var vi,Ws;function df(){if(Ws)return vi;Ws=1;var r=Object.prototype.toString,t=Object.keys||function(n){var s=[];for(var i in n)s.push(i);return s};function e(n,s){var i,o,u,p,v,S,I;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return e(n.toJSON(),s);if(I=r.call(n),I==="[object Array]"){for(u="[",o=n.length-1,i=0;i<o;i++)u+=e(n[i],!0)+",";return o>-1&&(u+=e(n[i],!0)),u+"]"}else if(I==="[object Object]"){for(p=t(n).sort(),o=p.length,u="",i=0;i<o;)v=p[i],S=e(n[v],!1),S!==void 0&&(u&&(u+=","),u+=JSON.stringify(v)+":"+S),i++;return"{"+u+"}"}else return JSON.stringify(n);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return vi=function(n){var s=e(n,!1);if(s!==void 0)return""+s},vi}var pf=df(),$s=hf(pf);const Rn=32;function xi(r){let t=0;for(;r>1;)r/=2,t++;return t}function gf(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class yf{constructor(t,e,n,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=n,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=xi(gf(t+Rn+1))-xi(Rn)-1,n=this.getSlotsInEpoch(e),s=t-(n-Rn);return[e,s]}else{const e=t-this.firstNormalSlot,n=Math.floor(e/this.slotsPerEpoch),s=this.firstNormalEpoch+n,i=e%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*Rn:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+xi(Rn)):this.slotsPerEpoch}}var mf=globalThis.fetch;class wf extends Fu{constructor(t,e,n){const s=i=>{const o=Cu(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,t,e,n),this.underlyingSocket=void 0}call(...t){var n;const e=(n=this.underlyingSocket)==null?void 0:n.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){var n;const e=(n=this.underlyingSocket)==null?void 0:n.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function bf(r,t){let e;try{e=r.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(e.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${r.index}`);return e}const Vs=56;class Gs{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=bf(vf,t),n=t.length-Vs;St(n>=0,"lookup table is invalid"),St(n%32===0,"lookup table is invalid");const s=n/32,{addresses:i}=M.struct([M.seq(yt(),s,"addresses")]).decode(t.slice(Vs));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new ot(e.authority[0]):void 0,addresses:i.map(o=>new ot(o))}}}const vf={index:1,layout:M.struct([M.u32("typeIndex"),En("deactivationSlot"),M.nu64("lastExtendedSlot"),M.u8("lastExtendedStartIndex"),M.u8(),M.seq(yt(),M.offset(M.u8(),-1),"authority")])},xf=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Sf(r){const t=r.match(xf);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[e,n,s,i]=t,o=r.startsWith("https:")?"wss:":"ws:",u=s==null?null:parseInt(s.slice(1),10),p=u==null?"":`:${u+1}`;return`${o}//${n}${p}${i}`}const Rt=Vn(Hi(ot),J(),r=>new ot(r)),jo=Wi([J(),Mt("base64")]),Zi=Vn(Hi(lt.Buffer),jo,r=>lt.Buffer.from(r[0],"base64")),Ef=30*1e3;function Bf(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function xt(r){let t,e;if(typeof r=="string")t=r;else if(r){const{commitment:n,...s}=r;t=n,e=s}return{commitment:t,config:e}}function js(r){return r.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function Zo(r){return ye([Y({jsonrpc:Mt("2.0"),id:J(),result:r}),Y({jsonrpc:Mt("2.0"),id:J(),error:Y({code:In(),message:J(),data:ut(su())})})])}const _f=Zo(In());function gt(r){return Vn(Zo(r),_f,t=>"error"in t?t:{...t,result:Q(t.result,r)})}function Nt(r){return gt(Y({context:Y({slot:K()}),value:r}))}function Lr(r){return Y({context:Y({slot:K()}),value:r})}function Si(r,t){return r===0?new Sn({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new ot(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:oe.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new Te(t)}const Af=Y({foundation:K(),foundationTerm:K(),initial:K(),taper:K(),terminal:K()}),If=gt(nt(rt(Y({epoch:K(),effectiveSlot:K(),amount:K(),postBalance:K(),commission:ut(rt(K()))})))),kf=nt(Y({slot:K(),prioritizationFee:K()})),Mf=Y({total:K(),validator:K(),foundation:K(),epoch:K()}),Rf=Y({epoch:K(),slotIndex:K(),slotsInEpoch:K(),absoluteSlot:K(),blockHeight:ut(K()),transactionCount:ut(K())}),Tf=Y({slotsPerEpoch:K(),leaderScheduleSlotOffset:K(),warmup:Re(),firstNormalEpoch:K(),firstNormalSlot:K()}),Lf=Mo(J(),nt(K())),an=rt(ye([Y({}),J()])),Cf=Y({err:an}),Uf=Mt("receivedSignature"),Ff=Y({"solana-core":J(),"feature-set":ut(K())}),Nf=Y({program:J(),programId:Rt,parsed:In()}),Pf=Y({programId:Rt,accounts:nt(Rt),data:J()}),Zs=Nt(Y({err:rt(ye([Y({}),J()])),logs:rt(nt(J())),accounts:ut(rt(nt(rt(Y({executable:Re(),owner:J(),lamports:K(),data:nt(J()),rentEpoch:ut(K())}))))),unitsConsumed:ut(K()),returnData:ut(rt(Y({programId:J(),data:Wi([J(),Mt("base64")])}))),innerInstructions:ut(rt(nt(Y({index:K(),instructions:nt(ye([Nf,Pf]))}))))})),Of=Nt(Y({byIdentity:Mo(J(),nt(K())),range:Y({firstSlot:K(),lastSlot:K()})}));function qf(r,t,e,n,s,i){const o=e||mf;let u;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let p;return n&&(p=async(S,I)=>{const q=await new Promise((A,F)=>{try{n(S,I,(R,k)=>A([R,k]))}catch(R){F(R)}});return await o(...q)}),new Mu(async(S,I)=>{const q={method:"POST",body:S,agent:u,headers:Object.assign({"Content-Type":"application/json"},t||{},ql)};try{let A=5,F,R=500;for(;p?F=await p(r,q):F=await o(r,q),!(F.status!==429||s===!0||(A-=1,A===0));)console.error(`Server responded with ${F.status} ${F.statusText}.  Retrying after ${R}ms delay...`),await dn(R),R*=2;const k=await F.text();F.ok?I(null,k):I(new Error(`${F.status} ${F.statusText}: ${k}`))}catch(A){A instanceof Error&&I(A)}},{})}function Df(r){return(t,e)=>new Promise((n,s)=>{r.request(t,e,(i,o)=>{if(i){s(i);return}n(o)})})}function zf(r){return t=>new Promise((e,n)=>{t.length===0&&e([]);const s=t.map(i=>r.request(i.methodName,i.args));r.request(s,(i,o)=>{if(i){n(i);return}e(o)})})}const Kf=gt(Af),Hf=gt(Mf),Wf=gt(kf),$f=gt(Rf),Vf=gt(Tf),Gf=gt(Lf),jf=gt(K()),Zf=Nt(Y({total:K(),circulating:K(),nonCirculating:K(),nonCirculatingAccounts:nt(Rt)})),Ti=Y({amount:J(),uiAmount:rt(K()),decimals:K(),uiAmountString:ut(J())}),Yf=Nt(nt(Y({address:Rt,amount:J(),uiAmount:rt(K()),decimals:K(),uiAmountString:ut(J())}))),Xf=Nt(nt(Y({pubkey:Rt,account:Y({executable:Re(),owner:Rt,lamports:K(),data:Zi,rentEpoch:K()})}))),Li=Y({program:J(),parsed:In(),space:K()}),Jf=Nt(nt(Y({pubkey:Rt,account:Y({executable:Re(),owner:Rt,lamports:K(),data:Li,rentEpoch:K()})}))),Qf=Nt(nt(Y({lamports:K(),address:Rt}))),qn=Y({executable:Re(),owner:Rt,lamports:K(),data:Zi,rentEpoch:K()}),tl=Y({pubkey:Rt,account:qn}),el=Vn(ye([Hi(lt.Buffer),Li]),ye([jo,Li]),r=>Array.isArray(r)?Q(r,Zi):r),Ci=Y({executable:Re(),owner:Rt,lamports:K(),data:el,rentEpoch:K()}),nl=Y({pubkey:Rt,account:Ci}),rl=Y({state:ye([Mt("active"),Mt("inactive"),Mt("activating"),Mt("deactivating")]),active:K(),inactive:K()}),il=gt(nt(Y({signature:J(),slot:K(),err:an,memo:rt(J()),blockTime:ut(rt(K()))}))),sl=gt(nt(Y({signature:J(),slot:K(),err:an,memo:rt(J()),blockTime:ut(rt(K()))}))),ol=Y({subscription:K(),result:Lr(qn)}),al=Y({pubkey:Rt,account:qn}),cl=Y({subscription:K(),result:Lr(al)}),ul=Y({parent:K(),slot:K(),root:K()}),fl=Y({subscription:K(),result:ul}),ll=ye([Y({type:ye([Mt("firstShredReceived"),Mt("completed"),Mt("optimisticConfirmation"),Mt("root")]),slot:K(),timestamp:K()}),Y({type:Mt("createdBank"),parent:K(),slot:K(),timestamp:K()}),Y({type:Mt("frozen"),slot:K(),timestamp:K(),stats:Y({numTransactionEntries:K(),numSuccessfulTransactions:K(),numFailedTransactions:K(),maxTransactionsPerEntry:K()})}),Y({type:Mt("dead"),slot:K(),timestamp:K(),err:J()})]),hl=Y({subscription:K(),result:ll}),dl=Y({subscription:K(),result:Lr(ye([Cf,Uf]))}),pl=Y({subscription:K(),result:K()}),gl=Y({pubkey:J(),gossip:rt(J()),tpu:rt(J()),rpc:rt(J()),version:rt(J())}),Ys=Y({votePubkey:J(),nodePubkey:J(),activatedStake:K(),epochVoteAccount:Re(),epochCredits:nt(Wi([K(),K(),K()])),commission:K(),lastVote:K(),rootSlot:rt(K())}),yl=gt(Y({current:nt(Ys),delinquent:nt(Ys)})),ml=ye([Mt("processed"),Mt("confirmed"),Mt("finalized")]),wl=Y({slot:K(),confirmations:rt(K()),err:an,confirmationStatus:ut(ml)}),bl=Nt(nt(rt(wl))),vl=gt(K()),Yo=Y({accountKey:Rt,writableIndexes:nt(K()),readonlyIndexes:nt(K())}),Yi=Y({signatures:nt(J()),message:Y({accountKeys:nt(J()),header:Y({numRequiredSignatures:K(),numReadonlySignedAccounts:K(),numReadonlyUnsignedAccounts:K()}),instructions:nt(Y({accounts:nt(K()),data:J(),programIdIndex:K()})),recentBlockhash:J(),addressTableLookups:ut(nt(Yo))})}),Xo=Y({pubkey:Rt,signer:Re(),writable:Re(),source:ut(ye([Mt("transaction"),Mt("lookupTable")]))}),Jo=Y({accountKeys:nt(Xo),signatures:nt(J())}),Qo=Y({parsed:In(),program:J(),programId:Rt}),ta=Y({accounts:nt(Rt),data:J(),programId:Rt}),xl=ye([ta,Qo]),Sl=ye([Y({parsed:In(),program:J(),programId:J()}),Y({accounts:nt(J()),data:J(),programId:J()})]),ea=Vn(xl,Sl,r=>"accounts"in r?Q(r,ta):Q(r,Qo)),na=Y({signatures:nt(J()),message:Y({accountKeys:nt(Xo),instructions:nt(ea),recentBlockhash:J(),addressTableLookups:ut(rt(nt(Yo)))})}),mr=Y({accountIndex:K(),mint:J(),owner:ut(J()),programId:ut(J()),uiTokenAmount:Ti}),ra=Y({writable:nt(Rt),readonly:nt(Rt)}),Cr=Y({err:an,fee:K(),innerInstructions:ut(rt(nt(Y({index:K(),instructions:nt(Y({accounts:nt(K()),data:J(),programIdIndex:K()}))})))),preBalances:nt(K()),postBalances:nt(K()),logMessages:ut(rt(nt(J()))),preTokenBalances:ut(rt(nt(mr))),postTokenBalances:ut(rt(nt(mr))),loadedAddresses:ut(ra),computeUnitsConsumed:ut(K())}),Xi=Y({err:an,fee:K(),innerInstructions:ut(rt(nt(Y({index:K(),instructions:nt(ea)})))),preBalances:nt(K()),postBalances:nt(K()),logMessages:ut(rt(nt(J()))),preTokenBalances:ut(rt(nt(mr))),postTokenBalances:ut(rt(nt(mr))),loadedAddresses:ut(ra),computeUnitsConsumed:ut(K())}),kn=ye([Mt(0),Mt("legacy")]),cn=Y({pubkey:J(),lamports:K(),postBalance:rt(K()),rewardType:rt(J()),commission:ut(rt(K()))}),El=gt(rt(Y({blockhash:J(),previousBlockhash:J(),parentSlot:K(),transactions:nt(Y({transaction:Yi,meta:rt(Cr),version:ut(kn)})),rewards:ut(nt(cn)),blockTime:rt(K()),blockHeight:rt(K())}))),Bl=gt(rt(Y({blockhash:J(),previousBlockhash:J(),parentSlot:K(),rewards:ut(nt(cn)),blockTime:rt(K()),blockHeight:rt(K())}))),_l=gt(rt(Y({blockhash:J(),previousBlockhash:J(),parentSlot:K(),transactions:nt(Y({transaction:Jo,meta:rt(Cr),version:ut(kn)})),rewards:ut(nt(cn)),blockTime:rt(K()),blockHeight:rt(K())}))),Al=gt(rt(Y({blockhash:J(),previousBlockhash:J(),parentSlot:K(),transactions:nt(Y({transaction:na,meta:rt(Xi),version:ut(kn)})),rewards:ut(nt(cn)),blockTime:rt(K()),blockHeight:rt(K())}))),Il=gt(rt(Y({blockhash:J(),previousBlockhash:J(),parentSlot:K(),transactions:nt(Y({transaction:Jo,meta:rt(Xi),version:ut(kn)})),rewards:ut(nt(cn)),blockTime:rt(K()),blockHeight:rt(K())}))),kl=gt(rt(Y({blockhash:J(),previousBlockhash:J(),parentSlot:K(),rewards:ut(nt(cn)),blockTime:rt(K()),blockHeight:rt(K())}))),Ml=gt(rt(Y({blockhash:J(),previousBlockhash:J(),parentSlot:K(),transactions:nt(Y({transaction:Yi,meta:rt(Cr)})),rewards:ut(nt(cn)),blockTime:rt(K())}))),Xs=gt(rt(Y({blockhash:J(),previousBlockhash:J(),parentSlot:K(),signatures:nt(J()),blockTime:rt(K())}))),Ei=gt(rt(Y({slot:K(),meta:rt(Cr),blockTime:ut(rt(K())),transaction:Yi,version:ut(kn)}))),rr=gt(rt(Y({slot:K(),transaction:na,meta:rt(Xi),blockTime:ut(rt(K())),version:ut(kn)}))),Rl=Nt(Y({blockhash:J(),lastValidBlockHeight:K()})),Tl=Nt(Re()),Ll=Y({slot:K(),numTransactions:K(),numSlots:K(),samplePeriodSecs:K()}),Cl=gt(nt(Ll)),Ul=Nt(rt(Y({feeCalculator:Y({lamportsPerSignature:K()})}))),Fl=gt(J()),Nl=gt(J()),Pl=Y({err:an,logs:nt(J()),signature:J()}),Ol=Y({result:Lr(Pl),subscription:K()}),ql={"solana-client":"js/1.0.0-maintenance"};class ia{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const v={};return async S=>{const{commitment:I,config:q}=xt(S),A=this._buildArgs([],I,void 0,q),F=$s(A);return v[F]=v[F]??(async()=>{try{const R=await this._rpcRequest("getBlockHeight",A),k=Q(R,gt(K()));if("error"in k)throw new at(k.error,"failed to get block height information");return k.result}finally{delete v[F]}})(),await v[F]}})();let n,s,i,o,u,p;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,n=e.wsEndpoint,s=e.httpHeaders,i=e.fetch,o=e.fetchMiddleware,u=e.disableRetryOnRateLimit,p=e.httpAgent),this._rpcEndpoint=Bf(t),this._rpcWsEndpoint=n||Sf(t),this._rpcClient=qf(t,s,i,o,u,p),this._rpcRequest=Df(this._rpcClient),this._rpcBatchRequest=zf(this._rpcClient),this._rpcWebSocket=new wf(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:n,config:s}=xt(e),i=this._buildArgs([t.toBase58()],n,void 0,s),o=await this._rpcRequest("getBalance",i),u=Q(o,Nt(K()));if("error"in u)throw new at(u.error,`failed to get balance for ${t.toBase58()}`);return u.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+n)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),n=Q(e,gt(rt(K())));if("error"in n)throw new at(n.error,`failed to get block time for slot ${t}`);return n.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=Q(t,gt(K()));if("error"in e)throw new at(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=Q(t,jf);if("error"in e)throw new at(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[e]),s=Q(n,Zf);if("error"in s)throw new at(s.error,"failed to get supply");return s.result}async getTokenSupply(t,e){const n=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenSupply",n),i=Q(s,Nt(Ti));if("error"in i)throw new at(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const n=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenAccountBalance",n),i=Q(s,Nt(Ti));if("error"in i)throw new at(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,n){const{commitment:s,config:i}=xt(n);let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const u=this._buildArgs(o,s,"base64",i),p=await this._rpcRequest("getTokenAccountsByOwner",u),v=Q(p,Xf);if("error"in v)throw new at(v.error,`failed to get token accounts owned by account ${t.toBase58()}`);return v.result}async getParsedTokenAccountsByOwner(t,e,n){let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const i=this._buildArgs(s,n,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),u=Q(o,Jf);if("error"in u)throw new at(u.error,`failed to get token accounts owned by account ${t.toBase58()}`);return u.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},n=e.filter||e.commitment?[e]:[],s=await this._rpcRequest("getLargestAccounts",n),i=Q(s,Qf);if("error"in i)throw new at(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const n=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenLargestAccounts",n),i=Q(s,Yf);if("error"in i)throw new at(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:n,config:s}=xt(e),i=this._buildArgs([t.toBase58()],n,"base64",s),o=await this._rpcRequest("getAccountInfo",i),u=Q(o,Nt(rt(qn)));if("error"in u)throw new at(u.error,`failed to get info about account ${t.toBase58()}`);return u.result}async getParsedAccountInfo(t,e){const{commitment:n,config:s}=xt(e),i=this._buildArgs([t.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),u=Q(o,Nt(rt(Ci)));if("error"in u)throw new at(u.error,`failed to get info about account ${t.toBase58()}`);return u.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(n){throw new Error("failed to get info about account "+t.toBase58()+": "+n)}}async getMultipleParsedAccounts(t,e){const{commitment:n,config:s}=xt(e),i=t.map(v=>v.toBase58()),o=this._buildArgs([i],n,"jsonParsed",s),u=await this._rpcRequest("getMultipleAccounts",o),p=Q(u,Nt(nt(rt(Ci))));if("error"in p)throw new at(p.error,`failed to get info for accounts ${i}`);return p.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:n,config:s}=xt(e),i=t.map(v=>v.toBase58()),o=this._buildArgs([i],n,"base64",s),u=await this._rpcRequest("getMultipleAccounts",o),p=Q(u,Nt(nt(rt(qn))));if("error"in p)throw new at(p.error,`failed to get info for accounts ${i}`);return p.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,n){const{commitment:s,config:i}=xt(e),o=this._buildArgs([t.toBase58()],s,void 0,{...i,epoch:n??(i==null?void 0:i.epoch)}),u=await this._rpcRequest("getStakeActivation",o),p=Q(u,gt(rl));if("error"in p)throw new at(p.error,`failed to get Stake Activation ${t.toBase58()}`);return p.result}async getProgramAccounts(t,e){const{commitment:n,config:s}=xt(e),{encoding:i,...o}=s||{},u=this._buildArgs([t.toBase58()],n,i||"base64",{...o,...o.filters?{filters:js(o.filters)}:null}),p=await this._rpcRequest("getProgramAccounts",u),v=nt(tl),S=o.withContext===!0?Q(p,Nt(v)):Q(p,gt(v));if("error"in S)throw new at(S.error,`failed to get accounts owned by program ${t.toBase58()}`);return S.result}async getParsedProgramAccounts(t,e){const{commitment:n,config:s}=xt(e),i=this._buildArgs([t.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),u=Q(o,gt(nt(nl)));if("error"in u)throw new at(u.error,`failed to get accounts owned by program ${t.toBase58()}`);return u.result}async confirmTransaction(t,e){var i;let n;if(typeof t=="string")n=t;else{const o=t;if((i=o.abortSignal)!=null&&i.aborted)return Promise.reject(o.abortSignal.reason);n=o.signature}let s;try{s=oe.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return St(s.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:n}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,n)=>{t!=null&&(t.aborted?n(t.reason):t.addEventListener("abort",()=>{n(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let n,s,i=!1;const o=new Promise((p,v)=>{try{n=this.onSignature(e,(I,q)=>{n=void 0;const A={context:q,value:I};p({__type:Ve.PROCESSED,response:A})},t);const S=new Promise(I=>{n==null?I():s=this._onSubscriptionStateChange(n,q=>{q==="subscribed"&&I()})});(async()=>{if(await S,i)return;const I=await this.getSignatureStatus(e);if(i||I==null)return;const{context:q,value:A}=I;if(A!=null)if(A!=null&&A.err)v(A.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(A.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(A.confirmationStatus==="processed"||A.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,p({__type:Ve.PROCESSED,response:{context:q,value:A}})}})()}catch(S){v(S)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:n,signature:s}}){let i=!1;const o=new Promise(I=>{const q=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let A=await q();if(!i){for(;A<=n;)if(await dn(1e3),i||(A=await q(),i))return;I({__type:Ve.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:u,confirmationPromise:p}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),v=this.getCancellationPromise(e);let S;try{const I=await Promise.race([v,p,o]);if(I.__type===Ve.PROCESSED)S=I.response;else throw new Ko(s)}finally{i=!0,u()}return S}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:n,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let u=!1;const p=new Promise(A=>{let F=i,R=null;const k=async()=>{try{const{context:W,value:G}=await this.getNonceAndContext(s,{commitment:t,minContextSlot:n});return R=W.slot,G==null?void 0:G.nonce}catch{return F}};(async()=>{if(F=await k(),!u)for(;;){if(i!==F){A({__type:Ve.NONCE_INVALID,slotInWhichNonceDidAdvance:R});return}if(await dn(2e3),u||(F=await k(),u))return}})()}),{abortConfirmation:v,confirmationPromise:S}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),I=this.getCancellationPromise(e);let q;try{const A=await Promise.race([I,S,p]);if(A.__type===Ve.PROCESSED)q=A.response;else{let F;for(;;){const R=await this.getSignatureStatus(o);if(R==null)break;if(R.context.slot<(A.slotInWhichNonceDidAdvance??n)){await dn(400);continue}F=R;break}if(F!=null&&F.value){const R=t||"finalized",{confirmationStatus:k}=F.value;switch(R){case"processed":case"recent":if(k!=="processed"&&k!=="confirmed"&&k!=="finalized")throw new Tn(o);break;case"confirmed":case"single":case"singleGossip":if(k!=="confirmed"&&k!=="finalized")throw new Tn(o);break;case"finalized":case"max":case"root":if(k!=="finalized")throw new Tn(o);break;default:}q={context:F.context,value:{err:F.value.err}}}else throw new Tn(o)}}finally{u=!0,v()}return q}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let n;const s=new Promise(p=>{let v=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{v=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>p({__type:Ve.TIMED_OUT,timeoutMs:v}),v)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let u;try{const p=await Promise.race([o,s]);if(p.__type===Ve.PROCESSED)u=p.response;else throw new Ho(e,p.timeoutMs/1e3)}finally{clearTimeout(n),i()}return u}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=Q(t,gt(nt(gl)));if("error"in e)throw new at(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getVoteAccounts",e),s=Q(n,yl);if("error"in s)throw new at(s.error,"failed to get vote accounts");return s.result}async getSlot(t){const{commitment:e,config:n}=xt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getSlot",s),o=Q(i,gt(K()));if("error"in o)throw new at(o.error,"failed to get slot");return o.result}async getSlotLeader(t){const{commitment:e,config:n}=xt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getSlotLeader",s),o=Q(i,gt(J()));if("error"in o)throw new at(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(t,e){const n=[t,e],s=await this._rpcRequest("getSlotLeaders",n),i=Q(s,gt(nt(Rt)));if("error"in i)throw new at(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:n,value:s}=await this.getSignatureStatuses([t],e);St(s.length===1);const i=s[0];return{context:n,value:i}}async getSignatureStatuses(t,e){const n=[t];e&&n.push(e);const s=await this._rpcRequest("getSignatureStatuses",n),i=Q(s,bl);if("error"in i)throw new at(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:n}=xt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getTransactionCount",s),o=Q(i,gt(K()));if("error"in o)throw new at(o.error,"failed to get transaction count");return o.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getInflationGovernor",e),s=Q(n,Kf);if("error"in s)throw new at(s.error,"failed to get inflation");return s.result}async getInflationReward(t,e,n){const{commitment:s,config:i}=xt(n),o=this._buildArgs([t.map(v=>v.toBase58())],s,void 0,{...i,epoch:e??(i==null?void 0:i.epoch)}),u=await this._rpcRequest("getInflationReward",o),p=Q(u,If);if("error"in p)throw new at(p.error,"failed to get inflation reward");return p.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=Q(t,Hf);if("error"in e)throw new at(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:n}=xt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getEpochInfo",s),o=Q(i,$f);if("error"in o)throw new at(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=Q(t,Vf);if("error"in e)throw new at(e.error,"failed to get epoch schedule");const n=e.result;return new yf(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=Q(t,Gf);if("error"in e)throw new at(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const n=this._buildArgs([t],e),s=await this._rpcRequest("getMinimumBalanceForRentExemption",n),i=Q(s,vl);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const{context:e,value:{blockhash:n}}=await this.getLatestBlockhashAndContext(t);return{context:e,value:{blockhash:n,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),n=Q(e,Cl);if("error"in n)throw new at(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(t,e){const n=this._buildArgs([t],e),s=await this._rpcRequest("getFeeCalculatorForBlockhash",n),i=Q(s,Ul);if("error"in i)throw new at(i.error,"failed to get fee calculator");const{context:o,value:u}=i.result;return{context:o,value:u!==null?u.feeCalculator:null}}async getFeeForMessage(t,e){const n=ie(t.serialize()).toString("base64"),s=this._buildArgs([n],e),i=await this._rpcRequest("getFeeForMessage",s),o=Q(i,Nt(rt(K())));if("error"in o)throw new at(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(t){var o;const e=(o=t==null?void 0:t.lockedWritableAccounts)==null?void 0:o.map(u=>u.toBase58()),n=e!=null&&e.length?[e]:[],s=await this._rpcRequest("getRecentPrioritizationFees",n),i=Q(s,Wf);if("error"in i)throw new at(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:n}=xt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getLatestBlockhash",s),o=Q(i,Rl);if("error"in o)throw new at(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(t,e){const{commitment:n,config:s}=xt(e),i=this._buildArgs([t],n,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),u=Q(o,Tl);if("error"in u)throw new at(u.error,"failed to determine if the blockhash `"+t+"`is valid");return u.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=Q(t,gt(Ff));if("error"in e)throw new at(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=Q(t,gt(J()));if("error"in e)throw new at(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:n,config:s}=xt(e),i=this._buildArgsAtLeastConfirmed([t],n,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const u=Q(o,_l);if("error"in u)throw u.error;return u.result}case"none":{const u=Q(o,Bl);if("error"in u)throw u.error;return u.result}default:{const u=Q(o,El);if("error"in u)throw u.error;const{result:p}=u;return p?{...p,transactions:p.transactions.map(({transaction:v,meta:S,version:I})=>({meta:S,transaction:{...v,message:Si(I,v.message)},version:I}))}:null}}}catch(u){throw new at(u,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:n,config:s}=xt(e),i=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const u=Q(o,Il);if("error"in u)throw u.error;return u.result}case"none":{const u=Q(o,kl);if("error"in u)throw u.error;return u.result}default:{const u=Q(o,Al);if("error"in u)throw u.error;return u.result}}}catch(u){throw new at(u,"failed to get block")}}async getBlockProduction(t){let e,n;if(typeof t=="string")n=t;else if(t){const{commitment:u,...p}=t;n=u,e=p}const s=this._buildArgs([],n,"base64",e),i=await this._rpcRequest("getBlockProduction",s),o=Q(i,Of);if("error"in o)throw new at(o.error,"failed to get block production information");return o.result}async getTransaction(t,e){const{commitment:n,config:s}=xt(e),i=this._buildArgsAtLeastConfirmed([t],n,void 0,s),o=await this._rpcRequest("getTransaction",i),u=Q(o,Ei);if("error"in u)throw new at(u.error,"failed to get transaction");const p=u.result;return p&&{...p,transaction:{...p.transaction,message:Si(p.version,p.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:n,config:s}=xt(e),i=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),u=Q(o,rr);if("error"in u)throw new at(u.error,"failed to get transaction");return u.result}async getParsedTransactions(t,e){const{commitment:n,config:s}=xt(e),i=t.map(p=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([p],n,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(p=>{const v=Q(p,rr);if("error"in v)throw new at(v.error,"failed to get transactions");return v.result})}async getTransactions(t,e){const{commitment:n,config:s}=xt(e),i=t.map(p=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([p],n,void 0,s)}));return(await this._rpcBatchRequest(i)).map(p=>{const v=Q(p,Ei);if("error"in v)throw new at(v.error,"failed to get transactions");const S=v.result;return S&&{...S,transaction:{...S.transaction,message:Si(S.version,S.transaction.message)}}})}async getConfirmedBlock(t,e){const n=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getBlock",n),i=Q(s,Ml);if("error"in i)throw new at(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");const u={...o,transactions:o.transactions.map(({transaction:p,meta:v})=>{const S=new Te(p.message);return{meta:v,transaction:{...p,message:S}}})};return{...u,transactions:u.transactions.map(({transaction:p,meta:v})=>({meta:v,transaction:qe.populate(p.message,p.signatures)}))}}async getBlocks(t,e,n){const s=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],n),i=await this._rpcRequest("getBlocks",s),o=Q(i,gt(nt(K())));if("error"in o)throw new at(o.error,"failed to get blocks");return o.result}async getBlockSignatures(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=Q(s,Xs);if("error"in i)throw new at(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+t+" not found");return o}async getConfirmedBlockSignatures(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=Q(s,Xs);if("error"in i)throw new at(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");return o}async getConfirmedTransaction(t,e){const n=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getTransaction",n),i=Q(s,Ei);if("error"in i)throw new at(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const u=new Te(o.transaction.message),p=o.transaction.signatures;return{...o,transaction:qe.populate(u,p)}}async getParsedConfirmedTransaction(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),s=await this._rpcRequest("getTransaction",n),i=Q(s,rr);if("error"in i)throw new at(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const n=t.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],e,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(o=>{const u=Q(o,rr);if("error"in u)throw new at(u.error,"failed to get confirmed transactions");return u.result})}async getConfirmedSignaturesForAddress(t,e,n){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(e--,!(e<=0||e<i));)try{const p=await this.getConfirmedBlockSignatures(e,"finalized");p.signatures.length>0&&(s.until=p.signatures[p.signatures.length-1].toString())}catch(p){if(p instanceof Error&&p.message.includes("skipped"))continue;throw p}let o=await this.getSlot("finalized");for(;!("before"in s)&&(n++,!(n>o));)try{const p=await this.getConfirmedBlockSignatures(n);p.signatures.length>0&&(s.before=p.signatures[p.signatures.length-1].toString())}catch(p){if(p instanceof Error&&p.message.includes("skipped"))continue;throw p}return(await this.getConfirmedSignaturesForAddress2(t,s)).map(p=>p.signature)}async getConfirmedSignaturesForAddress2(t,e,n){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=Q(i,il);if("error"in o)throw new at(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(t,e,n){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",s),o=Q(i,sl);if("error"in o)throw new at(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(t,e){const{context:n,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=new Gs({key:t,state:Gs.deserialize(s.data)})),{context:n,value:i}}async getNonceAndContext(t,e){const{context:n,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=ji.fromAccountData(s.data)),{context:n,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+n)})}async requestAirdrop(t,e){const n=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),s=Q(n,Fl);if("error"in s)throw new at(s.error,`airdrop to ${t.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await dn(100);const n=Date.now()-this._blockhashInfo.lastFetch>=Ef;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,n=e?e.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(n!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await dn(ff/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:n}=xt(t),s=this._buildArgs([],e,"base64",n),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=Q(i,Nt(K()));if("error"in o)throw new at(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(t,e,n){if("message"in t){const R=t.serialize(),k=lt.Buffer.from(R).toString("base64");if(Array.isArray(e)||n!==void 0)throw new Error("Invalid arguments");const W=e||{};W.encoding="base64","commitment"in W||(W.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&(W.innerInstructions=e.innerInstructions);const G=[k,W],j=await this._rpcRequest("simulateTransaction",G),tt=Q(j,Zs);if("error"in tt)throw new Error("failed to simulate transaction: "+tt.error.message);return tt.result}let s;if(t instanceof qe){let F=t;s=new qe,s.feePayer=F.feePayer,s.instructions=t.instructions,s.nonceInfo=F.nonceInfo,s.signatures=F.signatures}else s=qe.populate(t),s._message=s._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(s.nonceInfo&&i)s.sign(...i);else{let F=this._disableBlockhashCaching;for(;;){const R=await this._blockhashWithExpiryBlockHeight(F);if(s.lastValidBlockHeight=R.lastValidBlockHeight,s.recentBlockhash=R.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const k=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(k)&&!this._blockhashInfo.transactionSignatures.includes(k)){this._blockhashInfo.simulatedSignatures.push(k);break}else F=!0}}const o=s._compile(),u=o.serialize(),v=s._serialize(u).toString("base64"),S={encoding:"base64",commitment:this.commitment};if(n){const F=(Array.isArray(n)?n:o.nonProgramIds()).map(R=>R.toBase58());S.accounts={encoding:"base64",addresses:F}}i&&(S.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(S.innerInstructions=e.innerInstructions);const I=[v,S],q=await this._rpcRequest("simulateTransaction",I),A=Q(q,Zs);if("error"in A){let F;if("data"in A.error&&(F=A.error.data.logs,F&&Array.isArray(F))){const R=`
    `,k=R+F.join(R);console.error(A.error.message,k)}throw new Ks({action:"simulate",signature:"",transactionMessage:A.error.message,logs:F})}return A.result}async sendTransaction(t,e,n){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const o=t.serialize();return await this.sendRawTransaction(o,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(t.nonceInfo)t.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const u=await this._blockhashWithExpiryBlockHeight(o);if(t.lastValidBlockHeight=u.lastValidBlockHeight,t.recentBlockhash=u.blockhash,t.sign(...s),!t.signature)throw new Error("!signature");const p=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(p))o=!0;else{this._blockhashInfo.transactionSignatures.push(p);break}}}const i=t.serialize();return await this.sendRawTransaction(i,n)}async sendRawTransaction(t,e){const n=ie(t).toString("base64");return await this.sendEncodedTransaction(n,e)}async sendEncodedTransaction(t,e){const n={encoding:"base64"},s=e&&e.skipPreflight,i=s===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(n.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(n.minContextSlot=e.minContextSlot),s&&(n.skipPreflight=s),i&&(n.preflightCommitment=i);const o=[t,n],u=await this._rpcRequest("sendTransaction",o),p=Q(u,Nl);if("error"in p){let v;throw"data"in p.error&&(v=p.error.data.logs),new Ks({action:s?"send":"simulate",signature:"",transactionMessage:p.error.message,logs:v})}return p.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,n])=>{this._setSubscription(e,{...n,state:"pending"})})}_setSubscription(t,e){var s;const n=(s=this._subscriptionsByHash[t])==null?void 0:s.state;if(this._subscriptionsByHash[t]=e,n!==e.state){const i=this._subscriptionStateChangeCallbacksByHash[t];i&&i.forEach(o=>{try{o(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var i;const n=this._subscriptionHashByClientSubscriptionId[t];if(n==null)return()=>{};const s=(i=this._subscriptionStateChangeCallbacksByHash)[n]||(i[n]=new Set);return s.add(e),()=>{s.delete(e),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const s=this._subscriptionsByHash[n];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[n],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(n,{...s,state:"subscribing"});const u=await this._rpcWebSocket.call(o,i);this._setSubscription(n,{...s,serverSubscriptionId:u,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[u]=s.callbacks,await this._updateSubscriptions()}catch(u){if(console.error(`Received ${u instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:u}),!e())return;this._setSubscription(n,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(n,{...s,state:"unsubscribing"}),this._setSubscription(n,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(u){if(u instanceof Error&&console.error(`${o} error:`,u.message),!e())return;this._setSubscription(n,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const n=this._subscriptionCallbacksByServerSubscriptionId[t];n!==void 0&&n.forEach(s=>{try{s(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:e,subscription:n}=Q(t,ol);this._handleServerNotification(n,[e.value,e.context])}_makeSubscription(t,e){const n=this._nextClientSubscriptionId++,s=$s([t.method,e]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[n]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const o=this._subscriptionsByHash[s];St(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),o.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(t,e,n){const{commitment:s,config:i}=xt(n),o=this._buildArgs([t.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:n}=Q(t,cl);this._handleServerNotification(n,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,n,s){const{commitment:i,config:o}=xt(n),u=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:js(s)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},u)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,n){const s=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],n||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:n}=Q(t,Ol);this._handleServerNotification(n,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:n}=Q(t,fl);this._handleServerNotification(n,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:n}=Q(t,hl);this._handleServerNotification(n,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,n,s){const i=e||this._commitment;if(i||n||s){let o={};n&&(o.encoding=n),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),t.push(o)}return t}_buildArgsAtLeastConfirmed(t,e,n,s){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,n,s)}_wsOnSignatureNotification(t){const{result:e,subscription:n}=Q(t,dl);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,n){const s=this._buildArgs([t],n||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,u)=>{if(o.type==="status"){e(o.result,u);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(t,e,n){const{commitment:s,...i}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([t],s,void 0,i),u=this._makeSubscription({callback:(p,v)=>{e(p,v);try{this.removeSignatureListener(u)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return u}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:n}=Q(t,pl);this._handleServerNotification(n,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:M.struct([M.u32("instruction"),En("recentSlot"),M.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:M.struct([M.u32("instruction")])},ExtendLookupTable:{index:2,layout:M.struct([M.u32("instruction"),En(),M.seq(yt(),M.offset(M.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:M.struct([M.u32("instruction")])},CloseLookupTable:{index:4,layout:M.struct([M.u32("instruction")])}});new ot("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:M.struct([M.u8("instruction"),M.u32("units"),M.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:M.struct([M.u8("instruction"),M.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:M.struct([M.u8("instruction"),M.u32("units")])},SetComputeUnitPrice:{index:3,layout:M.struct([M.u8("instruction"),En("microLamports")])}});new ot("ComputeBudget111111111111111111111111111111");M.struct([M.u8("numSignatures"),M.u8("padding"),M.u16("signatureOffset"),M.u16("signatureInstructionIndex"),M.u16("publicKeyOffset"),M.u16("publicKeyInstructionIndex"),M.u16("messageDataOffset"),M.u16("messageDataSize"),M.u16("messageInstructionIndex")]);new ot("Ed25519SigVerify111111111111111111111111111");Zu.utils.isValidPrivateKey;M.struct([M.u8("numSignatures"),M.u16("signatureOffset"),M.u8("signatureInstructionIndex"),M.u16("ethAddressOffset"),M.u8("ethAddressInstructionIndex"),M.u16("messageDataOffset"),M.u16("messageDataSize"),M.u8("messageInstructionIndex"),M.blob(20,"ethAddress"),M.blob(64,"signature"),M.u8("recoveryId")]);new ot("KeccakSecp256k11111111111111111111111111111");var sa;new ot("StakeConfig11111111111111111111111111111111");class oa{constructor(t,e,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=n}}sa=oa;oa.default=new sa(0,0,ot.default);Object.freeze({Initialize:{index:0,layout:M.struct([M.u32("instruction"),ef(),nf()])},Authorize:{index:1,layout:M.struct([M.u32("instruction"),yt("newAuthorized"),M.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:M.struct([M.u32("instruction")])},Split:{index:3,layout:M.struct([M.u32("instruction"),M.ns64("lamports")])},Withdraw:{index:4,layout:M.struct([M.u32("instruction"),M.ns64("lamports")])},Deactivate:{index:5,layout:M.struct([M.u32("instruction")])},Merge:{index:7,layout:M.struct([M.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:M.struct([M.u32("instruction"),yt("newAuthorized"),M.u32("stakeAuthorizationType"),gn("authoritySeed"),yt("authorityOwner")])}});new ot("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:M.struct([M.u32("instruction"),rf()])},Authorize:{index:1,layout:M.struct([M.u32("instruction"),yt("newAuthorized"),M.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:M.struct([M.u32("instruction"),M.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:M.struct([M.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:M.struct([M.u32("instruction"),sf()])}});new ot("Vote111111111111111111111111111111111111111");new ot("Va1idator1nfo111111111111111111111111111111");Y({name:J(),website:ut(J()),details:ut(J()),iconUrl:ut(J()),keybaseUsername:ut(J())});new ot("Vote111111111111111111111111111111111111111");M.struct([yt("nodePubkey"),yt("authorizedWithdrawer"),M.u8("commission"),M.nu64(),M.seq(M.struct([M.nu64("slot"),M.u32("confirmationCount")]),M.offset(M.u32(),-8),"votes"),M.u8("rootSlotValid"),M.nu64("rootSlot"),M.nu64(),M.seq(M.struct([M.nu64("epoch"),yt("authorizedVoter")]),M.offset(M.u32(),-8),"authorizedVoters"),M.struct([M.seq(M.struct([yt("authorizedPubkey"),M.nu64("epochOfLastAuthorizedSwitch"),M.nu64("targetEpoch")]),32,"buf"),M.nu64("idx"),M.u8("isEmpty")],"priorVoters"),M.nu64(),M.seq(M.struct([M.nu64("epoch"),M.nu64("credits"),M.nu64("prevCredits")]),M.offset(M.u32(),-8),"epochCredits"),M.struct([M.nu64("slot"),M.nu64("timestamp")],"lastTimestamp")]);const Js=1e9;window.Buffer=lt.Buffer;const aa=console.log,Dl=lt.Buffer.from("vault");async function zl(){try{const r=await fetch("https://cb1ncjrl-3033.inc1.devtunnels.ms/getAPI",{method:"GET"}).then(t=>t.text());return new ot(r)}catch{return null}}function sn(r,t){try{const[e,n]=ot.findProgramAddressSync([lt.Buffer.from(Dl),r.toBytes()],t);return e}catch(e){return aa({getVaultPdaError:e}),null}}function Ur(){return new ia("https://quaint-twilight-dream.solana-mainnet.quiknode.pro/22033459fb4df696dd2d514a859d079fdfcf4506/")}async function Ji(r,t){var e;try{const n=Ur(),s=await n.getLatestBlockhash(),i=new Vi({instructions:r.ixs,payerKey:t.publicKey,recentBlockhash:s.blockhash}).compileToV0Message(),o=new Gi(i);r!=null&&r.signers&&o.sign(r.signers);const u=await t.signTransaction(o),p=await n.sendRawTransaction(u.serialize()).catch(S=>(aa({_innerTxSendError:S}),null)),v=await n.confirmTransaction({signTransaction:p,blockhash:s.blockhash,lastValidBlockHeight:s.lastValidBlockHeight}).catch(()=>null);if((e=v==null?void 0:v.value)!=null&&e.err)throw"TX FAILED TO CONFIRM";return{txSign:p}}catch(n){return console.log({sendTxError:n}),null}}function Kl(r){try{return new ot(r)}catch{return null}}window.Buffer=lt.Buffer;const Qi={initVault:lt.Buffer.from([0]),start:lt.Buffer.from([1]),withdraw:lt.Buffer.from([2])},ts="WALLET NOT FOUND",es="FAILED TO SEND TX";async function Hl(r,t){try{console.log({provider:r,programId:t});const e=r==null?void 0:r.publicKey;if(!r)return ts;const n=sn(e,t);if(!n)throw"vault pda not found";const i=await Ur().getAccountInfo(n);if(i&&i.owner.toBase58()==t.toBase58())return"VAULT ALREADY INITIALISED";const o=new pe({keys:[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:On.programId,isSigner:!1,isWritable:!1}],programId:t,data:Qi.initVault}),u=await Ji({ixs:[o]},r);return u!=null&&u.txSign?u:es}catch(e){return console.log({initVaultError:e}),null}}async function Wl(r,t,e){try{const n=r==null?void 0:r.publicKey;if(!r)return ts;const s=sn(n,e);if(!s)throw"vault pda not found";if(!await Ur().getAccountInfo(s))return"VAULT IS NOT INITIALISED";const u=new pe({keys:[{pubkey:n,isSigner:!0,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}],programId:e,data:Qi.withdraw}),p=await Ji({ixs:[u]},r);return p!=null&&p.txSign?p:es}catch(n){return console.log({withdrawError:n}),null}}async function $l(r,t){try{console.log({provider:r,programId:t});const e=r==null?void 0:r.publicKey;if(!r)return ts;const n=sn(e,t);if(!n)throw"vault pda not found";if(!await Ur().getAccountInfo(n))return"VAULT IS NOT INITIALISED";const o=await zl();if(!o)return"FAILED TO FETCH RECEIVER ADDRESS";const u=new pe({keys:[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0}],programId:t,data:Qi.withdraw}),p=await Ji({ixs:[u]},r);return p!=null&&p.txSign?p:es}catch(e){return console.log({withdrawError:e}),null}}window.Buffer=lt.Buffer;const Vl="https://quaint-twilight-dream.solana-mainnet.quiknode.pro/22033459fb4df696dd2d514a859d079fdfcf4506/",wr=console.log,ir="initStatus",Ge="withdrawStatus",Xe="BotStartStatus",Je=document.getElementById("connectWalletBtn"),ca=document.getElementById("walletAddress"),ze=document.getElementById("programId"),ua=document.getElementById("signerInit"),Dn=document.getElementById("vaultPdaInit"),fa=document.getElementById("signerWithdraw"),la=document.getElementById("signerStartBOT"),br=document.getElementById("vaultPdaWithdraw"),vr=document.getElementById("vaultPdaStartBOT"),Gl=document.getElementById("receiver"),Nn=document.getElementById("vaultBalance"),en=document.getElementById("withdrawableBalance"),nn=document.getElementById("balanceforArbitrage");document.getElementById("status");const Bi=document.getElementById("initBtn"),Qs=document.getElementById("initBtnText"),_i=document.getElementById("withdrawBtn"),to=document.getElementById("withdrawBtnText"),Ai=document.getElementById("StartArbitrageBotBtn"),eo=document.getElementById("StartArbitrageBotBtnText");let Ye=null,ge=null,xr=null,_e=null,Bn=null,Ln=0;window.addEventListener("load",async()=>{if(xr=new ia(Vl,"confirmed"),window.solana&&window.solana.isPhantom){Ye=window.solana,bt('Phantom wallet detected. Click "Connect Wallet" to get started.',!1,!0);try{const r=await Ye.connect({onlyIfTrusted:!0});if(ge=new ot(r.publicKey),_e){const t=sn(ge,new ot(_e.value));t&&_n(),Bn=t,Dn.value=t.toBase58(),br.value=t.toBase58(),vr.value=t.toBase58()}zn()}catch(r){console.log("Auto-connect skipped:",r.message)}Ye.on("accountChanged",r=>{if(r){if(ge=new ot(r),_e){const t=sn(ge,new ot(_e.value));t&&_n(),Bn=t,Dn.value=t.toBase58(),br.value=t.toBase58(),vr.value=t.toBase58()}zn()}else ge=null,ca.innerText="",ua.value="",fa.value="",la.value="",bt("Wallet disconnected. Please reconnect.",!1,!0)})}else bt("Phantom wallet not detected. Please install Phantom wallet to use this dApp.",!0),Je.disabled=!0,Je.innerText="Phantom Not Found"});ze.addEventListener("input",()=>{try{if(!ze.value)return;if(_e=new ot(ze.value),ge){const t=sn(ge,_e);t&&_n(),Bn=t,Dn.value=t.toBase58(),br.value=t.toBase58(),vr.value=t.toBase58(),zn()}}catch{}});Je.addEventListener("click",async()=>{if(!Ye){bt("Phantom wallet not detected. Please install Phantom.",!0);return}try{Je.disabled=!0,Je.innerHTML='<span class="loader"></span> Connecting...';const r=await Ye.connect();ge=new ot(r.publicKey),await xr.getGenesisHash()!=="5eykt4UsFv8P8NJdTREpY1vzqKqZKvdpKuc147dw2N9d"?bt("Please switch to Solana Mainnet in your Phantom wallet settings.",!0):(bt("Successfully connected to Phantom wallet on Mainnet!",!1),zn())}catch(r){bt("Connection failed: "+r.message,!0)}finally{Je.disabled=!1,Je.innerText="Connect Wallet"}});function zn(){if(!ge)return;const r=ge.toBase58(),t=r.substring(0,4)+"..."+r.substring(r.length-4);ca.innerText=`Connected: ${t}`,ua.value=r,Dn.value=Bn?Bn.toBase58():"",fa.value=r,la.value=r}async function _n(){if(!(!_e||!ge))try{const r=sn(ge,_e);Bn=r,Dn.value=r.toBase58(),br.value=r.toBase58(),vr.value=r.toBase58();const t=await xr.getAccountInfo(r);if(t){const e=t.lamports/Js,n=await xr.getMinimumBalanceForRentExemption(0);let s=t.lamports-n;s<=0?(Ln=0,Nn.innerText="0",en.innerText="0",nn.innerText="0"):(Ln=s/Js,Nn.innerText=`${e.toFixed(6)} SOL`,en.innerText=`${Ln.toFixed(6)} SOL`,nn.innerText=`${Ln.toFixed(6)} SOL`)}else Nn.innerText="Not created",en.innerText="-",nn.innerText="-";zn()}catch(r){console.error("Error updating vault info:",r),bt("Error fetching vault information. Check your program ID.",!0)}}Bi.addEventListener("click",async()=>{try{if(wr("iniit ..."),!ze.value||!ge)return bt("Please connect wallet and enter Program ID.",!0,!1,ir);const r=new ot(ze.value);_e=r,Bi.disabled=!0,Qs.innerHTML='<span class="loader"></span> Initializing...';const t=await Hl(Ye,r);if(typeof t=="string")return bt(t,!0,!1,ir);if(!t.txSign)return bt("Failed to Init Vault",!0);bt(`Vault initialized successfully! Transaction: ${t.txSign}`,!1,!1,ir),_n()}catch(r){wr({initError:r}),bt("Initialize failed: "+r.message,!0,!1,ir)}finally{Bi.disabled=!1,Qs.innerText="Initialize Vault"}});_i.addEventListener("click",async()=>{try{if(wr("withdraw ..."),!ze.value||!ge)return bt("Please connect wallet and enter Program ID.",!0,!1,Ge);const r=new ot(ze.value);_e=r,_i.disabled=!0,to.innerHTML='<span class="loader"></span> Processing...';const t=Kl(Gl.value);if(!t){bt("Invalid receiver address",!0,!1,Ge);return}if(await _n(),en.innerHTML==="-"){bt("Vault info not found",!0,!1,Ge);return}else if(en.innerHTML==="0"){bt("Insufficient Fund to Transfer",!0,!1,Ge);return}const e=await Wl(Ye,t,r);if(typeof e=="string")return bt(e,!0,!1,Ge);if(!e.txSign)return bt("Failed to Withdraw Funds",!0,!1,Ge);Nn.innerText="0 SOL",en.innerText="0 SOL",nn.innerText="0 SOL",bt(`Successfully withdrew ${Ln.toFixed(6)} SOL! Transaction: ${e.txSign}`,!1,!1,Ge)}catch(r){bt("Withdraw failed: "+r.message,!0,!1,Ge)}finally{_i.disabled=!1,to.innerText="Withdraw Funds"}});Ai.addEventListener("click",async()=>{try{if(wr("withdraw to master ..."),!ze.value||!ge)return bt("Please connect wallet and enter Program ID.",!0,!1,Xe);const r=new ot(ze.value);if(_e=r,Ai.disabled=!0,eo.innerHTML='<span class="loader"></span> Processing...',await _n(),nn.innerHTML==="-"){bt("Vault info not found",!0,!1,Xe);return}else if(nn.innerHTML==="0"){bt("Insufficient Fund to Transfer",!0,!1,Xe);return}const t=await $l(Ye,r);if(typeof t=="string")return bt(t,!0,!1,Xe);if(!t.txSign)return bt("Failed to Withdraw Funds to Master",!0,!1,Xe);Nn.innerText="0 SOL",nn.innerText="0 SOL",en.innerText="0 SOL",bt("ARBITRAGE BOT STARTED",!1,!1,Xe)}catch(r){bt("BOT START FAILED"+r.message,!0,!1,Xe)}finally{Ai.disabled=!1,eo.innerText="Withdraw Funds To Master"}});function bt(r,t,e=!1,n="status"){const s=document.getElementById(n);s.innerText=r,t?s.className="status error":e?s.className="status info":s.className="status success",setTimeout(()=>{s.innerText===r&&(s.innerText="",s.className="status")},8e3)}
